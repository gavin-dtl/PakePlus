import{d as Q,k as W,l as X,r as n,b as Z,e as $,c as u,o as p,f as i,m as l,w as o,F as E,y as F,a as s,n as J,t as L,H as aa,aw as ea,E as la,M as ta,p as N,aE as ia,ao as T,aR as sa,aS as oa,C as na,q as k,O as q,V as ca,_ as da}from"./index-h2IMwmcw.js";import{_ as ra}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CRNxIRVm.js";import{M as y}from"./index-B9iskDNg.js";import ua from"./UploadVideo-ob6QKtri.js";const pa={class:"main"},ma={class:"scene-list"},fa=["onClick"],ya={style:{display:"flex","align-items":"center",width:"150px"}},va={class:"meeting-body"},ha={key:0},ga={key:0,class:"picture-recording"},ka={class:"List"},Ca=["onClick"],wa={class:"text"},_a={class:"button"},ba={class:"picture-recording-body"},xa={class:"video"},Va=["src"],La=da(Q({name:"MeetingManagement",__name:"index",setup(Ma){const m=W(),{t:H}=X(),c=n("information"),O=async()=>{const t=await m.validatePrompt("\u8BF7\u8F93\u5165\u4F1A\u8BAE\u540D\u79F0",H("\u65B0\u589E"),{inputValue:"",validator:a=>!!a||"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"});await y.createMeeting({name:t.value}),_(),m.success("\u65B0\u589E\u6210\u529F")},Y=()=>{C()},C=()=>{const t=v.value.find(a=>a.id==d.value);w(t)},w=async t=>{x.value="";try{c.value=="information"?M.value=await y.meetingUploadList({id:t.id}):c.value=="pictureRecording"&&(I.value=await y.pictureRecordingList({id:t.id})),d.value=t.id}catch{}},M=n([]),v=n([]),j=n(["\u672A\u5F00\u59CB","\u4F1A\u8BAE\u4E2D","\u5DF2\u7ED3\u675F"]),A=n({pageNum:1,pageSize:10}),_=async()=>{const t=await y.getMeetingListPage(A.value);v.value=t.records,v.value.length>0&&w(v.value[0])},b=n(),d=n(0),B={title:"\u6587\u4EF6\u4E0A\u4F20",isShowTip:!1},D=()=>{C()},R=async t=>{try{await m.delConfirm("\u786E\u8BA4\u5220\u9664\u8BE5\u6587\u4EF6\u5417\uFF1F"),await y.deleteVideoFile({filePath:t.path}),m.success("\u5220\u9664\u6210\u529F"),C()}catch{}},U=t=>{try{const a="/api/core/file/download?filePath="+encodeURIComponent(t.path),r=document.createElement("a");r.href=a,r.download=t.playName,document.body.appendChild(r),r.click(),document.body.removeChild(r)}catch{}},I=n([]),x=n("");return Z(()=>{_()}),$(()=>{}),(t,a)=>{const r=aa,P=la,V=oa,h=na,G=sa,S=ta,z=ra,K=ca;return p(),u("div",pa,[i("div",ma,[a[2]||(a[2]=i("p",{class:"title"},"\u4F1A\u8BAE\u5217\u8868",-1)),l(P,{height:"calc(100vh - 190px)"},{default:o(()=>[(p(!0),u(E,null,F(s(v),e=>(p(),u("div",{onClick:f=>w(e),style:J({backgroundColor:e.id==s(d)?"#409efe":"#f1f1f1",color:e.id==s(d)?"#fcfcfc":"#2e3235"}),key:e,class:"scrollbar-item"},[i("p",ya,L(e.name),1),i("p",{style:J({color:e.status==1?"#2df030":""})},L(s(j)[e.status]),5),i("p",null,[l(r,null,{default:o(()=>[l(s(ea),{onClick:f=>(async g=>{try{await m.delConfirm(),await y.deleteMeeting({id:g.id}),_(),m.success("\u5220\u9664\u6210\u529F")}catch{}})(e)},null,8,["onClick"])]),_:2},1024)])],12,fa))),128))]),_:1}),i("div",{style:{"background-color":"white"}},[i("p",{class:"scene-list-button",onClick:O},"\u65B0\u589E\u4F1A\u8BAE")])]),i("div",va,[l(K,{modelValue:s(c),"onUpdate:modelValue":a[1]||(a[1]=e=>T(c)?c.value=e:null),style:{width:"100%",height:"100%"},onTabChange:Y},{default:o(()=>[l(S,{label:"\u4F1A\u8BAE\u8D44\u6599",name:"information"},{default:o(()=>[s(c)=="information"&&s(d)?(p(),u("div",ha,[l(ua,ia({onUploadSuccess:D},B,{activeListId:s(d),modelValue:s(b),"onUpdate:modelValue":a[0]||(a[0]=e=>T(b)?b.value=e:null),limit:1}),null,16,["activeListId","modelValue"]),l(G,{data:s(M),style:{width:"100%","margin-top":"15px"}},{default:o(()=>[l(V,{prop:"name",label:"\u6587\u4EF6\u540D\u79F0"}),l(V,{prop:"path",label:"\u8DEF\u5F84"}),l(V,{label:"\u64CD\u4F5C"},{default:o(e=>[l(h,{type:"primary",link:"",size:"small",onClick:f=>U(e.row)},{default:o(()=>a[3]||(a[3]=[k(" \u4E0B\u8F7D ")])),_:2},1032,["onClick"]),l(h,{size:"small",type:"danger",link:"",onClick:f=>R(e.row)},{default:o(()=>a[4]||(a[4]=[k(" \u5220\u9664 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])):N("",!0)]),_:1}),l(S,{label:"\u4F1A\u8BAE\u5F55\u50CF",name:"pictureRecording",style:{height:"100%"}},{default:o(()=>[s(c)=="pictureRecording"&&s(d)?(p(),u("div",ga,[l(z,{style:{height:"98%"}},{default:o(()=>[i("div",ka,[a[7]||(a[7]=i("p",{class:"title"},"\u6587\u4EF6\u5217\u8868",-1)),l(P,{height:"calc(100vh - 220px)"},{default:o(()=>[(p(!0),u(E,null,F(s(I),e=>(p(),u("p",{class:"list-item",key:e.id,onClick:f=>{return g=e,void(x.value="/api/core/file/play?playPath="+encodeURIComponent(g.path));var g}},[i("span",wa,L(e.name),1),i("span",_a,[l(h,{type:"primary",onClick:q(f=>U(e),["stop"])},{default:o(()=>a[5]||(a[5]=[k("\u4E0B\u8F7D")])),_:2},1032,["onClick"]),l(h,{type:"danger",onClick:q(f=>R(e),["stop"])},{default:o(()=>a[6]||(a[6]=[k("\u5220\u9664")])),_:2},1032,["onClick"])])],8,Ca))),128))]),_:1})])]),_:1}),l(z,{style:{flex:"1",padding:"10px"}},{default:o(()=>[i("div",ba,[i("div",xa,[i("video",{style:{height:"100%",width:"100%",padding:"15px"},controlslist:"nodownload",autoplay:"",controls:"",src:s(x)},null,8,Va)])])]),_:1})])):N("",!0)]),_:1})]),_:1},8,["modelValue"])])])}}}),[["__scopeId","data-v-ebb8348f"]]);export{La as default};

import{_ as k}from"./Dialog.vue_vue_type_style_index_0_lang-lK2Juh8I.js";import{d as x,q as C,p as D,r,b as R,e as N,C as U,o as I,s as m,f as s,j as n,I as O,J as j,a as w,K as A,L as E,M as G,N as J,D as K,c as L,F as X,i as B,G as H,_ as Q}from"./index-Cv_H95TD.js";import{_ as W}from"./index-CefxW7b6.js";import{c as Y}from"./index-DZZPDAJY.js";import"./index-CT5T1-Ok.js";import"./mitt-CI7Qv1RY.js";const $={style:{height:"280px","aspect-ratio":"16 / 9",width:"auto","background-color":"white","margin-left":"50%",transform:"translateX(-50%)"}},aa={class:"PTZ-control"},sa={class:"PTZ-control-buttons"},ea={class:"PTZ-control-buttons"},la={class:"PTZ-control-plate"},na={class:"enhanced-quartered-circle"},ta={class:"PTZ-control-buttons"},ua={style:{padding:"0"}},oa=Q(x({name:"DeviceTypeForm",__name:"presetPositionDialog",emits:["success"],setup(ca,{expose:_,emit:ia}){const{t:ra}=C(),F=D(),b=r(!1),t=r("");r(!1),_({open:async l=>{t.value=l.name,b.value=!0}});const T=r(""),v=r([]),Z=l=>{const a=v.value.findIndex(d=>d.timerId===l);a!==-1&&(clearInterval(l),v.value.splice(a,1))},f=r(!1),P=r(),p=async l=>{await Y.ctrlCamera(l)},h=l=>{p({name:t.value,cmd:l,param:0})},u=l=>{f.value=!0,P.value=((a,d)=>{const i={timerId:null,interval:a,requestFn:d,isRequesting:!1};return i.timerId=window.setInterval(async()=>{if(!i.isRequesting){i.isRequesting=!0;try{await d()}catch{}finally{i.isRequesting=!1}}},a),v.value.push(i),()=>Z(i.timerId)})(100,()=>p({name:t.value,cmd:l,param:0}))},o=async l=>{f.value&&(P.value(),f.value=!1,await p({name:t.value,cmd:l,param:0}))},c=async l=>{f.value&&(P.value(),f.value=!1,await p({name:t.value,cmd:l,param:0}))},M=r(0),q=async l=>{if(l=="setPosition")try{await F.confirm("\u786E\u5B9A\u8BBE\u7F6E\u4E3A\u9884\u7F6E\u4F4D\u5417\uFF1F"),await p({name:t.value,cmd:l,param:M.value})}catch{}else await p({name:t.value,cmd:l,param:M.value})};return R(()=>{}),N(()=>{v.value.forEach(l=>{l.timerId&&clearInterval(l.timerId)}),v.value=[],T.value="\u6240\u6709\u8F6E\u8BE2\u5DF2\u505C\u6B62"}),(l,a)=>{const d=W,i=O,g=j,z=H,S=K,V=k;return I(),U(V,{title:t.value,modelValue:b.value,"onUpdate:modelValue":a[29]||(a[29]=e=>b.value=e),width:"600px",draggable:!1},{default:m(()=>[s("div",$,[n(d,{style:{"border-radius":"10px",margin:"auto"},params:{height:180,width:400,name:t.value},interval:100},null,8,["params"])]),s("div",null,[n(i),a[39]||(a[39]=s("p",{class:"title"},"\u4E91\u53F0\u63A7\u5236",-1)),s("div",aa,[s("div",sa,[s("p",{class:"enlarge",onMousedown:a[0]||(a[0]=e=>u("zoomUp")),onMouseup:a[1]||(a[1]=e=>o("zoomStop")),onMouseleave:a[2]||(a[2]=e=>c("zoomStop"))},a[30]||(a[30]=[s("span",{class:"PTZ-control-buttons-bg enlarge-icon"},null,-1),s("span",null,"\u653E\u5927",-1)]),32),s("p",{class:"closeFocus",onMousedown:a[3]||(a[3]=e=>u("focusFar")),onMouseup:a[4]||(a[4]=e=>o("focusStop")),onMouseleave:a[5]||(a[5]=e=>c("focusStop"))},a[31]||(a[31]=[s("span",{class:"PTZ-control-buttons-bg closeFocus-icon"},null,-1),s("span",null,"\u8FD1\u7126",-1)]),32),s("p",{class:"manualFocus",onClick:a[6]||(a[6]=e=>h("focusAuto"))},a[32]||(a[32]=[s("span",{class:"PTZ-control-buttons-bg manualFocus-icon"},null,-1),s("span",null,"\u81EA\u52A8\u805A\u7126",-1)]))]),s("div",ea,[s("p",{class:"zoomOut",onMousedown:a[7]||(a[7]=e=>u("zoomDown")),onMouseup:a[8]||(a[8]=e=>o("zoomStop")),onMouseleave:a[9]||(a[9]=e=>c("zoomStop"))},a[33]||(a[33]=[s("span",{class:"PTZ-control-buttons-bg zoomOut-icon"},null,-1),s("span",null,"\u7F29\u5C0F",-1)]),32),s("p",{class:"farFocus",onMousedown:a[10]||(a[10]=e=>u("focusNear")),onMouseup:a[11]||(a[11]=e=>o("focusStop")),onMouseleave:a[12]||(a[12]=e=>c("focusStop"))},a[34]||(a[34]=[s("span",{class:"PTZ-control-buttons-bg farFocus-icon"},null,-1),s("span",null,"\u8FDC\u7126",-1)]),32),s("p",{class:"autoFocus",onClick:a[13]||(a[13]=e=>h("focusNormal"))},a[35]||(a[35]=[s("span",{class:"PTZ-control-buttons-bg autoFocus-icon"},null,-1),s("span",null,"\u624B\u52A8\u805A\u7126",-1)]))]),s("div",la,[s("div",na,[s("div",{class:"quadrant quadrant-1",onMousedown:a[14]||(a[14]=e=>u("left")),onMouseup:a[15]||(a[15]=e=>o("stop")),onMouseleave:a[16]||(a[16]=e=>c("stop"))},[n(g,{class:"icon"},{default:m(()=>[n(w(A))]),_:1})],32),s("div",{class:"quadrant quadrant-2",onMousedown:a[17]||(a[17]=e=>u("down")),onMouseup:a[18]||(a[18]=e=>o("stop")),onMouseleave:a[19]||(a[19]=e=>c("stop"))},[n(g,{class:"icon"},{default:m(()=>[n(w(E))]),_:1})],32),s("div",{class:"quadrant quadrant-3",onMousedown:a[20]||(a[20]=e=>u("right")),onMouseup:a[21]||(a[21]=e=>o("stop")),onMouseleave:a[22]||(a[22]=e=>c("stop"))},[n(g,{class:"icon"},{default:m(()=>[n(w(G))]),_:1})],32),s("div",{class:"quadrant quadrant-4",onMousedown:a[23]||(a[23]=e=>u("up")),onMouseup:a[24]||(a[24]=e=>o("stop")),onMouseleave:a[25]||(a[25]=e=>c("stop"))},[n(g,{class:"icon"},{default:m(()=>[n(w(J))]),_:1})],32),a[36]||(a[36]=s("div",{class:"center"},[s("span")],-1))])]),s("div",ta,[s("p",ua,[n(S,{modelValue:M.value,"onUpdate:modelValue":a[26]||(a[26]=e=>M.value=e),placeholder:"\u9884\u8BBE\u4F4D",size:"large",style:{padding:"0"}},{default:m(()=>[(I(),L(X,null,B(65,(e,y)=>n(z,{key:y,label:"\u9884\u8BBE\u4F4D"+(e-1),value:y},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),s("p",{onClick:a[27]||(a[27]=e=>q("callPosition"))},a[37]||(a[37]=[s("span",null,"\u8C03\u7528",-1)])),s("p",{onClick:a[28]||(a[28]=e=>q("setPosition"))},a[38]||(a[38]=[s("span",null,"\u8BBE\u7F6E",-1)]))])])])]),_:1},8,["title","modelValue"])}}}),[["__scopeId","data-v-f13eaf27"]]);export{oa as default};

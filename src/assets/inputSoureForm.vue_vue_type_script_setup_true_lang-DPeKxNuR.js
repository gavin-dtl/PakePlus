import{d as D,X as R,l as X,k as E,r as s,a3 as G,z as r,o as p,w as u,a4 as Q,a5 as Y,a,m as n,p as S,a8 as H,aL as J,aM as O,q as N,a9 as P,A as T,c as W,F as Z,y as $,B as ee,b6 as ae,C as le,ao as te}from"./index-h2IMwmcw.js";import{_ as ue}from"./Dialog.vue_vue_type_style_index_0_lang-Gezqvh3u.js";import{i as c}from"./index-G4-Bc5RT.js";const se=D({name:"ManageSpaceForm",__name:"inputSoureForm",emits:["success"],setup(ne,{expose:C,emit:F}){R();const{t:I}=X(),w=E(),y=s(""),m=s(!1),v=s(!1),l=s({inputName:void 0,selectInputName:void 0,type:"1"}),h=G({inputName:[{required:!0,message:"\u4F4D\u7F6E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],selectInputName:[{required:!0,message:"\u4F4D\u7F6E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),f=s(),o=s(""),_=s("");C({open:async(d,e,i)=>{y.value=d,o.value=e,_.value=i,m.value=!0,x(),z(),(async V=>{l.value.inputName=await c.getCreateInputName({inputKind:V})})(i)}});const q=F,U=async()=>{await f.value.validate(),v.value=!0;try{l.value.type=="1"?(await c.createInput({sceneName:o.value,inputName:l.value.inputName,inputKind:_.value}),w.success(I("common.createSuccess"))):(await c.createSceneItem({sceneName:o.value,inputName:l.value.selectInputName}),w.success(I("common.updateSuccess"))),m.value=!1,q("success")}finally{v.value=!1}},g=s([]),x=async()=>{y.value=="\u573A\u666F"?g.value=await c.getAddSceneList({sceneName:o.value}):g.value=await c.getAddInputList({sceneName:o.value,inputKind:_.value})},z=()=>{var d;l.value={inputName:void 0,selectInputName:void 0,type:"1"},(d=f.value)==null||d.resetFields()};return(d,e)=>{const i=O,V=J,b=H,A=P,K=ee,L=T,M=Y,k=le,j=ue,B=ae;return p(),r(j,{title:"\u65B0\u589E"+a(y),modelValue:a(m),"onUpdate:modelValue":e[4]||(e[4]=t=>te(m)?m.value=t:null)},{footer:u(()=>[n(k,{onClick:U,type:"primary",disabled:a(v)},{default:u(()=>e[7]||(e[7]=[N("\u786E \u5B9A")])),_:1},8,["disabled"]),n(k,{onClick:e[3]||(e[3]=t=>m.value=!1)},{default:u(()=>e[8]||(e[8]=[N("\u53D6 \u6D88")])),_:1})]),default:u(()=>[Q((p(),r(M,{ref_key:"formRef",ref:f,model:a(l),rules:a(h),"label-width":"100px"},{default:u(()=>[n(b,{label:"\u7C7B\u578B",prop:"type"},{default:u(()=>[n(V,{modelValue:a(l).type,"onUpdate:modelValue":e[0]||(e[0]=t=>a(l).type=t)},{default:u(()=>[n(i,{value:"1",size:"large"},{default:u(()=>e[5]||(e[5]=[N("\u65B0\u5EFA")])),_:1}),n(i,{value:"2",size:"large"},{default:u(()=>e[6]||(e[6]=[N("\u9009\u62E9\u73B0\u6709")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(l).type=="1"?(p(),r(b,{key:0,label:"\u540D\u79F0",prop:"inputName"},{default:u(()=>[n(A,{modelValue:a(l).inputName,"onUpdate:modelValue":e[1]||(e[1]=t=>a(l).inputName=t),placeholder:"\u8BF7\u8F93\u5165\u8F93\u5165\u6E90\u540D\u79F0"},null,8,["modelValue"])]),_:1})):S("",!0),a(l).type=="2"?(p(),r(b,{key:1,label:"\u540D\u79F0",prop:"selectInputName"},{default:u(()=>[n(L,{modelValue:a(l).selectInputName,"onUpdate:modelValue":e[2]||(e[2]=t=>a(l).selectInputName=t),placeholder:"\u8BF7\u9009\u62E9\u8F93\u5165\u6E90"},{default:u(()=>[(p(!0),W(Z,null,$(a(g),t=>(p(),r(K,{key:t.name,label:t.showName,value:t.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):S("",!0)]),_:1},8,["model","rules"])),[[B,a(v)]])]),_:1},8,["title","modelValue"])}}});export{se as _};

import{_ as k}from"./Dialog.vue_vue_type_style_index_0_lang-Gezqvh3u.js";import{d as x,l as C,k as V,r as i,b as D,e as R,z as U,o as F,w as d,f as s,m as n,D as A,H as N,a as M,I as O,J as B,K as E,L as H,A as J,c as K,F as L,y as X,B as j,_ as G}from"./index-h2IMwmcw.js";import{_ as Y}from"./index-FKu4-vz2.js";import{c as Q}from"./index-khA-Kq7n.js";import"./index-DuOSvttm.js";import"./mitt-CI7Qv1RY.js";const W={style:{height:"280px","aspect-ratio":"16 / 9",width:"auto","background-color":"white","margin-left":"50%",transform:"translateX(-50%)"}},$={class:"PTZ-control"},aa={class:"PTZ-control-buttons"},sa={class:"PTZ-control-buttons"},ea={class:"PTZ-control-plate"},la={class:"enhanced-quartered-circle"},na={class:"PTZ-control-buttons"},ua={style:{padding:"0"}},ta=G(x({name:"DeviceTypeForm",__name:"presetPositionDialog",emits:["success"],setup(oa,{expose:_,emit:ca}){const{t:ra}=C();V();const w=i(!1),u=i("");i(!1),_({open:async l=>{u.value=l.name,w.value=!0}});const I=i(""),m=i([]),T=l=>{const a=m.value.findIndex(p=>p.timerId===l);a!==-1&&(clearInterval(l),m.value.splice(a,1))},v=i(!1),b=i(),f=async l=>{await Q.ctrlCamera(l)},P=l=>{f({name:u.value,cmd:l,param:0})},t=l=>{v.value=!0,b.value=((a,p)=>{const r={timerId:null,interval:a,requestFn:p,isRequesting:!1};return r.timerId=window.setInterval(async()=>{if(!r.isRequesting){r.isRequesting=!0;try{await p()}catch{}finally{r.isRequesting=!1}}},a),m.value.push(r),()=>T(r.timerId)})(100,()=>f({name:u.value,cmd:l,param:0}))},o=async l=>{v.value&&(b.value(),v.value=!1,await f({name:u.value,cmd:l,param:0}))},c=async l=>{v.value&&(b.value(),v.value=!1,await f({name:u.value,cmd:l,param:0}))},y=i(0),h=async l=>{await f({name:u.value,cmd:l,param:y.value})};return D(()=>{}),R(()=>{m.value.forEach(l=>{l.timerId&&clearInterval(l.timerId)}),m.value=[],I.value="\u6240\u6709\u8F6E\u8BE2\u5DF2\u505C\u6B62"}),(l,a)=>{const p=Y,r=A,g=N,Z=j,z=J,S=k;return F(),U(S,{title:u.value,modelValue:w.value,"onUpdate:modelValue":a[29]||(a[29]=e=>w.value=e),width:"600px",draggable:!1},{default:d(()=>[s("div",W,[n(p,{style:{"border-radius":"10px",margin:"auto"},params:{height:180,width:400,name:u.value},interval:100},null,8,["params"])]),s("div",null,[n(r),a[39]||(a[39]=s("p",{class:"title"},"\u4E91\u53F0\u63A7\u5236",-1)),s("div",$,[s("div",aa,[s("p",{class:"enlarge",onMousedown:a[0]||(a[0]=e=>t("zoomUp")),onMouseup:a[1]||(a[1]=e=>o("zoomStop")),onMouseleave:a[2]||(a[2]=e=>c("zoomStop"))},a[30]||(a[30]=[s("span",{class:"PTZ-control-buttons-bg enlarge-icon"},null,-1),s("span",null,"\u653E\u5927",-1)]),32),s("p",{class:"closeFocus",onMousedown:a[3]||(a[3]=e=>t("focusFar")),onMouseup:a[4]||(a[4]=e=>o("focusStop")),onMouseleave:a[5]||(a[5]=e=>c("focusStop"))},a[31]||(a[31]=[s("span",{class:"PTZ-control-buttons-bg closeFocus-icon"},null,-1),s("span",null,"\u8FD1\u7126",-1)]),32),s("p",{class:"manualFocus",onClick:a[6]||(a[6]=e=>P("focusAuto"))},a[32]||(a[32]=[s("span",{class:"PTZ-control-buttons-bg manualFocus-icon"},null,-1),s("span",null,"\u81EA\u52A8\u805A\u7126",-1)]))]),s("div",sa,[s("p",{class:"zoomOut",onMousedown:a[7]||(a[7]=e=>t("zoomDown")),onMouseup:a[8]||(a[8]=e=>o("zoomStop")),onMouseleave:a[9]||(a[9]=e=>c("zoomStop"))},a[33]||(a[33]=[s("span",{class:"PTZ-control-buttons-bg zoomOut-icon"},null,-1),s("span",null,"\u7F29\u5C0F",-1)]),32),s("p",{class:"farFocus",onMousedown:a[10]||(a[10]=e=>t("focusNear")),onMouseup:a[11]||(a[11]=e=>o("focusStop")),onMouseleave:a[12]||(a[12]=e=>c("focusStop"))},a[34]||(a[34]=[s("span",{class:"PTZ-control-buttons-bg farFocus-icon"},null,-1),s("span",null,"\u8FDC\u7126",-1)]),32),s("p",{class:"autoFocus",onClick:a[13]||(a[13]=e=>P("focusNormal"))},a[35]||(a[35]=[s("span",{class:"PTZ-control-buttons-bg autoFocus-icon"},null,-1),s("span",null,"\u624B\u52A8\u805A\u7126",-1)]))]),s("div",ea,[s("div",la,[s("div",{class:"quadrant quadrant-1",onMousedown:a[14]||(a[14]=e=>t("left")),onMouseup:a[15]||(a[15]=e=>o("stop")),onMouseleave:a[16]||(a[16]=e=>c("stop"))},[n(g,{class:"icon"},{default:d(()=>[n(M(O))]),_:1})],32),s("div",{class:"quadrant quadrant-2",onMousedown:a[17]||(a[17]=e=>t("down")),onMouseup:a[18]||(a[18]=e=>o("stop")),onMouseleave:a[19]||(a[19]=e=>c("stop"))},[n(g,{class:"icon"},{default:d(()=>[n(M(B))]),_:1})],32),s("div",{class:"quadrant quadrant-3",onMousedown:a[20]||(a[20]=e=>t("right")),onMouseup:a[21]||(a[21]=e=>o("stop")),onMouseleave:a[22]||(a[22]=e=>c("stop"))},[n(g,{class:"icon"},{default:d(()=>[n(M(E))]),_:1})],32),s("div",{class:"quadrant quadrant-4",onMousedown:a[23]||(a[23]=e=>t("up")),onMouseup:a[24]||(a[24]=e=>o("stop")),onMouseleave:a[25]||(a[25]=e=>c("stop"))},[n(g,{class:"icon"},{default:d(()=>[n(M(H))]),_:1})],32),a[36]||(a[36]=s("div",{class:"center"},[s("span")],-1))])]),s("div",na,[s("p",ua,[n(z,{modelValue:y.value,"onUpdate:modelValue":a[26]||(a[26]=e=>y.value=e),placeholder:"\u9884\u8BBE\u4F4D",size:"large",style:{padding:"0"}},{default:d(()=>[(F(),K(L,null,X(65,(e,q)=>n(Z,{key:q,label:"\u9884\u8BBE\u4F4D"+(e-1),value:q},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),s("p",{onClick:a[27]||(a[27]=e=>h("callPosition"))},a[37]||(a[37]=[s("span",null,"\u8C03\u7528",-1)])),s("p",{onClick:a[28]||(a[28]=e=>h("setPosition"))},a[38]||(a[38]=[s("span",null,"\u8BBE\u7F6E",-1)]))])])])]),_:1},8,["title","modelValue"])}}}),[["__scopeId","data-v-5e299cad"]]);export{ta as default};

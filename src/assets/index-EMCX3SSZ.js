import{au as x,d as T,p as W,r as L,b as Y,c as i,o as r,j as l,s,f as n,F as C,i as k,a as N,t as _,aa as q,x as p,H as z,aR as D,aS as J,at as E,aG as G,bd as w,be as b,_ as K}from"./index-DzCoMBOl.js";import{_ as O}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CCSEnNgB.js";const P=async()=>await x.get({url:"/cmd/config/getSceneCmdIndexList"}),Q=async I=>await x.post({url:"/cmd/config/setSceneCmdIndexList",data:I}),X=async()=>await x.get({url:"/cmd/config/getMonitorCmdIndexList"}),Z=async I=>await x.post({url:"/cmd/config/setMonitorCmdIndexList",data:I}),ee=async()=>await x.get({url:"/cmd/config/getSceneGroundCmdIndexList"}),ae=async I=>await x.post({url:"/cmd/config/setSceneGroundCmdIndexList",data:I}),de=async()=>await x.get({url:"/cmd/config/getInputCmdIndexList"}),ne=async I=>await x.post({url:"/cmd/config/setInputCmdIndexList",data:I}),te={class:"Scene-Collection"},le={class:"label"},se={class:"value"},ce={class:"keep-Button"},oe={class:"Scene-Collection"},me={class:"label"},ue={class:"value"},ie={class:"keep-Button"},re={class:"Scene-Collection"},pe={class:"label"},Ie={class:"value"},xe={class:"keep-Button"},we={class:"Input-Collection-item"},fe={class:"label"},ve={class:"value"},ye={class:"Input-Collection"},Ve={class:"label"},he={class:"value"},ge={class:"keep-Button"},Ce=K(T({name:"TcpInstructionConfiguration",__name:"index",setup(I){const c=W(),f=(a,e,o=!1)=>{if(a==="")return e.cmdIndex="",void(e.lastValidValue="");if(/^(0x)?[0-9a-fA-F]+$/.test(a)){const m=a.startsWith("0x")?a.substring(2):a,u=parseInt(m,16);if(!isNaN(u)&&u>0&&u<=255){const g=u.toString(16).toUpperCase();e.cmdIndex=g,e.lastValidValue=g}else E.warning("\u8BF7\u8F93\u51651\u5230FF\u4E4B\u95F4\u768416\u8FDB\u5236\u6570\u503C"),G(()=>{e.cmdIndex=o?"":e.lastValidValue||""})}else E.warning("\u8BF7\u8F93\u5165\u6709\u6548\u768416\u8FDB\u5236\u6570\u5B57 (0-9, A-F)"),G(()=>{e.cmdIndex=o?"":e.lastValidValue||""})},v=L(),U=async()=>{const a=await ee();v.value=a.map(e=>({...e,cmdIndex:w(e.cmdIndex),lastValidValue:w(e.cmdIndex)||""}))},A=async()=>{try{if(b(v.value,"cmdIndex"))return void c.error("\u573A\u666F\u96C6\u5408\u6307\u4EE4\u4E0D\u80FD\u5B58\u5728\u91CD\u590D");if(v.value.some(e=>e.cmdIndex==""||e.cmdIndex==0))return void c.error("\u573A\u666F\u96C6\u5408\u6307\u4EE4\u4E0D\u80FD\u5B58\u5728\u7A7A\u6216\u4E3A0\u6307\u4EE4");const a=v.value.map(e=>({...e,cmdIndex:parseInt(e.cmdIndex,16)}));await ae(a),U(),c.success("\u4FDD\u5B58\u6210\u529F")}catch{}},y=L(),F=async()=>{const a=await P();y.value=a.map(e=>({...e,cmdIndex:w(e.cmdIndex),lastValidValue:w(e.cmdIndex)||""}))},M=async()=>{try{if(b(y.value,"cmdIndex"))return void c.error("\u573A\u666F\u6307\u4EE4\u4E0D\u80FD\u5B58\u5728\u91CD\u590D");if(y.value.some(e=>e.cmdIndex==""||e.cmdIndex==0))return void c.error("\u573A\u666F\u6307\u4EE4\u4E0D\u80FD\u5B58\u5728\u7A7A\u6216\u4E3A0\u6307\u4EE4");const a=y.value.map(e=>({...e,cmdIndex:parseInt(e.cmdIndex,16)}));await Q(a),F(),c.success("\u4FDD\u5B58\u6210\u529F")}catch{}},V=L(),$=async()=>{const a=await X();V.value=a.map(e=>({...e,cmdIndex:w(e.cmdIndex),lastValidValue:w(e.cmdIndex)||""}))},j=async()=>{try{if(b(V.value,"cmdIndex"))return void c.error("\u5C4F\u5E55\u6307\u4EE4\u4E0D\u80FD\u5B58\u5728\u91CD\u590D");if(V.value.some(e=>e.cmdIndex==""||e.cmdIndex==0))return void c.error("\u5C4F\u5E55\u6307\u4EE4\u4E0D\u80FD\u5B58\u5728\u7A7A\u6216\u4E3A0\u6307\u4EE4");const a=V.value.map(e=>({...e,cmdIndex:parseInt(e.cmdIndex,16)}));await Z(a),$(),c.success("\u4FDD\u5B58\u6210\u529F")}catch{}},h=L(),B=async()=>{const a=await de();h.value=a.map(e=>({...e,cmdIndex:w(e.cmdIndex),lastValidValue:w(e.cmdIndex)||""}))},H=async()=>{if(b(h.value,"cmdIndex"))c.error("\u8F93\u5165\u6E90\u6307\u4EE4\u4E0D\u80FD\u5B58\u5728\u91CD\u590D");else try{for(const e of h.value){if(!e.cmdIndex||e.cmdIndex==0)throw c.error(`${e.showName}\u6307\u4EE4\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E3A0`),new Error("\u5B58\u5728\u7A7A\u6307\u4EE4");for(const o of e.subList)if(!o.cmdIndex||o.cmdIndex==0)throw c.error(`${e.showName}\u4E0B${o.showName}\u6EE4\u955C\u6307\u4EE4\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E3A0`),new Error("\u5B58\u5728\u91CD\u590D\u6307\u4EE4");if(b(e.subList,"cmdIndex"))throw c.error(`${e.showName}\u4E0B\u6EE4\u955C\u6307\u4EE4\u4E0D\u80FD\u5B58\u5728\u91CD\u590D`),new Error("\u5B58\u5728\u91CD\u590D\u6307\u4EE4")}const a=h.value.map(e=>{const o=e.subList.map(m=>({...m,cmdIndex:parseInt(m.cmdIndex,16)}));return{...e,cmdIndex:parseInt(e.cmdIndex,16),subList:o}});await ne(a),B(),c.success("\u4FDD\u5B58\u6210\u529F")}catch{}};return Y(async()=>{U(),F(),$(),B()}),(a,e)=>{const o=q,m=z,u=O,g=J,R=D;return r(),i(C,null,[l(u,null,{default:s(()=>[e[2]||(e[2]=n("h3",null,"\u5C4F\u5E55",-1)),n("div",te,[(r(!0),i(C,null,k(N(V),d=>(r(),i("div",{key:d.name,class:"Scene-Collection-item"},[n("p",le,_(d.showName),1),n("p",se,[l(o,{modelValue:d.cmdIndex,"onUpdate:modelValue":t=>d.cmdIndex=t,style:{width:"150px"},onInput:t=>f(t,d)},{prepend:s(()=>e[0]||(e[0]=[p("0x")])),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])])]))),128))]),n("div",ce,[l(m,{type:"primary",onClick:j},{default:s(()=>e[1]||(e[1]=[p("\u4FDD\u5B58")])),_:1})])]),_:1}),l(u,null,{default:s(()=>[e[5]||(e[5]=n("h3",null,"\u573A\u666F\u96C6\u5408",-1)),n("div",oe,[(r(!0),i(C,null,k(N(v),d=>(r(),i("div",{key:d.name,class:"Scene-Collection-item"},[n("p",me,_(d.showName),1),n("p",ue,[l(o,{modelValue:d.cmdIndex,"onUpdate:modelValue":t=>d.cmdIndex=t,style:{width:"150px"},onInput:t=>f(t,d)},{prepend:s(()=>e[3]||(e[3]=[p("0x")])),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])])]))),128))]),n("div",ie,[l(m,{type:"primary",onClick:A},{default:s(()=>e[4]||(e[4]=[p("\u4FDD\u5B58")])),_:1})])]),_:1}),l(u,null,{default:s(()=>[e[8]||(e[8]=n("h3",null,"\u573A\u666F",-1)),n("div",re,[(r(!0),i(C,null,k(N(y),d=>(r(),i("div",{key:d.name,class:"Scene-Collection-item"},[n("p",pe,_(d.showName),1),n("p",Ie,[l(o,{modelValue:d.cmdIndex,"onUpdate:modelValue":t=>d.cmdIndex=t,style:{width:"150px"},onInput:t=>f(t,d)},{prepend:s(()=>e[6]||(e[6]=[p("0x")])),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])])]))),128))]),n("div",xe,[l(m,{type:"primary",onClick:M},{default:s(()=>e[7]||(e[7]=[p("\u4FDD\u5B58")])),_:1})])]),_:1}),l(u,null,{default:s(()=>[e[12]||(e[12]=n("h3",null,"\u8F93\u5165\u6E90",-1)),l(R,{data:N(h),style:{width:"100%"}},{default:s(()=>[l(g,{prop:"showName",label:"\u8F93\u5165\u6E90",width:"400",align:"center"},{default:s(d=>[n("div",we,[n("p",fe,_(d.row.showName),1),n("p",ve,[l(o,{modelValue:d.row.cmdIndex,"onUpdate:modelValue":t=>d.row.cmdIndex=t,style:{width:"150px"},onInput:t=>f(t,d.row)},{prepend:s(()=>e[9]||(e[9]=[p("0x")])),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])])])]),_:1}),l(g,{label:"\u6EE4\u955C",align:"center"},{default:s(d=>[n("div",ye,[(r(!0),i(C,null,k(d.row.subList,t=>(r(),i("div",{class:"Input-Collection-item",key:t.name},[n("p",Ve,_(t.showName),1),n("p",he,[l(o,{modelValue:t.cmdIndex,"onUpdate:modelValue":S=>t.cmdIndex=S,style:{width:"150px"},onInput:S=>f(S,t)},{prepend:s(()=>e[10]||(e[10]=[p("0x")])),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])])]))),128))])]),_:1})]),_:1},8,["data"]),n("div",ge,[l(m,{type:"primary",onClick:H},{default:s(()=>e[11]||(e[11]=[p("\u4FDD\u5B58")])),_:1})])]),_:1})],64)}}}),[["__scopeId","data-v-d26d0f72"]]);export{Ce as default};

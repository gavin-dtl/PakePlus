var Cs=Object.defineProperty;var Rs=(l,h,n)=>h in l?Cs(l,h,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[h]=n;var Nt=(l,h,n)=>(Rs(l,typeof h!="symbol"?h+"":h,n),n),Pr=(l,h,n)=>{if(!h.has(l))throw TypeError("Cannot "+n)};var T=(l,h,n)=>(Pr(l,h,"read from private field"),n?n.call(l):h.get(l)),Rt=(l,h,n)=>{if(h.has(l))throw TypeError("Cannot add the same private member more than once");h instanceof WeakSet?h.add(l):h.set(l,n)},Tt=(l,h,n,o)=>(Pr(l,h,"write to private field"),o?o.call(l,n):h.set(l,n),n);var ur=(l,h,n,o)=>({set _(s){Tt(l,h,s,n)},get _(){return T(l,h,o)}}),It=(l,h,n)=>(Pr(l,h,"access private method"),n);import{e as Ps}from"./index-DzCoMBOl.js";var Br=Object.defineProperty,Bs=Object.getOwnPropertyDescriptor,xs=Object.getOwnPropertyNames,Ms=Object.prototype.hasOwnProperty,re=(l,h)=>()=>(l&&(h=l(l=0)),h),ft=(l,h)=>()=>(h||l((h={exports:{}}).exports,h),h.exports),Ge=(l,h)=>{for(var n in h)Br(l,n,{get:h[n],enumerable:!0})},Lt=l=>((h,n,o,s)=>{if(n&&typeof n=="object"||typeof n=="function")for(let t of xs(n))!Ms.call(h,t)&&t!==o&&Br(h,t,{get:()=>n[t],enumerable:!(s=Bs(n,t))||s.enumerable});return h})(Br({},"__esModule",{value:!0}),l),ot=re(()=>{}),Ft={};function xr(l){throw new Error("Node.js process "+l+" is not supported by JSPM core outside of Node.js")}function js(){!Me||!je||(Me=!1,je.length?de=je.concat(de):er=-1,de.length&&un())}function un(){if(!Me){var l=setTimeout(js,0);Me=!0;for(var h=de.length;h;){for(je=de,de=[];++er<h;)je&&je[er].run();er=-1,h=de.length}je=null,Me=!1,clearTimeout(l)}}function hn(l){var h=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)h[n-1]=arguments[n];de.push(new cn(l,h)),de.length===1&&!Me&&setTimeout(un,0)}function cn(l,h){this.fun=l,this.array=h}function ee(){}function fn(l){xr("_linkedBinding")}function dn(l){xr("dlopen")}function pn(){return[]}function gn(){return[]}function bn(l,h){if(!l)throw new Error(h||"assertion error")}function mn(){return!1}function yn(){return ke.now()/1e3}function hr(l){var h=Math.floor(.001*(Date.now()-ke.now())),n=.001*ke.now(),o=Math.floor(n)+h,s=Math.floor(n%1*1e9);return l&&(o-=l[0],(s-=l[1])<0&&(o--,s+=fr)),[o,s]}function ge(){return Ti}function wn(l){return[]}Ge(Ft,{_debugEnd:()=>fi,_debugProcess:()=>ci,_events:()=>vn,_eventsCount:()=>En,_exiting:()=>Jr,_fatalExceptions:()=>li,_getActiveHandles:()=>gn,_getActiveRequests:()=>pn,_kill:()=>ti,_linkedBinding:()=>fn,_maxListeners:()=>_n,_preload_modules:()=>Ai,_rawDebug:()=>Gr,_startProfilerIdleNotifier:()=>di,_stopProfilerIdleNotifier:()=>pi,_tickCallback:()=>hi,abort:()=>yi,addListener:()=>Sn,allowedNodeEnvironmentFlags:()=>si,arch:()=>jr,argv:()=>Lr,argv0:()=>Si,assert:()=>bn,binding:()=>qr,chdir:()=>zr,config:()=>Xr,cpuUsage:()=>cr,cwd:()=>Vr,debugPort:()=>Ei,default:()=>Ti,dlopen:()=>dn,domain:()=>Yr,emit:()=>On,emitWarning:()=>$r,env:()=>Ur,execArgv:()=>Dr,execPath:()=>vi,exit:()=>ni,features:()=>ai,hasUncaughtExceptionCaptureCallback:()=>mn,hrtime:()=>hr,kill:()=>ii,listeners:()=>wn,memoryUsage:()=>ri,moduleLoadList:()=>Qr,nextTick:()=>hn,off:()=>In,on:()=>ge,once:()=>An,openStdin:()=>oi,pid:()=>wi,platform:()=>Nr,ppid:()=>_i,prependListener:()=>Cn,prependOnceListener:()=>Rn,reallyExit:()=>Zr,release:()=>Kr,removeAllListeners:()=>Tn,removeListener:()=>kn,resourceUsage:()=>ei,setSourceMapsEnabled:()=>Ii,setUncaughtExceptionCaptureCallback:()=>ui,stderr:()=>bi,stdin:()=>mi,stdout:()=>gi,title:()=>Mr,umask:()=>Hr,uptime:()=>yn,version:()=>Fr,versions:()=>Wr});var de,Me,je,er,Mr,jr,Nr,Ur,Lr,Dr,Fr,Wr,$r,qr,Hr,Vr,zr,Kr,Gr,Qr,Yr,Jr,Xr,Zr,ti,cr,ei,ri,ii,ni,oi,si,ai,li,ui,hi,ci,fi,di,pi,gi,bi,mi,yi,wi,_i,vi,Ei,Si,Ai,Ii,ke,ki,fr,_n,vn,En,Sn,An,In,kn,Tn,On,Cn,Rn,Ti,Ns=re(()=>{ot(),at(),st(),de=[],Me=!1,er=-1,cn.prototype.run=function(){this.fun.apply(null,this.array)},Mr="browser",jr="x64",Nr="browser",Ur={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Lr=["/usr/bin/node"],Dr=[],Fr="v16.8.0",Wr={},$r=function(l,h){},qr=function(l){xr("binding")},Hr=function(l){return 0},Vr=function(){return"/"},zr=function(l){},Kr={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Gr=ee,Qr=[],Yr={},Jr=!1,Xr={},Zr=ee,ti=ee,ei=cr=function(){return{}},ri=cr,ii=ee,ni=ee,oi=ee,si={},ai={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},li=ee,ui=ee,hi=ee,ci=ee,fi=ee,di=ee,pi=ee,gi=void 0,bi=void 0,mi=void 0,yi=ee,wi=2,_i=1,vi="/bin/usr/node",Ei=9229,Si="node",Ai=[],Ii=ee,(ke={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0}).now===void 0&&(ki=Date.now(),ke.timing&&ke.timing.navigationStart&&(ki=ke.timing.navigationStart),ke.now=()=>Date.now()-ki),fr=1e9,hr.bigint=function(l){var h=hr(l);return typeof BigInt>"u"?h[0]*fr+h[1]:BigInt(h[0]*fr)+BigInt(h[1])},Ti={version:Fr,versions:Wr,arch:jr,platform:Nr,release:Kr,_rawDebug:Gr,moduleLoadList:Qr,binding:qr,_linkedBinding:fn,_events:vn={},_eventsCount:En=0,_maxListeners:_n=10,on:ge,addListener:Sn=ge,once:An=ge,off:In=ge,removeListener:kn=ge,removeAllListeners:Tn=ge,emit:On=ee,prependListener:Cn=ge,prependOnceListener:Rn=ge,listeners:wn,domain:Yr,_exiting:Jr,config:Xr,dlopen:dn,uptime:yn,_getActiveRequests:pn,_getActiveHandles:gn,reallyExit:Zr,_kill:ti,cpuUsage:cr,resourceUsage:ei,memoryUsage:ri,kill:ii,exit:ni,openStdin:oi,allowedNodeEnvironmentFlags:si,assert:bn,features:ai,_fatalExceptions:li,setUncaughtExceptionCaptureCallback:ui,hasUncaughtExceptionCaptureCallback:mn,emitWarning:$r,nextTick:hn,_tickCallback:hi,_debugProcess:ci,_debugEnd:fi,_startProfilerIdleNotifier:di,_stopProfilerIdleNotifier:pi,stdout:gi,stdin:mi,stderr:bi,abort:yi,umask:Hr,chdir:zr,cwd:Vr,env:Ur,title:Mr,argv:Lr,execArgv:Dr,pid:wi,ppid:_i,execPath:vi,debugPort:Ei,hrtime:hr,argv0:Si,_preload_modules:Ai,setSourceMapsEnabled:Ii}}),st=re(()=>{Ns()}),Xt={};function Us(){if(Ri)return Te;Ri=!0;let l=function(){if(Oi)return Qe;Oi=!0,Qe.byteLength=function(pt){var ht=P(pt),bt=ht[0],Et=ht[1];return 3*(bt+Et)/4-Et},Qe.toByteArray=function(pt){var ht,bt,Et=P(pt),jt=Et[0],Pt=Et[1],S=new m(function(wt,Mt,At){return 3*(Mt+At)/4-At}(0,jt,Pt)),I=0,vt=Pt>0?jt-4:jt;for(bt=0;bt<vt;bt+=4)ht=f[pt.charCodeAt(bt)]<<18|f[pt.charCodeAt(bt+1)]<<12|f[pt.charCodeAt(bt+2)]<<6|f[pt.charCodeAt(bt+3)],S[I++]=ht>>16&255,S[I++]=ht>>8&255,S[I++]=255&ht;return Pt===2&&(ht=f[pt.charCodeAt(bt)]<<2|f[pt.charCodeAt(bt+1)]>>4,S[I++]=255&ht),Pt===1&&(ht=f[pt.charCodeAt(bt)]<<10|f[pt.charCodeAt(bt+1)]<<4|f[pt.charCodeAt(bt+2)]>>2,S[I++]=ht>>8&255,S[I++]=255&ht),S},Qe.fromByteArray=function(pt){for(var ht,bt=pt.length,Et=bt%3,jt=[],Pt=16383,S=0,I=bt-Et;S<I;S+=Pt)jt.push(mt(pt,S,S+Pt>I?I:S+Pt));return Et===1?(ht=pt[bt-1],jt.push(u[ht>>2]+u[ht<<4&63]+"==")):Et===2&&(ht=(pt[bt-2]<<8)+pt[bt-1],jt.push(u[ht>>10]+u[ht>>4&63]+u[ht<<2&63]+"=")),jt.join("")};for(var u=[],f=[],m=typeof Uint8Array<"u"?Uint8Array:Array,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=0;B<64;++B)u[B]=k[B],f[k.charCodeAt(B)]=B;function P(pt){var ht=pt.length;if(ht%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var bt=pt.indexOf("=");return bt===-1&&(bt=ht),[bt,bt===ht?0:4-bt%4]}function H(pt){return u[pt>>18&63]+u[pt>>12&63]+u[pt>>6&63]+u[63&pt]}function mt(pt,ht,bt){for(var Et,jt=[],Pt=ht;Pt<bt;Pt+=3)Et=(pt[Pt]<<16&16711680)+(pt[Pt+1]<<8&65280)+(255&pt[Pt+2]),jt.push(H(Et));return jt.join("")}return f[45]=62,f[95]=63,Qe}(),h=(Ci||(Ci=!0,dr.read=function(u,f,m,k,B){var P,H,mt=8*B-k-1,pt=(1<<mt)-1,ht=pt>>1,bt=-7,Et=m?B-1:0,jt=m?-1:1,Pt=u[f+Et];for(Et+=jt,P=Pt&(1<<-bt)-1,Pt>>=-bt,bt+=mt;bt>0;P=256*P+u[f+Et],Et+=jt,bt-=8);for(H=P&(1<<-bt)-1,P>>=-bt,bt+=k;bt>0;H=256*H+u[f+Et],Et+=jt,bt-=8);if(P===0)P=1-ht;else{if(P===pt)return H?NaN:1/0*(Pt?-1:1);H+=Math.pow(2,k),P-=ht}return(Pt?-1:1)*H*Math.pow(2,P-k)},dr.write=function(u,f,m,k,B,P){var H,mt,pt,ht=8*P-B-1,bt=(1<<ht)-1,Et=bt>>1,jt=B===23?Math.pow(2,-24)-Math.pow(2,-77):0,Pt=k?0:P-1,S=k?1:-1,I=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(mt=isNaN(f)?1:0,H=bt):(H=Math.floor(Math.log(f)/Math.LN2),f*(pt=Math.pow(2,-H))<1&&(H--,pt*=2),(f+=H+Et>=1?jt/pt:jt*Math.pow(2,1-Et))*pt>=2&&(H++,pt/=2),H+Et>=bt?(mt=0,H=bt):H+Et>=1?(mt=(f*pt-1)*Math.pow(2,B),H+=Et):(mt=f*Math.pow(2,Et-1)*Math.pow(2,B),H=0));B>=8;u[m+Pt]=255&mt,Pt+=S,mt/=256,B-=8);for(H=H<<B|mt,ht+=B;ht>0;u[m+Pt]=255&H,Pt+=S,H/=256,ht-=8);u[m+Pt-S]|=128*I}),dr),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Te.Buffer=t,Te.SlowBuffer=function(u){return+u!=u&&(u=0),t.alloc(+u)},Te.INSPECT_MAX_BYTES=50;let o=2147483647;function s(u){if(u>o)throw new RangeError('The value "'+u+'" is invalid for option "size"');let f=new Uint8Array(u);return Object.setPrototypeOf(f,t.prototype),f}function t(u,f,m){if(typeof u=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return i(u)}return r(u,f,m)}function r(u,f,m){if(typeof u=="string")return function(P,H){if((typeof H!="string"||H==="")&&(H="utf8"),!t.isEncoding(H))throw new TypeError("Unknown encoding: "+H);let mt=0|d(P,H),pt=s(mt),ht=pt.write(P,H);return ht!==mt&&(pt=pt.slice(0,ht)),pt}(u,f);if(ArrayBuffer.isView(u))return function(P){if(F(P,Uint8Array)){let H=new Uint8Array(P);return c(H.buffer,H.byteOffset,H.byteLength)}return a(P)}(u);if(u==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u);if(F(u,ArrayBuffer)||u&&F(u.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(F(u,SharedArrayBuffer)||u&&F(u.buffer,SharedArrayBuffer)))return c(u,f,m);if(typeof u=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let k=u.valueOf&&u.valueOf();if(k!=null&&k!==u)return t.from(k,f,m);let B=function(P){if(t.isBuffer(P)){let H=0|g(P.length),mt=s(H);return mt.length===0||P.copy(mt,0,0,H),mt}if(P.length!==void 0)return typeof P.length!="number"||dt(P.length)?s(0):a(P);if(P.type==="Buffer"&&Array.isArray(P.data))return a(P.data)}(u);if(B)return B;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof u[Symbol.toPrimitive]=="function")return t.from(u[Symbol.toPrimitive]("string"),f,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u)}function e(u){if(typeof u!="number")throw new TypeError('"size" argument must be of type number');if(u<0)throw new RangeError('The value "'+u+'" is invalid for option "size"')}function i(u){return e(u),s(u<0?0:0|g(u))}function a(u){let f=u.length<0?0:0|g(u.length),m=s(f);for(let k=0;k<f;k+=1)m[k]=255&u[k];return m}function c(u,f,m){if(f<0||u.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(u.byteLength<f+(m||0))throw new RangeError('"length" is outside of buffer bounds');let k;return k=f===void 0&&m===void 0?new Uint8Array(u):m===void 0?new Uint8Array(u,f):new Uint8Array(u,f,m),Object.setPrototypeOf(k,t.prototype),k}function g(u){if(u>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|u}function d(u,f){if(t.isBuffer(u))return u.length;if(ArrayBuffer.isView(u)||F(u,ArrayBuffer))return u.byteLength;if(typeof u!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof u);let m=u.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&m===0)return 0;let B=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return ct(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*m;case"hex":return m>>>1;case"base64":return C(u).length;default:if(B)return k?-1:ct(u).length;f=(""+f).toLowerCase(),B=!0}}function b(u,f,m){let k=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0)<=(f>>>=0))return"";for(u||(u="utf8");;)switch(u){case"hex":return M(this,f,m);case"utf8":case"utf-8":return E(this,f,m);case"ascii":return p(this,f,m);case"latin1":case"binary":return O(this,f,m);case"base64":return lt(this,f,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,f,m);default:if(k)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),k=!0}}function w(u,f,m){let k=u[f];u[f]=u[m],u[m]=k}function y(u,f,m,k,B){if(u.length===0)return-1;if(typeof m=="string"?(k=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),dt(m=+m)&&(m=B?0:u.length-1),m<0&&(m=u.length+m),m>=u.length){if(B)return-1;m=u.length-1}else if(m<0){if(!B)return-1;m=0}if(typeof f=="string"&&(f=t.from(f,k)),t.isBuffer(f))return f.length===0?-1:v(u,f,m,k,B);if(typeof f=="number")return f&=255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(u,f,m):Uint8Array.prototype.lastIndexOf.call(u,f,m):v(u,[f],m,k,B);throw new TypeError("val must be string, number or Buffer")}function v(u,f,m,k,B){let P,H=1,mt=u.length,pt=f.length;if(k!==void 0&&((k=String(k).toLowerCase())==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(u.length<2||f.length<2)return-1;H=2,mt/=2,pt/=2,m/=2}function ht(bt,Et){return H===1?bt[Et]:bt.readUInt16BE(Et*H)}if(B){let bt=-1;for(P=m;P<mt;P++)if(ht(u,P)===ht(f,bt===-1?0:P-bt)){if(bt===-1&&(bt=P),P-bt+1===pt)return bt*H}else bt!==-1&&(P-=P-bt),bt=-1}else for(m+pt>mt&&(m=mt-pt),P=m;P>=0;P--){let bt=!0;for(let Et=0;Et<pt;Et++)if(ht(u,P+Et)!==ht(f,Et)){bt=!1;break}if(bt)return P}return-1}function N(u,f,m,k){m=Number(m)||0;let B=u.length-m;k?(k=Number(k))>B&&(k=B):k=B;let P,H=f.length;for(k>H/2&&(k=H/2),P=0;P<k;++P){let mt=parseInt(f.substr(2*P,2),16);if(dt(mt))return P;u[m+P]=mt}return P}function A(u,f,m,k){return X(ct(f,u.length-m),u,m,k)}function V(u,f,m,k){return X(function(B){let P=[];for(let H=0;H<B.length;++H)P.push(255&B.charCodeAt(H));return P}(f),u,m,k)}function rt(u,f,m,k){return X(C(f),u,m,k)}function z(u,f,m,k){return X(function(B,P){let H,mt,pt,ht=[];for(let bt=0;bt<B.length&&!((P-=2)<0);++bt)H=B.charCodeAt(bt),mt=H>>8,pt=H%256,ht.push(pt),ht.push(mt);return ht}(f,u.length-m),u,m,k)}function lt(u,f,m){return f===0&&m===u.length?l.fromByteArray(u):l.fromByteArray(u.slice(f,m))}function E(u,f,m){m=Math.min(u.length,m);let k=[],B=f;for(;B<m;){let P=u[B],H=null,mt=P>239?4:P>223?3:P>191?2:1;if(B+mt<=m){let pt,ht,bt,Et;switch(mt){case 1:P<128&&(H=P);break;case 2:pt=u[B+1],(192&pt)==128&&(Et=(31&P)<<6|63&pt,Et>127&&(H=Et));break;case 3:pt=u[B+1],ht=u[B+2],(192&pt)==128&&(192&ht)==128&&(Et=(15&P)<<12|(63&pt)<<6|63&ht,Et>2047&&(Et<55296||Et>57343)&&(H=Et));break;case 4:pt=u[B+1],ht=u[B+2],bt=u[B+3],(192&pt)==128&&(192&ht)==128&&(192&bt)==128&&(Et=(15&P)<<18|(63&pt)<<12|(63&ht)<<6|63&bt,Et>65535&&Et<1114112&&(H=Et))}}H===null?(H=65533,mt=1):H>65535&&(H-=65536,k.push(H>>>10&1023|55296),H=56320|1023&H),k.push(H),B+=mt}return function(P){let H=P.length;if(H<=_)return String.fromCharCode.apply(String,P);let mt="",pt=0;for(;pt<H;)mt+=String.fromCharCode.apply(String,P.slice(pt,pt+=_));return mt}(k)}Te.kMaxLength=o,t.TYPED_ARRAY_SUPPORT=function(){try{let u=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(u,f),u.foo()===42}catch{return!1}}(),!t.TYPED_ARRAY_SUPPORT&&typeof console<"u",Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),t.poolSize=8192,t.from=function(u,f,m){return r(u,f,m)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(u,f,m){return function(k,B,P){return e(k),k<=0?s(k):B!==void 0?typeof P=="string"?s(k).fill(B,P):s(k).fill(B):s(k)}(u,f,m)},t.allocUnsafe=function(u){return i(u)},t.allocUnsafeSlow=function(u){return i(u)},t.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==t.prototype},t.compare=function(u,f){if(F(u,Uint8Array)&&(u=t.from(u,u.offset,u.byteLength)),F(f,Uint8Array)&&(f=t.from(f,f.offset,f.byteLength)),!t.isBuffer(u)||!t.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===f)return 0;let m=u.length,k=f.length;for(let B=0,P=Math.min(m,k);B<P;++B)if(u[B]!==f[B]){m=u[B],k=f[B];break}return m<k?-1:k<m?1:0},t.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(u,f){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return t.alloc(0);let m;if(f===void 0)for(f=0,m=0;m<u.length;++m)f+=u[m].length;let k=t.allocUnsafe(f),B=0;for(m=0;m<u.length;++m){let P=u[m];if(F(P,Uint8Array))B+P.length>k.length?(t.isBuffer(P)||(P=t.from(P)),P.copy(k,B)):Uint8Array.prototype.set.call(k,P,B);else{if(!t.isBuffer(P))throw new TypeError('"list" argument must be an Array of Buffers');P.copy(k,B)}B+=P.length}return k},t.byteLength=d,t.prototype._isBuffer=!0,t.prototype.swap16=function(){let u=this.length;if(u%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<u;f+=2)w(this,f,f+1);return this},t.prototype.swap32=function(){let u=this.length;if(u%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<u;f+=4)w(this,f,f+3),w(this,f+1,f+2);return this},t.prototype.swap64=function(){let u=this.length;if(u%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<u;f+=8)w(this,f,f+7),w(this,f+1,f+6),w(this,f+2,f+5),w(this,f+3,f+4);return this},t.prototype.toString=function(){let u=this.length;return u===0?"":arguments.length===0?E(this,0,u):b.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(u){if(!t.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u||t.compare(this,u)===0},t.prototype.inspect=function(){let u="",f=Te.INSPECT_MAX_BYTES;return u=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(u+=" ... "),"<Buffer "+u+">"},n&&(t.prototype[n]=t.prototype.inspect),t.prototype.compare=function(u,f,m,k,B){if(F(u,Uint8Array)&&(u=t.from(u,u.offset,u.byteLength)),!t.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(f===void 0&&(f=0),m===void 0&&(m=u?u.length:0),k===void 0&&(k=0),B===void 0&&(B=this.length),f<0||m>u.length||k<0||B>this.length)throw new RangeError("out of range index");if(k>=B&&f>=m)return 0;if(k>=B)return-1;if(f>=m)return 1;if(this===u)return 0;let P=(B>>>=0)-(k>>>=0),H=(m>>>=0)-(f>>>=0),mt=Math.min(P,H),pt=this.slice(k,B),ht=u.slice(f,m);for(let bt=0;bt<mt;++bt)if(pt[bt]!==ht[bt]){P=pt[bt],H=ht[bt];break}return P<H?-1:H<P?1:0},t.prototype.includes=function(u,f,m){return this.indexOf(u,f,m)!==-1},t.prototype.indexOf=function(u,f,m){return y(this,u,f,m,!0)},t.prototype.lastIndexOf=function(u,f,m){return y(this,u,f,m,!1)},t.prototype.write=function(u,f,m,k){if(f===void 0)k="utf8",m=this.length,f=0;else if(m===void 0&&typeof f=="string")k=f,m=this.length,f=0;else{if(!isFinite(f))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");f>>>=0,isFinite(m)?(m>>>=0,k===void 0&&(k="utf8")):(k=m,m=void 0)}let B=this.length-f;if((m===void 0||m>B)&&(m=B),u.length>0&&(m<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");k||(k="utf8");let P=!1;for(;;)switch(k){case"hex":return N(this,u,f,m);case"utf8":case"utf-8":return A(this,u,f,m);case"ascii":case"latin1":case"binary":return V(this,u,f,m);case"base64":return rt(this,u,f,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,u,f,m);default:if(P)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase(),P=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};let _=4096;function p(u,f,m){let k="";m=Math.min(u.length,m);for(let B=f;B<m;++B)k+=String.fromCharCode(127&u[B]);return k}function O(u,f,m){let k="";m=Math.min(u.length,m);for(let B=f;B<m;++B)k+=String.fromCharCode(u[B]);return k}function M(u,f,m){let k=u.length;(!f||f<0)&&(f=0),(!m||m<0||m>k)&&(m=k);let B="";for(let P=f;P<m;++P)B+=kt[u[P]];return B}function K(u,f,m){let k=u.slice(f,m),B="";for(let P=0;P<k.length-1;P+=2)B+=String.fromCharCode(k[P]+256*k[P+1]);return B}function J(u,f,m){if(u%1!=0||u<0)throw new RangeError("offset is not uint");if(u+f>m)throw new RangeError("Trying to access beyond buffer length")}function G(u,f,m,k,B,P){if(!t.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>B||f<P)throw new RangeError('"value" argument is out of bounds');if(m+k>u.length)throw new RangeError("Index out of range")}function $(u,f,m,k,B){Y(f,k,B,u,m,7);let P=Number(f&BigInt(4294967295));u[m++]=P,P>>=8,u[m++]=P,P>>=8,u[m++]=P,P>>=8,u[m++]=P;let H=Number(f>>BigInt(32)&BigInt(4294967295));return u[m++]=H,H>>=8,u[m++]=H,H>>=8,u[m++]=H,H>>=8,u[m++]=H,m}function et(u,f,m,k,B){Y(f,k,B,u,m,7);let P=Number(f&BigInt(4294967295));u[m+7]=P,P>>=8,u[m+6]=P,P>>=8,u[m+5]=P,P>>=8,u[m+4]=P;let H=Number(f>>BigInt(32)&BigInt(4294967295));return u[m+3]=H,H>>=8,u[m+2]=H,H>>=8,u[m+1]=H,H>>=8,u[m]=H,m+8}function L(u,f,m,k,B,P){if(m+k>u.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function it(u,f,m,k,B){return f=+f,m>>>=0,B||L(u,0,m,4),h.write(u,f,m,k,23,4),m+4}function x(u,f,m,k,B){return f=+f,m>>>=0,B||L(u,0,m,8),h.write(u,f,m,k,52,8),m+8}t.prototype.slice=function(u,f){let m=this.length;(u=~~u)<0?(u+=m)<0&&(u=0):u>m&&(u=m),(f=f===void 0?m:~~f)<0?(f+=m)<0&&(f=0):f>m&&(f=m),f<u&&(f=u);let k=this.subarray(u,f);return Object.setPrototypeOf(k,t.prototype),k},t.prototype.readUintLE=t.prototype.readUIntLE=function(u,f,m){u>>>=0,f>>>=0,m||J(u,f,this.length);let k=this[u],B=1,P=0;for(;++P<f&&(B*=256);)k+=this[u+P]*B;return k},t.prototype.readUintBE=t.prototype.readUIntBE=function(u,f,m){u>>>=0,f>>>=0,m||J(u,f,this.length);let k=this[u+--f],B=1;for(;f>0&&(B*=256);)k+=this[u+--f]*B;return k},t.prototype.readUint8=t.prototype.readUInt8=function(u,f){return u>>>=0,f||J(u,1,this.length),this[u]},t.prototype.readUint16LE=t.prototype.readUInt16LE=function(u,f){return u>>>=0,f||J(u,2,this.length),this[u]|this[u+1]<<8},t.prototype.readUint16BE=t.prototype.readUInt16BE=function(u,f){return u>>>=0,f||J(u,2,this.length),this[u]<<8|this[u+1]},t.prototype.readUint32LE=t.prototype.readUInt32LE=function(u,f){return u>>>=0,f||J(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+16777216*this[u+3]},t.prototype.readUint32BE=t.prototype.readUInt32BE=function(u,f){return u>>>=0,f||J(u,4,this.length),16777216*this[u]+(this[u+1]<<16|this[u+2]<<8|this[u+3])},t.prototype.readBigUInt64LE=R(function(u){Q(u>>>=0,"offset");let f=this[u],m=this[u+7];(f===void 0||m===void 0)&&nt(u,this.length-8);let k=f+256*this[++u]+65536*this[++u]+this[++u]*2**24,B=this[++u]+256*this[++u]+65536*this[++u]+m*2**24;return BigInt(k)+(BigInt(B)<<BigInt(32))}),t.prototype.readBigUInt64BE=R(function(u){Q(u>>>=0,"offset");let f=this[u],m=this[u+7];(f===void 0||m===void 0)&&nt(u,this.length-8);let k=f*2**24+65536*this[++u]+256*this[++u]+this[++u],B=this[++u]*2**24+65536*this[++u]+256*this[++u]+m;return(BigInt(k)<<BigInt(32))+BigInt(B)}),t.prototype.readIntLE=function(u,f,m){u>>>=0,f>>>=0,m||J(u,f,this.length);let k=this[u],B=1,P=0;for(;++P<f&&(B*=256);)k+=this[u+P]*B;return B*=128,k>=B&&(k-=Math.pow(2,8*f)),k},t.prototype.readIntBE=function(u,f,m){u>>>=0,f>>>=0,m||J(u,f,this.length);let k=f,B=1,P=this[u+--k];for(;k>0&&(B*=256);)P+=this[u+--k]*B;return B*=128,P>=B&&(P-=Math.pow(2,8*f)),P},t.prototype.readInt8=function(u,f){return u>>>=0,f||J(u,1,this.length),128&this[u]?-1*(255-this[u]+1):this[u]},t.prototype.readInt16LE=function(u,f){u>>>=0,f||J(u,2,this.length);let m=this[u]|this[u+1]<<8;return 32768&m?4294901760|m:m},t.prototype.readInt16BE=function(u,f){u>>>=0,f||J(u,2,this.length);let m=this[u+1]|this[u]<<8;return 32768&m?4294901760|m:m},t.prototype.readInt32LE=function(u,f){return u>>>=0,f||J(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},t.prototype.readInt32BE=function(u,f){return u>>>=0,f||J(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},t.prototype.readBigInt64LE=R(function(u){Q(u>>>=0,"offset");let f=this[u],m=this[u+7];(f===void 0||m===void 0)&&nt(u,this.length-8);let k=this[u+4]+256*this[u+5]+65536*this[u+6]+(m<<24);return(BigInt(k)<<BigInt(32))+BigInt(f+256*this[++u]+65536*this[++u]+this[++u]*2**24)}),t.prototype.readBigInt64BE=R(function(u){Q(u>>>=0,"offset");let f=this[u],m=this[u+7];(f===void 0||m===void 0)&&nt(u,this.length-8);let k=(f<<24)+65536*this[++u]+256*this[++u]+this[++u];return(BigInt(k)<<BigInt(32))+BigInt(this[++u]*2**24+65536*this[++u]+256*this[++u]+m)}),t.prototype.readFloatLE=function(u,f){return u>>>=0,f||J(u,4,this.length),h.read(this,u,!0,23,4)},t.prototype.readFloatBE=function(u,f){return u>>>=0,f||J(u,4,this.length),h.read(this,u,!1,23,4)},t.prototype.readDoubleLE=function(u,f){return u>>>=0,f||J(u,8,this.length),h.read(this,u,!0,52,8)},t.prototype.readDoubleBE=function(u,f){return u>>>=0,f||J(u,8,this.length),h.read(this,u,!1,52,8)},t.prototype.writeUintLE=t.prototype.writeUIntLE=function(u,f,m,k){u=+u,f>>>=0,m>>>=0,!k&&G(this,u,f,m,Math.pow(2,8*m)-1,0);let B=1,P=0;for(this[f]=255&u;++P<m&&(B*=256);)this[f+P]=u/B&255;return f+m},t.prototype.writeUintBE=t.prototype.writeUIntBE=function(u,f,m,k){u=+u,f>>>=0,m>>>=0,!k&&G(this,u,f,m,Math.pow(2,8*m)-1,0);let B=m-1,P=1;for(this[f+B]=255&u;--B>=0&&(P*=256);)this[f+B]=u/P&255;return f+m},t.prototype.writeUint8=t.prototype.writeUInt8=function(u,f,m){return u=+u,f>>>=0,m||G(this,u,f,1,255,0),this[f]=255&u,f+1},t.prototype.writeUint16LE=t.prototype.writeUInt16LE=function(u,f,m){return u=+u,f>>>=0,m||G(this,u,f,2,65535,0),this[f]=255&u,this[f+1]=u>>>8,f+2},t.prototype.writeUint16BE=t.prototype.writeUInt16BE=function(u,f,m){return u=+u,f>>>=0,m||G(this,u,f,2,65535,0),this[f]=u>>>8,this[f+1]=255&u,f+2},t.prototype.writeUint32LE=t.prototype.writeUInt32LE=function(u,f,m){return u=+u,f>>>=0,m||G(this,u,f,4,4294967295,0),this[f+3]=u>>>24,this[f+2]=u>>>16,this[f+1]=u>>>8,this[f]=255&u,f+4},t.prototype.writeUint32BE=t.prototype.writeUInt32BE=function(u,f,m){return u=+u,f>>>=0,m||G(this,u,f,4,4294967295,0),this[f]=u>>>24,this[f+1]=u>>>16,this[f+2]=u>>>8,this[f+3]=255&u,f+4},t.prototype.writeBigUInt64LE=R(function(u,f=0){return $(this,u,f,BigInt(0),BigInt("0xffffffffffffffff"))}),t.prototype.writeBigUInt64BE=R(function(u,f=0){return et(this,u,f,BigInt(0),BigInt("0xffffffffffffffff"))}),t.prototype.writeIntLE=function(u,f,m,k){if(u=+u,f>>>=0,!k){let mt=Math.pow(2,8*m-1);G(this,u,f,m,mt-1,-mt)}let B=0,P=1,H=0;for(this[f]=255&u;++B<m&&(P*=256);)u<0&&H===0&&this[f+B-1]!==0&&(H=1),this[f+B]=(u/P|0)-H&255;return f+m},t.prototype.writeIntBE=function(u,f,m,k){if(u=+u,f>>>=0,!k){let mt=Math.pow(2,8*m-1);G(this,u,f,m,mt-1,-mt)}let B=m-1,P=1,H=0;for(this[f+B]=255&u;--B>=0&&(P*=256);)u<0&&H===0&&this[f+B+1]!==0&&(H=1),this[f+B]=(u/P|0)-H&255;return f+m},t.prototype.writeInt8=function(u,f,m){return u=+u,f>>>=0,m||G(this,u,f,1,127,-128),u<0&&(u=255+u+1),this[f]=255&u,f+1},t.prototype.writeInt16LE=function(u,f,m){return u=+u,f>>>=0,m||G(this,u,f,2,32767,-32768),this[f]=255&u,this[f+1]=u>>>8,f+2},t.prototype.writeInt16BE=function(u,f,m){return u=+u,f>>>=0,m||G(this,u,f,2,32767,-32768),this[f]=u>>>8,this[f+1]=255&u,f+2},t.prototype.writeInt32LE=function(u,f,m){return u=+u,f>>>=0,m||G(this,u,f,4,2147483647,-2147483648),this[f]=255&u,this[f+1]=u>>>8,this[f+2]=u>>>16,this[f+3]=u>>>24,f+4},t.prototype.writeInt32BE=function(u,f,m){return u=+u,f>>>=0,m||G(this,u,f,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[f]=u>>>24,this[f+1]=u>>>16,this[f+2]=u>>>8,this[f+3]=255&u,f+4},t.prototype.writeBigInt64LE=R(function(u,f=0){return $(this,u,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),t.prototype.writeBigInt64BE=R(function(u,f=0){return et(this,u,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),t.prototype.writeFloatLE=function(u,f,m){return it(this,u,f,!0,m)},t.prototype.writeFloatBE=function(u,f,m){return it(this,u,f,!1,m)},t.prototype.writeDoubleLE=function(u,f,m){return x(this,u,f,!0,m)},t.prototype.writeDoubleBE=function(u,f,m){return x(this,u,f,!1,m)},t.prototype.copy=function(u,f,m,k){if(!t.isBuffer(u))throw new TypeError("argument should be a Buffer");if(m||(m=0),!k&&k!==0&&(k=this.length),f>=u.length&&(f=u.length),f||(f=0),k>0&&k<m&&(k=m),k===m||u.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length),u.length-f<k-m&&(k=u.length-f+m);let B=k-m;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,m,k):Uint8Array.prototype.set.call(u,this.subarray(m,k),f),B},t.prototype.fill=function(u,f,m,k){if(typeof u=="string"){if(typeof f=="string"?(k=f,f=0,m=this.length):typeof m=="string"&&(k=m,m=this.length),k!==void 0&&typeof k!="string")throw new TypeError("encoding must be a string");if(typeof k=="string"&&!t.isEncoding(k))throw new TypeError("Unknown encoding: "+k);if(u.length===1){let P=u.charCodeAt(0);(k==="utf8"&&P<128||k==="latin1")&&(u=P)}}else typeof u=="number"?u&=255:typeof u=="boolean"&&(u=Number(u));if(f<0||this.length<f||this.length<m)throw new RangeError("Out of range index");if(m<=f)return this;let B;if(f>>>=0,m=m===void 0?this.length:m>>>0,u||(u=0),typeof u=="number")for(B=f;B<m;++B)this[B]=u;else{let P=t.isBuffer(u)?u:t.from(u,k),H=P.length;if(H===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(B=0;B<m-f;++B)this[B+f]=P[B%H]}return this};let j={};function W(u,f,m){j[u]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${u}]`,this.stack,delete this.name}get code(){return u}set code(k){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:k,writable:!0})}toString(){return`${this.name} [${u}]: ${this.message}`}}}function U(u){let f="",m=u.length,k=u[0]==="-"?1:0;for(;m>=k+4;m-=3)f=`_${u.slice(m-3,m)}${f}`;return`${u.slice(0,m)}${f}`}function Y(u,f,m,k,B,P){if(u>m||u<f){let H,mt=typeof f=="bigint"?"n":"";throw H=f===0||f===BigInt(0)?`>= 0${mt} and < 2${mt} ** ${8*(P+1)}${mt}`:`>= -(2${mt} ** ${8*(P+1)-1}${mt}) and < 2 ** ${8*(P+1)-1}${mt}`,new j.ERR_OUT_OF_RANGE("value",H,u)}(function(H,mt,pt){Q(mt,"offset"),(H[mt]===void 0||H[mt+pt]===void 0)&&nt(mt,H.length-(pt+1))})(k,B,P)}function Q(u,f){if(typeof u!="number")throw new j.ERR_INVALID_ARG_TYPE(f,"number",u)}function nt(u,f,m){throw Math.floor(u)!==u?(Q(u,m),new j.ERR_OUT_OF_RANGE("offset","an integer",u)):f<0?new j.ERR_BUFFER_OUT_OF_BOUNDS:new j.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,u)}W("ERR_BUFFER_OUT_OF_BOUNDS",function(u){return u?`${u} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),W("ERR_INVALID_ARG_TYPE",function(u,f){return`The "${u}" argument must be of type number. Received type ${typeof f}`},TypeError),W("ERR_OUT_OF_RANGE",function(u,f,m){let k=`The value of "${u}" is out of range.`,B=m;return Number.isInteger(m)&&Math.abs(m)>2**32?B=U(String(m)):typeof m=="bigint"&&(B=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(B=U(B)),B+="n"),k+=` It must be ${f}. Received ${B}`,k},RangeError);let ut=/[^+/0-9A-Za-z-_]/g;function ct(u,f){f=f||1/0;let m,k=u.length,B=null,P=[];for(let H=0;H<k;++H){if(m=u.charCodeAt(H),m>55295&&m<57344){if(!B){if(m>56319){(f-=3)>-1&&P.push(239,191,189);continue}if(H+1===k){(f-=3)>-1&&P.push(239,191,189);continue}B=m;continue}if(m<56320){(f-=3)>-1&&P.push(239,191,189),B=m;continue}m=65536+(B-55296<<10|m-56320)}else B&&(f-=3)>-1&&P.push(239,191,189);if(B=null,m<128){if((f-=1)<0)break;P.push(m)}else if(m<2048){if((f-=2)<0)break;P.push(m>>6|192,63&m|128)}else if(m<65536){if((f-=3)<0)break;P.push(m>>12|224,m>>6&63|128,63&m|128)}else{if(!(m<1114112))throw new Error("Invalid code point");if((f-=4)<0)break;P.push(m>>18|240,m>>12&63|128,m>>6&63|128,63&m|128)}}return P}function C(u){return l.toByteArray(function(f){if((f=(f=f.split("=")[0]).trim().replace(ut,"")).length<2)return"";for(;f.length%4!=0;)f+="=";return f}(u))}function X(u,f,m,k){let B;for(B=0;B<k&&!(B+m>=f.length||B>=u.length);++B)f[B+m]=u[B];return B}function F(u,f){return u instanceof f||u!=null&&u.constructor!=null&&u.constructor.name!=null&&u.constructor.name===f.name}function dt(u){return u!=u}let kt=function(){let u="0123456789abcdef",f=new Array(256);for(let m=0;m<16;++m){let k=16*m;for(let B=0;B<16;++B)f[k+B]=u[m]+u[B]}return f}();function R(u){return typeof BigInt>"u"?Z:u}function Z(){throw new Error("BigInt not supported")}return Te}Ge(Xt,{Buffer:()=>pr,INSPECT_MAX_BYTES:()=>Pn,default:()=>Oe,kMaxLength:()=>Bn});var Qe,Oi,dr,Ci,Te,Ri,Oe,pr,Pn,Bn,Zt=re(()=>{ot(),at(),st(),Qe={},Oi=!1,dr={},Ci=!1,Te={},Ri=!1,(Oe=Us()).Buffer,Oe.SlowBuffer,Oe.INSPECT_MAX_BYTES,Oe.kMaxLength,pr=Oe.Buffer,Pn=Oe.INSPECT_MAX_BYTES,Bn=Oe.kMaxLength}),at=re(()=>{Zt()}),Ls=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"__esModule",{value:!0}),l.default=class{constructor(h){this.aliasToTopic={},this.max=h}put(h,n){return!(n===0||n>this.max)&&(this.aliasToTopic[n]=h,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(h){return this.aliasToTopic[h]}clear(){this.aliasToTopic={}}}}),Vt=ft((l,h)=>{ot(),at(),st();var n=class extends Error{constructor(o){if(!Array.isArray(o))throw new TypeError("Expected input to be an Array, got "+typeof o);let s="";for(let t=0;t<o.length;t++)s+=`    ${o[t].stack}
`;super(s),this.name="AggregateError",this.errors=o}};h.exports={AggregateError:n,ArrayIsArray:o=>Array.isArray(o),ArrayPrototypeIncludes:(o,s)=>o.includes(s),ArrayPrototypeIndexOf:(o,s)=>o.indexOf(s),ArrayPrototypeJoin:(o,s)=>o.join(s),ArrayPrototypeMap:(o,s)=>o.map(s),ArrayPrototypePop:(o,s)=>o.pop(s),ArrayPrototypePush:(o,s)=>o.push(s),ArrayPrototypeSlice:(o,s,t)=>o.slice(s,t),Error,FunctionPrototypeCall:(o,s,...t)=>o.call(s,...t),FunctionPrototypeSymbolHasInstance:(o,s)=>Function.prototype[Symbol.hasInstance].call(o,s),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(o,s)=>Object.defineProperties(o,s),ObjectDefineProperty:(o,s,t)=>Object.defineProperty(o,s,t),ObjectGetOwnPropertyDescriptor:(o,s)=>Object.getOwnPropertyDescriptor(o,s),ObjectKeys:o=>Object.keys(o),ObjectSetPrototypeOf:(o,s)=>Object.setPrototypeOf(o,s),Promise,PromisePrototypeCatch:(o,s)=>o.catch(s),PromisePrototypeThen:(o,s,t)=>o.then(s,t),PromiseReject:o=>Promise.reject(o),PromiseResolve:o=>Promise.resolve(o),ReflectApply:Reflect.apply,RegExpPrototypeTest:(o,s)=>o.test(s),SafeSet:Set,String,StringPrototypeSlice:(o,s,t)=>o.slice(s,t),StringPrototypeToLowerCase:o=>o.toLowerCase(),StringPrototypeToUpperCase:o=>o.toUpperCase(),StringPrototypeTrim:o=>o.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(o,s,t)=>o.set(s,t),Boolean,Uint8Array}}),xn=ft((l,h)=>{ot(),at(),st(),h.exports={format:(n,...o)=>n.replace(/%([sdifj])/g,function(...[s,t]){let r=o.shift();return t==="f"?r.toFixed(6):t==="j"?JSON.stringify(r):t==="s"&&typeof r=="object"?`${r.constructor!==Object?r.constructor.name:""} {}`.trim():r.toString()}),inspect(n){switch(typeof n){case"string":if(n.includes("'")){if(!n.includes('"'))return`"${n}"`;if(!n.includes("`")&&!n.includes("${"))return`\`${n}\``}return`'${n}'`;case"number":return isNaN(n)?"NaN":Object.is(n,-0)?String(n):n;case"bigint":return`${String(n)}n`;case"boolean":case"undefined":return String(n);case"object":return"{}"}}}}),ie=ft((l,h)=>{ot(),at(),st();var{format:n,inspect:o}=xn(),{AggregateError:s}=Vt(),t=globalThis.AggregateError||s,r=Symbol("kIsNodeError"),e=["string","function","number","object","Function","Object","boolean","bigint","symbol"],i=/^([A-Z][a-z0-9]*)+$/,a={};function c(y,v){if(!y)throw new a.ERR_INTERNAL_ASSERTION(v)}function g(y){let v="",N=y.length,A=y[0]==="-"?1:0;for(;N>=A+4;N-=3)v=`_${y.slice(N-3,N)}${v}`;return`${y.slice(0,N)}${v}`}function d(y,v,N){N||(N=Error);class A extends N{constructor(...rt){super(function(z,lt,E){if(typeof lt=="function")return c(lt.length<=E.length,`Code: ${z}; The provided arguments length (${E.length}) does not match the required ones (${lt.length}).`),lt(...E);let _=(lt.match(/%[dfijoOs]/g)||[]).length;return c(_===E.length,`Code: ${z}; The provided arguments length (${E.length}) does not match the required ones (${_}).`),E.length===0?lt:n(lt,...E)}(y,v,rt))}toString(){return`${this.name} [${y}]: ${this.message}`}}Object.defineProperties(A.prototype,{name:{value:N.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${y}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),A.prototype.code=y,A.prototype[r]=!0,a[y]=A}function b(y){let v="__node_internal_"+y.name;return Object.defineProperty(y,"name",{value:v}),y}var w=class extends Error{constructor(y="The operation was aborted",v=void 0){if(v!==void 0&&typeof v!="object")throw new a.ERR_INVALID_ARG_TYPE("options","Object",v);super(y,v),this.code="ABORT_ERR",this.name="AbortError"}};d("ERR_ASSERTION","%s",Error),d("ERR_INVALID_ARG_TYPE",(y,v,N)=>{c(typeof y=="string","'name' must be a string"),Array.isArray(v)||(v=[v]);let A="The ";y.endsWith(" argument")?A+=`${y} `:A+=`"${y}" ${y.includes(".")?"property":"argument"} `,A+="must be ";let V=[],rt=[],z=[];for(let E of v)c(typeof E=="string","All expected entries have to be of type string"),e.includes(E)?V.push(E.toLowerCase()):i.test(E)?rt.push(E):(c(E!=="object",'The value "object" should be written as "Object"'),z.push(E));if(rt.length>0){let E=V.indexOf("object");E!==-1&&(V.splice(V,E,1),rt.push("Object"))}if(V.length>0){switch(V.length){case 1:A+=`of type ${V[0]}`;break;case 2:A+=`one of type ${V[0]} or ${V[1]}`;break;default:{let E=V.pop();A+=`one of type ${V.join(", ")}, or ${E}`}}(rt.length>0||z.length>0)&&(A+=" or ")}if(rt.length>0){switch(rt.length){case 1:A+=`an instance of ${rt[0]}`;break;case 2:A+=`an instance of ${rt[0]} or ${rt[1]}`;break;default:{let E=rt.pop();A+=`an instance of ${rt.join(", ")}, or ${E}`}}z.length>0&&(A+=" or ")}switch(z.length){case 0:break;case 1:z[0].toLowerCase()!==z[0]&&(A+="an "),A+=`${z[0]}`;break;case 2:A+=`one of ${z[0]} or ${z[1]}`;break;default:{let E=z.pop();A+=`one of ${z.join(", ")}, or ${E}`}}if(N==null)A+=`. Received ${N}`;else if(typeof N=="function"&&N.name)A+=`. Received function ${N.name}`;else if(typeof N=="object"){var lt;(lt=N.constructor)!==null&&lt!==void 0&&lt.name?A+=`. Received an instance of ${N.constructor.name}`:A+=`. Received ${o(N,{depth:-1})}`}else{let E=o(N,{colors:!1});E.length>25&&(E=`${E.slice(0,25)}...`),A+=`. Received type ${typeof N} (${E})`}return A},TypeError),d("ERR_INVALID_ARG_VALUE",(y,v,N="is invalid")=>{let A=o(v);return A.length>128&&(A=A.slice(0,128)+"..."),`The ${y.includes(".")?"property":"argument"} '${y}' ${N}. Received ${A}`},TypeError),d("ERR_INVALID_RETURN_VALUE",(y,v,N)=>{var A;return`Expected ${y} to be returned from the "${v}" function but got ${N!=null&&(A=N.constructor)!==null&&A!==void 0&&A.name?`instance of ${N.constructor.name}`:"type "+typeof N}.`},TypeError),d("ERR_MISSING_ARGS",(...y)=>{c(y.length>0,"At least one arg needs to be specified");let v,N=y.length;switch(y=(Array.isArray(y)?y:[y]).map(A=>`"${A}"`).join(" or "),N){case 1:v+=`The ${y[0]} argument`;break;case 2:v+=`The ${y[0]} and ${y[1]} arguments`;break;default:{let A=y.pop();v+=`The ${y.join(", ")}, and ${A} arguments`}}return`${v} must be specified`},TypeError),d("ERR_OUT_OF_RANGE",(y,v,N)=>{let A;if(c(v,'Missing "range" argument'),Number.isInteger(N)&&Math.abs(N)>2**32)A=g(String(N));else if(typeof N=="bigint"){A=String(N);let V=BigInt(2)**BigInt(32);(N>V||N<-V)&&(A=g(A)),A+="n"}else A=o(N);return`The value of "${y}" is out of range. It must be ${v}. Received ${A}`},RangeError),d("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),d("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),d("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),d("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),d("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),d("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),d("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),d("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),d("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),d("ERR_STREAM_WRITE_AFTER_END","write after end",Error),d("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),h.exports={AbortError:w,aggregateTwoErrors:b(function(y,v){if(y&&v&&y!==v){if(Array.isArray(v.errors))return v.errors.push(y),v;let N=new t([v,y],v.message);return N.code=v.code,N}return y||v}),hideStackFrames:b,codes:a}}),rr=ft((l,h)=>{ot(),at(),st();var{AbortController:n,AbortSignal:o}=typeof self<"u"?self:typeof window<"u"?window:void 0;h.exports=n,h.exports.AbortSignal=o,h.exports.default=n});function Dt(){Dt.init.call(this)}function gr(l){if(typeof l!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof l)}function Mn(l){return l._maxListeners===void 0?Dt.defaultMaxListeners:l._maxListeners}function jn(l,h,n,o){var s,t,r;if(gr(n),(t=l._events)===void 0?(t=l._events=Object.create(null),l._eventsCount=0):(t.newListener!==void 0&&(l.emit("newListener",h,n.listener?n.listener:n),t=l._events),r=t[h]),r===void 0)r=t[h]=n,++l._eventsCount;else if(typeof r=="function"?r=t[h]=o?[n,r]:[r,n]:o?r.unshift(n):r.push(n),(s=Mn(l))>0&&r.length>s&&!r.warned){r.warned=!0;var e=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");e.name="MaxListenersExceededWarning",e.emitter=l,e.type=h,e.count=r.length}return l}function Ds(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Nn(l,h,n){var o={fired:!1,wrapFn:void 0,target:l,type:h,listener:n},s=Ds.bind(o);return s.listener=n,o.wrapFn=s,s}function Un(l,h,n){var o=l._events;if(o===void 0)return[];var s=o[h];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?function(t){for(var r=new Array(t.length),e=0;e<r.length;++e)r[e]=t[e].listener||t[e];return r}(s):Dn(s,s.length)}function Ln(l){var h=this._events;if(h!==void 0){var n=h[l];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}function Dn(l,h){for(var n=new Array(h),o=0;o<h;++o)n[o]=l[o];return n}var Fn,Wn,Ne,Pi,Bi,xi,se,$n=re(()=>{ot(),at(),st(),Ne=typeof Reflect=="object"?Reflect:null,Pi=Ne&&typeof Ne.apply=="function"?Ne.apply:function(l,h,n){return Function.prototype.apply.call(l,h,n)},Wn=Ne&&typeof Ne.ownKeys=="function"?Ne.ownKeys:Object.getOwnPropertySymbols?function(l){return Object.getOwnPropertyNames(l).concat(Object.getOwnPropertySymbols(l))}:function(l){return Object.getOwnPropertyNames(l)},Bi=Number.isNaN||function(l){return l!=l},Fn=Dt,Dt.EventEmitter=Dt,Dt.prototype._events=void 0,Dt.prototype._eventsCount=0,Dt.prototype._maxListeners=void 0,xi=10,Object.defineProperty(Dt,"defaultMaxListeners",{enumerable:!0,get:function(){return xi},set:function(l){if(typeof l!="number"||l<0||Bi(l))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+l+".");xi=l}}),Dt.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Dt.prototype.setMaxListeners=function(l){if(typeof l!="number"||l<0||Bi(l))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+l+".");return this._maxListeners=l,this},Dt.prototype.getMaxListeners=function(){return Mn(this)},Dt.prototype.emit=function(l){for(var h=[],n=1;n<arguments.length;n++)h.push(arguments[n]);var o=l==="error",s=this._events;if(s!==void 0)o=o&&s.error===void 0;else if(!o)return!1;if(o){var t;if(h.length>0&&(t=h[0]),t instanceof Error)throw t;var r=new Error("Unhandled error."+(t?" ("+t.message+")":""));throw r.context=t,r}var e=s[l];if(e===void 0)return!1;if(typeof e=="function")Pi(e,this,h);else{var i=e.length,a=Dn(e,i);for(n=0;n<i;++n)Pi(a[n],this,h)}return!0},Dt.prototype.addListener=function(l,h){return jn(this,l,h,!1)},Dt.prototype.on=Dt.prototype.addListener,Dt.prototype.prependListener=function(l,h){return jn(this,l,h,!0)},Dt.prototype.once=function(l,h){return gr(h),this.on(l,Nn(this,l,h)),this},Dt.prototype.prependOnceListener=function(l,h){return gr(h),this.prependListener(l,Nn(this,l,h)),this},Dt.prototype.removeListener=function(l,h){var n,o,s,t,r;if(gr(h),(o=this._events)===void 0)return this;if((n=o[l])===void 0)return this;if(n===h||n.listener===h)--this._eventsCount==0?this._events=Object.create(null):(delete o[l],o.removeListener&&this.emit("removeListener",l,n.listener||h));else if(typeof n!="function"){for(s=-1,t=n.length-1;t>=0;t--)if(n[t]===h||n[t].listener===h){r=n[t].listener,s=t;break}if(s<0)return this;s===0?n.shift():function(e,i){for(;i+1<e.length;i++)e[i]=e[i+1];e.pop()}(n,s),n.length===1&&(o[l]=n[0]),o.removeListener!==void 0&&this.emit("removeListener",l,r||h)}return this},Dt.prototype.off=Dt.prototype.removeListener,Dt.prototype.removeAllListeners=function(l){var h,n,o;if((n=this._events)===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[l]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete n[l]),this;if(arguments.length===0){var s,t=Object.keys(n);for(o=0;o<t.length;++o)(s=t[o])!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(h=n[l])=="function")this.removeListener(l,h);else if(h!==void 0)for(o=h.length-1;o>=0;o--)this.removeListener(l,h[o]);return this},Dt.prototype.listeners=function(l){return Un(this,l,!0)},Dt.prototype.rawListeners=function(l){return Un(this,l,!1)},Dt.listenerCount=function(l,h){return typeof l.listenerCount=="function"?l.listenerCount(h):Ln.call(l,h)},Dt.prototype.listenerCount=Ln,Dt.prototype.eventNames=function(){return this._eventsCount>0?Wn(this._events):[]},(se=Fn).EventEmitter,se.defaultMaxListeners,se.init,se.listenerCount,se.EventEmitter,se.defaultMaxListeners,se.init,se.listenerCount}),Ce={};Ge(Ce,{EventEmitter:()=>qn,default:()=>se,defaultMaxListeners:()=>Hn,init:()=>Vn,listenerCount:()=>zn,on:()=>Kn,once:()=>Gn});var qn,Hn,Vn,zn,Kn,Gn,Ue=re(()=>{ot(),at(),st(),$n(),$n(),se.once=function(l,h){return new Promise((n,o)=>{function s(...r){t!==void 0&&l.removeListener("error",t),n(r)}let t;h!=="error"&&(t=r=>{l.removeListener(name,s),o(r)},l.once("error",t)),l.once(h,s)})},se.on=function(l,h){let n=[],o=[],s=null,t=!1,r={async next(){let a=n.shift();if(a)return createIterResult(a,!1);if(s){let c=Promise.reject(s);return s=null,c}return t?createIterResult(void 0,!0):new Promise((c,g)=>o.push({resolve:c,reject:g}))},async return(){l.removeListener(h,e),l.removeListener("error",i),t=!0;for(let a of o)a.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(a){s=a,l.removeListener(h,e),l.removeListener("error",i)},[Symbol.asyncIterator](){return this}};return l.on(h,e),l.on("error",i),r;function e(...a){let c=o.shift();c?c.resolve(createIterResult(a,!1)):n.push(a)}function i(a){t=!0;let c=o.shift();c?c.reject(a):s=a,r.return()}},{EventEmitter:qn,defaultMaxListeners:Hn,init:Vn,listenerCount:zn,on:Kn,once:Gn}=se}),ne=ft((l,h)=>{ot(),at(),st();var n=(Zt(),Lt(Xt)),{format:o,inspect:s}=xn(),{codes:{ERR_INVALID_ARG_TYPE:t}}=ie(),{kResistStopPropagation:r,AggregateError:e,SymbolDispose:i}=Vt(),a=globalThis.AbortSignal||rr().AbortSignal,c=globalThis.AbortController||rr().AbortController,g=Object.getPrototypeOf(async function(){}).constructor,d=globalThis.Blob||n.Blob,b=typeof d<"u"?function(y){return y instanceof d}:function(y){return!1},w=(y,v)=>{if(y!==void 0&&(y===null||typeof y!="object"||!("aborted"in y)))throw new t(v,"AbortSignal",y)};h.exports={AggregateError:e,kEmptyObject:Object.freeze({}),once(y){let v=!1;return function(...N){v||(v=!0,y.apply(this,N))}},createDeferredPromise:function(){let y,v;return{promise:new Promise((N,A)=>{y=N,v=A}),resolve:y,reject:v}},promisify:y=>new Promise((v,N)=>{y((A,...V)=>A?N(A):v(...V))}),debuglog:()=>function(){},format:o,inspect:s,types:{isAsyncFunction:y=>y instanceof g,isArrayBufferView:y=>ArrayBuffer.isView(y)},isBlob:b,deprecate:(y,v)=>y,addAbortListener:(Ue(),Lt(Ce)).addAbortListener||function(y,v){if(y===void 0)throw new t("signal","AbortSignal",y);let N;return w(y,"signal"),((A,V)=>{if(typeof A!="function")throw new t(V,"Function",A)})(v,"listener"),y.aborted?queueMicrotask(()=>v()):(y.addEventListener("abort",v,{__proto__:null,once:!0,[r]:!0}),N=()=>{y.removeEventListener("abort",v)}),{__proto__:null,[i](){var A;(A=N)===null||A===void 0||A()}}},AbortSignalAny:a.any||function(y){if(y.length===1)return y[0];let v=new c,N=()=>v.abort();return y.forEach(A=>{w(A,"signals"),A.addEventListener("abort",N,{once:!0})}),v.signal.addEventListener("abort",()=>{y.forEach(A=>A.removeEventListener("abort",N))},{once:!0}),v.signal}},h.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),ir=ft((l,h)=>{ot(),at(),st();var{ArrayIsArray:n,ArrayPrototypeIncludes:o,ArrayPrototypeJoin:s,ArrayPrototypeMap:t,NumberIsInteger:r,NumberIsNaN:e,NumberMAX_SAFE_INTEGER:i,NumberMIN_SAFE_INTEGER:a,NumberParseInt:c,ObjectPrototypeHasOwnProperty:g,RegExpPrototypeExec:d,String:b,StringPrototypeToUpperCase:w,StringPrototypeTrim:y}=Vt(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:N,ERR_INVALID_ARG_TYPE:A,ERR_INVALID_ARG_VALUE:V,ERR_OUT_OF_RANGE:rt,ERR_UNKNOWN_SIGNAL:z}}=ie(),{normalizeEncoding:lt}=ne(),{isAsyncFunction:E,isArrayBufferView:_}=ne().types,p={},O=/^[0-7]+$/,M=v((C,X,F=a,dt=i)=>{if(typeof C!="number")throw new A(X,"number",C);if(!r(C))throw new rt(X,"an integer",C);if(C<F||C>dt)throw new rt(X,`>= ${F} && <= ${dt}`,C)}),K=v((C,X,F=-2147483648,dt=2147483647)=>{if(typeof C!="number")throw new A(X,"number",C);if(!r(C))throw new rt(X,"an integer",C);if(C<F||C>dt)throw new rt(X,`>= ${F} && <= ${dt}`,C)}),J=v((C,X,F=!1)=>{if(typeof C!="number")throw new A(X,"number",C);if(!r(C))throw new rt(X,"an integer",C);let dt=F?1:0,kt=4294967295;if(C<dt||C>kt)throw new rt(X,`>= ${dt} && <= ${kt}`,C)});function G(C,X){if(typeof C!="string")throw new A(X,"string",C)}var $=v((C,X,F)=>{if(!o(F,C)){let dt="must be one of: "+s(t(F,kt=>typeof kt=="string"?`'${kt}'`:b(kt)),", ");throw new V(X,C,dt)}});function et(C,X){if(typeof C!="boolean")throw new A(X,"boolean",C)}function L(C,X,F){return C!=null&&g(C,X)?C[X]:F}var it=v((C,X,F=null)=>{let dt=L(F,"allowArray",!1),kt=L(F,"allowFunction",!1);if(!L(F,"nullable",!1)&&C===null||!dt&&n(C)||typeof C!="object"&&(!kt||typeof C!="function"))throw new A(X,"Object",C)}),x=v((C,X)=>{if(C!=null&&typeof C!="object"&&typeof C!="function")throw new A(X,"a dictionary",C)}),j=v((C,X,F=0)=>{if(!n(C))throw new A(X,"Array",C);if(C.length<F)throw new V(X,C,`must be longer than ${F}`)}),W=v((C,X="buffer")=>{if(!_(C))throw new A(X,["Buffer","TypedArray","DataView"],C)}),U=v((C,X)=>{if(C!==void 0&&(C===null||typeof C!="object"||!("aborted"in C)))throw new A(X,"AbortSignal",C)}),Y=v((C,X)=>{if(typeof C!="function")throw new A(X,"Function",C)}),Q=v((C,X)=>{if(typeof C!="function"||E(C))throw new A(X,"Function",C)}),nt=v((C,X)=>{if(C!==void 0)throw new A(X,"undefined",C)}),ut=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ct(C,X){if(typeof C>"u"||!d(ut,C))throw new V(X,C,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}h.exports={isInt32:function(C){return C===(0|C)},isUint32:function(C){return C===C>>>0},parseFileMode:function(C,X,F){if(typeof C>"u"&&(C=F),typeof C=="string"){if(d(O,C)===null)throw new V(X,C,"must be a 32-bit unsigned integer or an octal string");C=c(C,8)}return J(C,X),C},validateArray:j,validateStringArray:function(C,X){j(C,X);for(let F=0;F<C.length;F++)G(C[F],`${X}[${F}]`)},validateBooleanArray:function(C,X){j(C,X);for(let F=0;F<C.length;F++)et(C[F],`${X}[${F}]`)},validateAbortSignalArray:function(C,X){j(C,X);for(let F=0;F<C.length;F++){let dt=C[F],kt=`${X}[${F}]`;if(dt==null)throw new A(kt,"AbortSignal",dt);U(dt,kt)}},validateBoolean:et,validateBuffer:W,validateDictionary:x,validateEncoding:function(C,X){let F=lt(X),dt=C.length;if(F==="hex"&&dt%2!=0)throw new V("encoding",X,`is invalid for data of length ${dt}`)},validateFunction:Y,validateInt32:K,validateInteger:M,validateNumber:function(C,X,F=void 0,dt){if(typeof C!="number")throw new A(X,"number",C);if(F!=null&&C<F||dt!=null&&C>dt||(F!=null||dt!=null)&&e(C))throw new rt(X,`${F!=null?`>= ${F}`:""}${F!=null&&dt!=null?" && ":""}${dt!=null?`<= ${dt}`:""}`,C)},validateObject:it,validateOneOf:$,validatePlainFunction:Q,validatePort:function(C,X="Port",F=!0){if(typeof C!="number"&&typeof C!="string"||typeof C=="string"&&y(C).length===0||+C!=+C>>>0||C>65535||C===0&&!F)throw new N(X,C,F);return 0|C},validateSignalName:function(C,X="signal"){if(G(C,X),p[C]===void 0)throw p[w(C)]!==void 0?new z(C+" (signals must use all capital letters)"):new z(C)},validateString:G,validateUint32:J,validateUndefined:nt,validateUnion:function(C,X,F){if(!o(F,C))throw new A(X,`('${s(F,"|")}')`,C)},validateAbortSignal:U,validateLinkHeaderValue:function(C){if(typeof C=="string")return ct(C,"hints"),C;if(n(C)){let X=C.length,F="";if(X===0)return F;for(let dt=0;dt<X;dt++){let kt=C[dt];ct(kt,"hints"),F+=kt,dt!==X-1&&(F+=", ")}return F}throw new V("hints",C,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}}),Le=ft((l,h)=>{ot(),at(),st();var n,o,s=h.exports={};function t(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function e(v){if(n===setTimeout)return setTimeout(v,0);if((n===t||!n)&&setTimeout)return n=setTimeout,setTimeout(v,0);try{return n(v,0)}catch{try{return n.call(null,v,0)}catch{return n.call(this,v,0)}}}(function(){try{n=typeof setTimeout=="function"?setTimeout:t}catch{n=t}try{o=typeof clearTimeout=="function"?clearTimeout:r}catch{o=r}})();var i,a=[],c=!1,g=-1;function d(){!c||!i||(c=!1,i.length?a=i.concat(a):g=-1,a.length&&b())}function b(){if(!c){var v=e(d);c=!0;for(var N=a.length;N;){for(i=a,a=[];++g<N;)i&&i[g].run();g=-1,N=a.length}i=null,c=!1,function(A){if(o===clearTimeout)return clearTimeout(A);if((o===r||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(A);try{return o(A)}catch{try{return o.call(null,A)}catch{return o.call(this,A)}}}(v)}}function w(v,N){this.fun=v,this.array=N}function y(){}s.nextTick=function(v){var N=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)N[A-1]=arguments[A];a.push(new w(v,N)),a.length===1&&!c&&e(b)},w.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=y,s.addListener=y,s.once=y,s.off=y,s.removeListener=y,s.removeAllListeners=y,s.emit=y,s.prependListener=y,s.prependOnceListener=y,s.listeners=function(v){return[]},s.binding=function(v){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(v){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}),be=ft((l,h)=>{ot(),at(),st();var{SymbolAsyncIterator:n,SymbolIterator:o,SymbolFor:s}=Vt(),t=s("nodejs.stream.destroyed"),r=s("nodejs.stream.errored"),e=s("nodejs.stream.readable"),i=s("nodejs.stream.writable"),a=s("nodejs.stream.disturbed"),c=s("nodejs.webstream.isClosedPromise"),g=s("nodejs.webstream.controllerErrorFunction");function d(p,O=!1){var M;return!(!p||typeof p.pipe!="function"||typeof p.on!="function"||O&&(typeof p.pause!="function"||typeof p.resume!="function")||p._writableState&&((M=p._readableState)===null||M===void 0?void 0:M.readable)===!1||p._writableState&&!p._readableState)}function b(p){var O;return!(!p||typeof p.write!="function"||typeof p.on!="function"||p._readableState&&((O=p._writableState)===null||O===void 0?void 0:O.writable)===!1)}function w(p){return p&&(p._readableState||p._writableState||typeof p.write=="function"&&typeof p.on=="function"||typeof p.pipe=="function"&&typeof p.on=="function")}function y(p){return!(!p||w(p)||typeof p.pipeThrough!="function"||typeof p.getReader!="function"||typeof p.cancel!="function")}function v(p){return!(!p||w(p)||typeof p.getWriter!="function"||typeof p.abort!="function")}function N(p){return!(!p||w(p)||typeof p.readable!="object"||typeof p.writable!="object")}function A(p){if(!w(p))return null;let O=p._writableState,M=p._readableState,K=O||M;return!!(p.destroyed||p[t]||K!=null&&K.destroyed)}function V(p){if(!b(p))return null;if(p.writableEnded===!0)return!0;let O=p._writableState;return(O==null||!O.errored)&&(typeof(O==null?void 0:O.ended)!="boolean"?null:O.ended)}function rt(p,O){if(!d(p))return null;let M=p._readableState;return(M==null||!M.errored)&&(typeof(M==null?void 0:M.endEmitted)!="boolean"?null:!!(M.endEmitted||O===!1&&M.ended===!0&&M.length===0))}function z(p){return p&&p[e]!=null?p[e]:typeof(p==null?void 0:p.readable)!="boolean"?null:!A(p)&&d(p)&&p.readable&&!rt(p)}function lt(p){return p&&p[i]!=null?p[i]:typeof(p==null?void 0:p.writable)!="boolean"?null:!A(p)&&b(p)&&p.writable&&!V(p)}function E(p){return typeof p._closed=="boolean"&&typeof p._defaultKeepAlive=="boolean"&&typeof p._removedConnection=="boolean"&&typeof p._removedContLen=="boolean"}function _(p){return typeof p._sent100=="boolean"&&E(p)}h.exports={isDestroyed:A,kIsDestroyed:t,isDisturbed:function(p){var O;return!(!p||!((O=p[a])!==null&&O!==void 0?O:p.readableDidRead||p.readableAborted))},kIsDisturbed:a,isErrored:function(p){var O,M,K,J,G,$,et,L,it,x;return!(!p||!((O=(M=(K=(J=(G=($=p[r])!==null&&$!==void 0?$:p.readableErrored)!==null&&G!==void 0?G:p.writableErrored)!==null&&J!==void 0?J:(et=p._readableState)===null||et===void 0?void 0:et.errorEmitted)!==null&&K!==void 0?K:(L=p._writableState)===null||L===void 0?void 0:L.errorEmitted)!==null&&M!==void 0?M:(it=p._readableState)===null||it===void 0?void 0:it.errored)!==null&&O!==void 0?O:(x=p._writableState)!==null&&x!==void 0&&x.errored))},kIsErrored:r,isReadable:z,kIsReadable:e,kIsClosedPromise:c,kControllerErrorFunction:g,kIsWritable:i,isClosed:function(p){if(!w(p))return null;if(typeof p.closed=="boolean")return p.closed;let O=p._writableState,M=p._readableState;return typeof(O==null?void 0:O.closed)=="boolean"||typeof(M==null?void 0:M.closed)=="boolean"?(O==null?void 0:O.closed)||(M==null?void 0:M.closed):typeof p._closed=="boolean"&&E(p)?p._closed:null},isDuplexNodeStream:function(p){return!(!p||typeof p.pipe!="function"||!p._readableState||typeof p.on!="function"||typeof p.write!="function")},isFinished:function(p,O){return w(p)?!!A(p)||!((O==null?void 0:O.readable)!==!1&&z(p)||(O==null?void 0:O.writable)!==!1&&lt(p)):null},isIterable:function(p,O){return p!=null&&(O===!0?typeof p[n]=="function":O===!1?typeof p[o]=="function":typeof p[n]=="function"||typeof p[o]=="function")},isReadableNodeStream:d,isReadableStream:y,isReadableEnded:function(p){if(!d(p))return null;if(p.readableEnded===!0)return!0;let O=p._readableState;return!(!O||O.errored)&&(typeof(O==null?void 0:O.ended)!="boolean"?null:O.ended)},isReadableFinished:rt,isReadableErrored:function(p){var O,M;return w(p)?p.readableErrored?p.readableErrored:(O=(M=p._readableState)===null||M===void 0?void 0:M.errored)!==null&&O!==void 0?O:null:null},isNodeStream:w,isWebStream:function(p){return y(p)||v(p)||N(p)},isWritable:lt,isWritableNodeStream:b,isWritableStream:v,isWritableEnded:V,isWritableFinished:function(p,O){if(!b(p))return null;if(p.writableFinished===!0)return!0;let M=p._writableState;return(M==null||!M.errored)&&(typeof(M==null?void 0:M.finished)!="boolean"?null:!!(M.finished||O===!1&&M.ended===!0&&M.length===0))},isWritableErrored:function(p){var O,M;return w(p)?p.writableErrored?p.writableErrored:(O=(M=p._writableState)===null||M===void 0?void 0:M.errored)!==null&&O!==void 0?O:null:null},isServerRequest:function(p){var O;return typeof p._consuming=="boolean"&&typeof p._dumped=="boolean"&&((O=p.req)===null||O===void 0?void 0:O.upgradeOrConnect)===void 0},isServerResponse:_,willEmitClose:function(p){if(!w(p))return null;let O=p._writableState,M=p._readableState,K=O||M;return!K&&_(p)||!!(K&&K.autoDestroy&&K.emitClose&&K.closed===!1)},isTransformStream:N}}),Re=ft((l,h)=>{ot(),at(),st();var n,o=Le(),{AbortError:s,codes:t}=ie(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:e}=t,{kEmptyObject:i,once:a}=ne(),{validateAbortSignal:c,validateFunction:g,validateObject:d,validateBoolean:b}=ir(),{Promise:w,PromisePrototypeThen:y,SymbolDispose:v}=Vt(),{isClosed:N,isReadable:A,isReadableNodeStream:V,isReadableStream:rt,isReadableFinished:z,isReadableErrored:lt,isWritable:E,isWritableNodeStream:_,isWritableStream:p,isWritableFinished:O,isWritableErrored:M,isNodeStream:K,willEmitClose:J,kIsClosedPromise:G}=be(),$=()=>{};function et(L,it,x){var j,W;if(arguments.length===2?(x=it,it=i):it==null?it=i:d(it,"options"),g(x,"callback"),c(it.signal,"options.signal"),x=a(x),rt(L)||p(L))return function(k,B,P){let H=!1,mt=$;if(B.signal)if(mt=()=>{H=!0,P.call(k,new s(void 0,{cause:B.signal.reason}))},B.signal.aborted)o.nextTick(mt);else{let ht=(n=n||ne().addAbortListener)(B.signal,mt),bt=P;P=a((...Et)=>{ht[v](),bt.apply(k,Et)})}let pt=(...ht)=>{H||o.nextTick(()=>P.apply(k,ht))};return y(k[G].promise,pt,pt),$}(L,it,x);if(!K(L))throw new r("stream",["ReadableStream","WritableStream","Stream"],L);let U=(j=it.readable)!==null&&j!==void 0?j:V(L),Y=(W=it.writable)!==null&&W!==void 0?W:_(L),Q=L._writableState,nt=L._readableState,ut=()=>{L.writable||X()},ct=J(L)&&V(L)===U&&_(L)===Y,C=O(L,!1),X=()=>{C=!0,L.destroyed&&(ct=!1),(!ct||L.readable&&!U)&&(!U||F)&&x.call(L)},F=z(L,!1),dt=()=>{F=!0,L.destroyed&&(ct=!1),(!ct||L.writable&&!Y)&&(!Y||C)&&x.call(L)},kt=k=>{x.call(L,k)},R=N(L),Z=()=>{R=!0;let k=M(L)||lt(L);return k&&typeof k!="boolean"?x.call(L,k):U&&!F&&V(L,!0)&&!z(L,!1)?x.call(L,new e):!Y||C||O(L,!1)?void x.call(L):x.call(L,new e)},u=()=>{R=!0;let k=M(L)||lt(L);if(k&&typeof k!="boolean")return x.call(L,k);x.call(L)},f=()=>{L.req.on("finish",X)};(function(k){return k.setHeader&&typeof k.abort=="function"})(L)?(L.on("complete",X),ct||L.on("abort",Z),L.req?f():L.on("request",f)):Y&&!Q&&(L.on("end",ut),L.on("close",ut)),!ct&&typeof L.aborted=="boolean"&&L.on("aborted",Z),L.on("end",dt),L.on("finish",X),it.error!==!1&&L.on("error",kt),L.on("close",Z),R?o.nextTick(Z):Q!=null&&Q.errorEmitted||nt!=null&&nt.errorEmitted?ct||o.nextTick(u):(!U&&(!ct||A(L))&&(C||E(L)===!1)||!Y&&(!ct||E(L))&&(F||A(L)===!1)||nt&&L.req&&L.aborted)&&o.nextTick(u);let m=()=>{x=$,L.removeListener("aborted",Z),L.removeListener("complete",X),L.removeListener("abort",Z),L.removeListener("request",f),L.req&&L.req.removeListener("finish",X),L.removeListener("end",ut),L.removeListener("close",ut),L.removeListener("finish",X),L.removeListener("end",dt),L.removeListener("error",kt),L.removeListener("close",Z)};if(it.signal&&!R){let k=()=>{let B=x;m(),B.call(L,new s(void 0,{cause:it.signal.reason}))};if(it.signal.aborted)o.nextTick(k);else{let B=(n=n||ne().addAbortListener)(it.signal,k),P=x;x=a((...H)=>{B[v](),P.apply(L,H)})}}return m}h.exports=et,h.exports.finished=function(L,it){var x;let j=!1;return it===null&&(it=i),(x=it)!==null&&x!==void 0&&x.cleanup&&(b(it.cleanup,"cleanup"),j=it.cleanup),new w((W,U)=>{let Y=et(L,it,Q=>{j&&Y(),Q?U(Q):W()})})}}),Ye=ft((l,h)=>{ot(),at(),st();var n=Le(),{aggregateTwoErrors:o,codes:{ERR_MULTIPLE_CALLBACK:s},AbortError:t}=ie(),{Symbol:r}=Vt(),{kIsDestroyed:e,isDestroyed:i,isFinished:a,isServerRequest:c}=be(),g=r("kDestroy"),d=r("kConstruct");function b(_,p,O){_&&(_.stack,p&&!p.errored&&(p.errored=_),O&&!O.errored&&(O.errored=_))}function w(_,p,O){let M=!1;function K(J){if(M)return;M=!0;let G=_._readableState,$=_._writableState;b(J,$,G),$&&($.closed=!0),G&&(G.closed=!0),typeof O=="function"&&O(J),J?n.nextTick(y,_,J):n.nextTick(v,_)}try{_._destroy(p||null,K)}catch(J){K(J)}}function y(_,p){N(_,p),v(_)}function v(_){let p=_._readableState,O=_._writableState;O&&(O.closeEmitted=!0),p&&(p.closeEmitted=!0),(O!=null&&O.emitClose||p!=null&&p.emitClose)&&_.emit("close")}function N(_,p){let O=_._readableState,M=_._writableState;M!=null&&M.errorEmitted||O!=null&&O.errorEmitted||(M&&(M.errorEmitted=!0),O&&(O.errorEmitted=!0),_.emit("error",p))}function A(_,p,O){let M=_._readableState,K=_._writableState;if(K!=null&&K.destroyed||M!=null&&M.destroyed)return this;M!=null&&M.autoDestroy||K!=null&&K.autoDestroy?_.destroy(p):p&&(p.stack,K&&!K.errored&&(K.errored=p),M&&!M.errored&&(M.errored=p),O?n.nextTick(N,_,p):N(_,p))}function V(_){let p=!1;function O(M){if(p)return void A(_,M??new s);p=!0;let K=_._readableState,J=_._writableState,G=J||K;K&&(K.constructed=!0),J&&(J.constructed=!0),G.destroyed?_.emit(g,M):M?A(_,M,!0):n.nextTick(rt,_)}try{_._construct(M=>{n.nextTick(O,M)})}catch(M){n.nextTick(O,M)}}function rt(_){_.emit(d)}function z(_){return(_==null?void 0:_.setHeader)&&typeof _.abort=="function"}function lt(_){_.emit("close")}function E(_,p){_.emit("error",p),n.nextTick(lt,_)}h.exports={construct:function(_,p){if(typeof _._construct!="function")return;let O=_._readableState,M=_._writableState;O&&(O.constructed=!1),M&&(M.constructed=!1),_.once(d,p),!(_.listenerCount(d)>1)&&n.nextTick(V,_)},destroyer:function(_,p){!_||i(_)||(!p&&!a(_)&&(p=new t),c(_)?(_.socket=null,_.destroy(p)):z(_)?_.abort():z(_.req)?_.req.abort():typeof _.destroy=="function"?_.destroy(p):typeof _.close=="function"?_.close():p?n.nextTick(E,_,p):n.nextTick(lt,_),_.destroyed||(_[e]=!0))},destroy:function(_,p){let O=this._readableState,M=this._writableState,K=M||O;return M!=null&&M.destroyed||O!=null&&O.destroyed?(typeof p=="function"&&p(),this):(b(_,M,O),M&&(M.destroyed=!0),O&&(O.destroyed=!0),K.constructed?w(this,_,p):this.once(g,function(J){w(this,o(J,_),p)}),this)},undestroy:function(){let _=this._readableState,p=this._writableState;_&&(_.constructed=!0,_.closed=!1,_.closeEmitted=!1,_.destroyed=!1,_.errored=null,_.errorEmitted=!1,_.reading=!1,_.ended=_.readable===!1,_.endEmitted=_.readable===!1),p&&(p.constructed=!0,p.destroyed=!1,p.closed=!1,p.closeEmitted=!1,p.errored=null,p.errorEmitted=!1,p.finalCalled=!1,p.prefinished=!1,p.ended=p.writable===!1,p.ending=p.writable===!1,p.finished=p.writable===!1)},errorOrDestroy:A}}),Mi=ft((l,h)=>{ot(),at(),st();var{ArrayIsArray:n,ObjectSetPrototypeOf:o}=Vt(),{EventEmitter:s}=(Ue(),Lt(Ce));function t(e){s.call(this,e)}function r(e,i,a){if(typeof e.prependListener=="function")return e.prependListener(i,a);e._events&&e._events[i]?n(e._events[i])?e._events[i].unshift(a):e._events[i]=[a,e._events[i]]:e.on(i,a)}o(t.prototype,s.prototype),o(t,s),t.prototype.pipe=function(e,i){let a=this;function c(N){e.writable&&e.write(N)===!1&&a.pause&&a.pause()}function g(){a.readable&&a.resume&&a.resume()}a.on("data",c),e.on("drain",g),!e._isStdio&&(!i||i.end!==!1)&&(a.on("end",b),a.on("close",w));let d=!1;function b(){d||(d=!0,e.end())}function w(){d||(d=!0,typeof e.destroy=="function"&&e.destroy())}function y(N){v(),s.listenerCount(this,"error")===0&&this.emit("error",N)}function v(){a.removeListener("data",c),e.removeListener("drain",g),a.removeListener("end",b),a.removeListener("close",w),a.removeListener("error",y),e.removeListener("error",y),a.removeListener("end",v),a.removeListener("close",v),e.removeListener("close",v)}return r(a,"error",y),r(e,"error",y),a.on("end",v),a.on("close",v),e.on("close",v),e.emit("pipe",a),e},h.exports={Stream:t,prependListener:r}}),br=ft((l,h)=>{ot(),at(),st();var n,{SymbolDispose:o}=Vt(),{AbortError:s,codes:t}=ie(),{isNodeStream:r,isWebStream:e,kControllerErrorFunction:i}=be(),a=Re(),{ERR_INVALID_ARG_TYPE:c}=t;h.exports.addAbortSignal=function(g,d){if(((b,w)=>{if(typeof b!="object"||!("aborted"in b))throw new c(w,"AbortSignal",b)})(g,"signal"),!r(d)&&!e(d))throw new c("stream",["ReadableStream","WritableStream","Stream"],d);return h.exports.addAbortSignalNoValidate(g,d)},h.exports.addAbortSignalNoValidate=function(g,d){if(typeof g!="object"||!("aborted"in g))return d;let b=r(d)?()=>{d.destroy(new s(void 0,{cause:g.reason}))}:()=>{d[i](new s(void 0,{cause:g.reason}))};if(g.aborted)b();else{let w=(n=n||ne().addAbortListener)(g,b);a(d,w[o])}return d}}),Fs=ft((l,h)=>{ot(),at(),st();var{StringPrototypeSlice:n,SymbolIterator:o,TypedArrayPrototypeSet:s,Uint8Array:t}=Vt(),{Buffer:r}=(Zt(),Lt(Xt)),{inspect:e}=ne();h.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(i){let a={data:i,next:null};this.length>0?this.tail.next=a:this.head=a,this.tail=a,++this.length}unshift(i){let a={data:i,next:this.head};this.length===0&&(this.tail=a),this.head=a,++this.length}shift(){if(this.length===0)return;let i=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,i}clear(){this.head=this.tail=null,this.length=0}join(i){if(this.length===0)return"";let a=this.head,c=""+a.data;for(;(a=a.next)!==null;)c+=i+a.data;return c}concat(i){if(this.length===0)return r.alloc(0);let a=r.allocUnsafe(i>>>0),c=this.head,g=0;for(;c;)s(a,c.data,g),g+=c.data.length,c=c.next;return a}consume(i,a){let c=this.head.data;if(i<c.length){let g=c.slice(0,i);return this.head.data=c.slice(i),g}return i===c.length?this.shift():a?this._getString(i):this._getBuffer(i)}first(){return this.head.data}*[o](){for(let i=this.head;i;i=i.next)yield i.data}_getString(i){let a="",c=this.head,g=0;do{let d=c.data;if(!(i>d.length)){i===d.length?(a+=d,++g,c.next?this.head=c.next:this.head=this.tail=null):(a+=n(d,0,i),this.head=c,c.data=n(d,i));break}a+=d,i-=d.length,++g}while((c=c.next)!==null);return this.length-=g,a}_getBuffer(i){let a=r.allocUnsafe(i),c=i,g=this.head,d=0;do{let b=g.data;if(!(i>b.length)){i===b.length?(s(a,b,c-i),++d,g.next?this.head=g.next:this.head=this.tail=null):(s(a,new t(b.buffer,b.byteOffset,i),c-i),this.head=g,g.data=b.slice(i));break}s(a,b,c-i),i-=b.length,++d}while((g=g.next)!==null);return this.length-=d,a}[Symbol.for("nodejs.util.inspect.custom")](i,a){return e(this,{...a,depth:0,customInspect:!1})}}}),mr=ft((l,h)=>{ot(),at(),st();var{MathFloor:n,NumberIsInteger:o}=Vt(),{validateInteger:s}=ir(),{ERR_INVALID_ARG_VALUE:t}=ie().codes,r=16384,e=16;function i(a){return a?e:r}h.exports={getHighWaterMark:function(a,c,g,d){let b=function(w,y,v){return w.highWaterMark!=null?w.highWaterMark:y?w[v]:null}(c,d,g);if(b!=null){if(!o(b)||b<0)throw new t(d?`options.${g}`:"options.highWaterMark",b);return n(b)}return i(a.objectMode)},getDefaultHighWaterMark:i,setDefaultHighWaterMark:function(a,c){s(c,"value",0),a?e=c:r=c}}}),Ws=ft((l,h)=>{ot(),at(),st();var n=(Zt(),Lt(Xt)),o=n.Buffer;function s(r,e){for(var i in r)e[i]=r[i]}function t(r,e,i){return o(r,e,i)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?h.exports=n:(s(n,l),l.Buffer=t),t.prototype=Object.create(o.prototype),s(o,t),t.from=function(r,e,i){if(typeof r=="number")throw new TypeError("Argument must not be a number");return o(r,e,i)},t.alloc=function(r,e,i){if(typeof r!="number")throw new TypeError("Argument must be a number");var a=o(r);return e!==void 0?typeof i=="string"?a.fill(e,i):a.fill(e):a.fill(0),a},t.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return o(r)},t.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(r)}}),$s=ft(l=>{ot(),at(),st();var h=Ws().Buffer,n=h.isEncoding||function(d){switch((d=""+d)&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(d){var b;switch(this.encoding=function(w){var y=function(v){if(!v)return"utf8";for(var N;;)switch(v){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return v;default:if(N)return;v=(""+v).toLowerCase(),N=!0}}(w);if(typeof y!="string"&&(h.isEncoding===n||!n(w)))throw new Error("Unknown encoding: "+w);return y||w}(d),this.encoding){case"utf16le":this.text=r,this.end=e,b=4;break;case"utf8":this.fillLast=t,b=4;break;case"base64":this.text=i,this.end=a,b=3;break;default:return this.write=c,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=h.allocUnsafe(b)}function s(d){return d<=127?0:d>>5==6?2:d>>4==14?3:d>>3==30?4:d>>6==2?-1:-2}function t(d){var b=this.lastTotal-this.lastNeed,w=function(y,v){if((192&v[0])!=128)return y.lastNeed=0,"\uFFFD";if(y.lastNeed>1&&v.length>1){if((192&v[1])!=128)return y.lastNeed=1,"\uFFFD";if(y.lastNeed>2&&v.length>2&&(192&v[2])!=128)return y.lastNeed=2,"\uFFFD"}}(this,d);return w!==void 0?w:this.lastNeed<=d.length?(d.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(d.copy(this.lastChar,b,0,d.length),void(this.lastNeed-=d.length))}function r(d,b){if((d.length-b)%2==0){var w=d.toString("utf16le",b);if(w){var y=w.charCodeAt(w.length-1);if(y>=55296&&y<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",b,d.length-1)}function e(d){var b=d&&d.length?this.write(d):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,w)}return b}function i(d,b){var w=(d.length-b)%3;return w===0?d.toString("base64",b):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",b,d.length-w))}function a(d){var b=d&&d.length?this.write(d):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function c(d){return d.toString(this.encoding)}function g(d){return d&&d.length?this.write(d):""}l.StringDecoder=o,o.prototype.write=function(d){if(d.length===0)return"";var b,w;if(this.lastNeed){if((b=this.fillLast(d))===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<d.length?b?b+this.text(d,w):this.text(d,w):b||""},o.prototype.end=function(d){var b=d&&d.length?this.write(d):"";return this.lastNeed?b+"\uFFFD":b},o.prototype.text=function(d,b){var w=function(v,N,A){var V=N.length-1;if(V<A)return 0;var rt=s(N[V]);return rt>=0?(rt>0&&(v.lastNeed=rt-1),rt):--V<A||rt===-2?0:(rt=s(N[V]),rt>=0?(rt>0&&(v.lastNeed=rt-2),rt):--V<A||rt===-2?0:(rt=s(N[V]),rt>=0?(rt>0&&(rt===2?rt=0:v.lastNeed=rt-3),rt):0))}(this,d,b);if(!this.lastNeed)return d.toString("utf8",b);this.lastTotal=w;var y=d.length-(w-this.lastNeed);return d.copy(this.lastChar,0,y),d.toString("utf8",b,y)},o.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length),this.lastNeed-=d.length}}),Qn=ft((l,h)=>{ot(),at(),st();var n=Le(),{PromisePrototypeThen:o,SymbolAsyncIterator:s,SymbolIterator:t}=Vt(),{Buffer:r}=(Zt(),Lt(Xt)),{ERR_INVALID_ARG_TYPE:e,ERR_STREAM_NULL_VALUES:i}=ie().codes;h.exports=function(a,c,g){let d,b;if(typeof c=="string"||c instanceof r)return new a({objectMode:!0,...g,read(){this.push(c),this.push(null)}});if(c&&c[s])b=!0,d=c[s]();else{if(!c||!c[t])throw new e("iterable",["Iterable"],c);b=!1,d=c[t]()}let w=new a({objectMode:!0,highWaterMark:1,...g}),y=!1;return w._read=function(){y||(y=!0,async function(){for(;;){try{let{value:v,done:N}=b?await d.next():d.next();if(N)w.push(null);else{let A=v&&typeof v.then=="function"?await v:v;if(A===null)throw y=!1,new i;if(w.push(A))continue;y=!1}}catch(v){w.destroy(v)}break}}())},w._destroy=function(v,N){o(async function(A){let V=A!=null,rt=typeof d.throw=="function";if(V&&rt){let{value:z,done:lt}=await d.throw(A);if(await z,lt)return}if(typeof d.return=="function"){let{value:z}=await d.return();await z}}(v),()=>n.nextTick(N,v),A=>n.nextTick(N,A||v))},w}}),yr=ft((l,h)=>{ot(),at(),st();var n=Le(),{ArrayPrototypeIndexOf:o,NumberIsInteger:s,NumberIsNaN:t,NumberParseInt:r,ObjectDefineProperties:e,ObjectKeys:i,ObjectSetPrototypeOf:a,Promise:c,SafeSet:g,SymbolAsyncDispose:d,SymbolAsyncIterator:b,Symbol:w}=Vt();h.exports=F,F.ReadableState=X;var{EventEmitter:y}=(Ue(),Lt(Ce)),{Stream:v,prependListener:N}=Mi(),{Buffer:A}=(Zt(),Lt(Xt)),{addAbortSignal:V}=br(),rt=Re(),z=ne().debuglog("stream",S=>{z=S}),lt=Fs(),E=Ye(),{getHighWaterMark:_,getDefaultHighWaterMark:p}=mr(),{aggregateTwoErrors:O,codes:{ERR_INVALID_ARG_TYPE:M,ERR_METHOD_NOT_IMPLEMENTED:K,ERR_OUT_OF_RANGE:J,ERR_STREAM_PUSH_AFTER_EOF:G,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:$},AbortError:et}=ie(),{validateObject:L}=ir(),it=w("kPaused"),{StringDecoder:x}=$s(),j=Qn();a(F.prototype,v.prototype),a(F,v);var W=()=>{},{errorOrDestroy:U}=E,Y=1,Q=16,nt=32,ut=2048,ct=4096;function C(S){return{enumerable:!1,get(){return!!(this.state&S)},set(I){I?this.state|=S:this.state&=~S}}}function X(S,I,vt){typeof vt!="boolean"&&(vt=I instanceof me()),this.state=ut|ct|Q|nt,S&&S.objectMode&&(this.state|=Y),vt&&S&&S.readableObjectMode&&(this.state|=Y),this.highWaterMark=S?_(this,S,"readableHighWaterMark",vt):p(!1),this.buffer=new lt,this.length=0,this.pipes=[],this.flowing=null,this[it]=null,S&&S.emitClose===!1&&(this.state&=-2049),S&&S.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=S&&S.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,S&&S.encoding&&(this.decoder=new x(S.encoding),this.encoding=S.encoding)}function F(S){if(!(this instanceof F))return new F(S);let I=this instanceof me();this._readableState=new X(S,this,I),S&&(typeof S.read=="function"&&(this._read=S.read),typeof S.destroy=="function"&&(this._destroy=S.destroy),typeof S.construct=="function"&&(this._construct=S.construct),S.signal&&!I&&V(S.signal,this)),v.call(this,S),E.construct(this,()=>{this._readableState.needReadable&&m(this,this._readableState)})}function dt(S,I,vt,wt){z("readableAddChunk",I);let Mt,At=S._readableState;if(At.state&Y||(typeof I=="string"?(vt=vt||At.defaultEncoding,At.encoding!==vt&&(wt&&At.encoding?I=A.from(I,vt).toString(At.encoding):(I=A.from(I,vt),vt=""))):I instanceof A?vt="":v._isUint8Array(I)?(I=v._uint8ArrayToBuffer(I),vt=""):I!=null&&(Mt=new M("chunk",["string","Buffer","Uint8Array"],I))),Mt)U(S,Mt);else if(I===null)At.state&=-9,function(Ut,D){if(z("onEofChunk"),!D.ended){if(D.decoder){let q=D.decoder.end();q&&q.length&&(D.buffer.push(q),D.length+=D.objectMode?1:q.length)}D.ended=!0,D.sync?u(Ut):(D.needReadable=!1,D.emittedReadable=!0,f(Ut))}}(S,At);else if(At.state&Y||I&&I.length>0)if(wt)if(4&At.state)U(S,new $);else{if(At.destroyed||At.errored)return!1;kt(S,At,I,!0)}else if(At.ended)U(S,new G);else{if(At.destroyed||At.errored)return!1;At.state&=-9,At.decoder&&!vt?(I=At.decoder.write(I),At.objectMode||I.length!==0?kt(S,At,I,!1):m(S,At)):kt(S,At,I,!1)}else wt||(At.state&=-9,m(S,At));return!At.ended&&(At.length<At.highWaterMark||At.length===0)}function kt(S,I,vt,wt){I.flowing&&I.length===0&&!I.sync&&S.listenerCount("data")>0?(65536&I.state?I.awaitDrainWriters.clear():I.awaitDrainWriters=null,I.dataEmitted=!0,S.emit("data",vt)):(I.length+=I.objectMode?1:vt.length,wt?I.buffer.unshift(vt):I.buffer.push(vt),64&I.state&&u(S)),m(S,I)}e(X.prototype,{objectMode:C(Y),ended:C(2),endEmitted:C(4),reading:C(8),constructed:C(Q),sync:C(nt),needReadable:C(64),emittedReadable:C(128),readableListening:C(256),resumeScheduled:C(512),errorEmitted:C(1024),emitClose:C(ut),autoDestroy:C(ct),destroyed:C(8192),closed:C(16384),closeEmitted:C(32768),multiAwaitDrain:C(65536),readingMore:C(1<<17),dataEmitted:C(1<<18)}),F.prototype.destroy=E.destroy,F.prototype._undestroy=E.undestroy,F.prototype._destroy=function(S,I){I(S)},F.prototype[y.captureRejectionSymbol]=function(S){this.destroy(S)},F.prototype[d]=function(){let S;return this.destroyed||(S=this.readableEnded?null:new et,this.destroy(S)),new c((I,vt)=>rt(this,wt=>wt&&wt!==S?vt(wt):I(null)))},F.prototype.push=function(S,I){return dt(this,S,I,!1)},F.prototype.unshift=function(S,I){return dt(this,S,I,!0)},F.prototype.isPaused=function(){let S=this._readableState;return S[it]===!0||S.flowing===!1},F.prototype.setEncoding=function(S){let I=new x(S);this._readableState.decoder=I,this._readableState.encoding=this._readableState.decoder.encoding;let vt=this._readableState.buffer,wt="";for(let Mt of vt)wt+=I.write(Mt);return vt.clear(),wt!==""&&vt.push(wt),this._readableState.length=wt.length,this};var R;function Z(S,I){return S<=0||I.length===0&&I.ended?0:I.state&Y?1:t(S)?I.flowing&&I.length?I.buffer.first().length:I.length:S<=I.length?S:I.ended?I.length:0}function u(S){let I=S._readableState;z("emitReadable",I.needReadable,I.emittedReadable),I.needReadable=!1,I.emittedReadable||(z("emitReadable",I.flowing),I.emittedReadable=!0,n.nextTick(f,S))}function f(S){let I=S._readableState;z("emitReadable_",I.destroyed,I.length,I.ended),!I.destroyed&&!I.errored&&(I.length||I.ended)&&(S.emit("readable"),I.emittedReadable=!1),I.needReadable=!I.flowing&&!I.ended&&I.length<=I.highWaterMark,mt(S)}function m(S,I){!I.readingMore&&I.constructed&&(I.readingMore=!0,n.nextTick(k,S,I))}function k(S,I){for(;!I.reading&&!I.ended&&(I.length<I.highWaterMark||I.flowing&&I.length===0);){let vt=I.length;if(z("maybeReadMore read 0"),S.read(0),vt===I.length)break}I.readingMore=!1}function B(S){let I=S._readableState;I.readableListening=S.listenerCount("readable")>0,I.resumeScheduled&&I[it]===!1?I.flowing=!0:S.listenerCount("data")>0?S.resume():I.readableListening||(I.flowing=null)}function P(S){z("readable nexttick read 0"),S.read(0)}function H(S,I){z("resume",I.reading),I.reading||S.read(0),I.resumeScheduled=!1,S.emit("resume"),mt(S),I.flowing&&!I.reading&&S.read(0)}function mt(S){let I=S._readableState;for(z("flow",I.flowing);I.flowing&&S.read()!==null;);}function pt(S,I){typeof S.read!="function"&&(S=F.wrap(S,{objectMode:!0}));let vt=async function*(wt,Mt){let At=W;function Ut(tt){this===wt?(At(),At=W):At=tt}wt.on("readable",Ut);let D,q=rt(wt,{writable:!1},tt=>{D=tt?O(D,tt):null,At(),At=W});try{for(;;){let tt=wt.destroyed?null:wt.read();if(tt!==null)yield tt;else{if(D)throw D;if(D===null)return;await new c(Ut)}}}catch(tt){throw D=O(D,tt),D}finally{!D&&(Mt==null?void 0:Mt.destroyOnReturn)===!1||D!==void 0&&!wt._readableState.autoDestroy?(wt.off("readable",Ut),q()):E.destroyer(wt,null)}}(S,I);return vt.stream=S,vt}function ht(S,I){if(I.length===0)return null;let vt;return I.objectMode?vt=I.buffer.shift():!S||S>=I.length?(vt=I.decoder?I.buffer.join(""):I.buffer.length===1?I.buffer.first():I.buffer.concat(I.length),I.buffer.clear()):vt=I.buffer.consume(S,I.decoder),vt}function bt(S){let I=S._readableState;z("endReadable",I.endEmitted),I.endEmitted||(I.ended=!0,n.nextTick(Et,I,S))}function Et(S,I){if(z("endReadableNT",S.endEmitted,S.length),!S.errored&&!S.closeEmitted&&!S.endEmitted&&S.length===0){if(S.endEmitted=!0,I.emit("end"),I.writable&&I.allowHalfOpen===!1)n.nextTick(jt,I);else if(S.autoDestroy){let vt=I._writableState;(!vt||vt.autoDestroy&&(vt.finished||vt.writable===!1))&&I.destroy()}}}function jt(S){S.writable&&!S.writableEnded&&!S.destroyed&&S.end()}function Pt(){return R===void 0&&(R={}),R}F.prototype.read=function(S){z("read",S),S===void 0?S=NaN:s(S)||(S=r(S,10));let I=this._readableState,vt=S;if(S>I.highWaterMark&&(I.highWaterMark=function(At){if(At>1073741824)throw new J("size","<= 1GiB",At);return At--,At|=At>>>1,At|=At>>>2,At|=At>>>4,At|=At>>>8,At|=At>>>16,++At}(S)),S!==0&&(I.state&=-129),S===0&&I.needReadable&&((I.highWaterMark!==0?I.length>=I.highWaterMark:I.length>0)||I.ended))return z("read: emitReadable",I.length,I.ended),I.length===0&&I.ended?bt(this):u(this),null;if((S=Z(S,I))===0&&I.ended)return I.length===0&&bt(this),null;let wt,Mt=!!(64&I.state);if(z("need readable",Mt),(I.length===0||I.length-S<I.highWaterMark)&&(Mt=!0,z("length less than watermark",Mt)),I.ended||I.reading||I.destroyed||I.errored||!I.constructed)Mt=!1,z("reading, ended or constructing",Mt);else if(Mt){z("do read"),I.state|=8|nt,I.length===0&&(I.state|=64);try{this._read(I.highWaterMark)}catch(At){U(this,At)}I.state&=-33,I.reading||(S=Z(vt,I))}return wt=S>0?ht(S,I):null,wt===null?(I.needReadable=I.length<=I.highWaterMark,S=0):(I.length-=S,I.multiAwaitDrain?I.awaitDrainWriters.clear():I.awaitDrainWriters=null),I.length===0&&(I.ended||(I.needReadable=!0),vt!==S&&I.ended&&bt(this)),wt!==null&&!I.errorEmitted&&!I.closeEmitted&&(I.dataEmitted=!0,this.emit("data",wt)),wt},F.prototype._read=function(S){throw new K("_read()")},F.prototype.pipe=function(S,I){let vt=this,wt=this._readableState;wt.pipes.length===1&&(wt.multiAwaitDrain||(wt.multiAwaitDrain=!0,wt.awaitDrainWriters=new g(wt.awaitDrainWriters?[wt.awaitDrainWriters]:[]))),wt.pipes.push(S),z("pipe count=%d opts=%j",wt.pipes.length,I);let Mt=I&&I.end===!1||S===n.stdout||S===n.stderr?St:Ut;function At(Bt,$t){z("onunpipe"),Bt===vt&&$t&&$t.hasUnpiped===!1&&($t.hasUnpiped=!0,z("cleanup"),S.removeListener("close",yt),S.removeListener("finish",Ot),D&&S.removeListener("drain",D),S.removeListener("error",gt),S.removeListener("unpipe",At),vt.removeListener("end",Ut),vt.removeListener("end",St),vt.removeListener("data",_t),q=!0,D&&wt.awaitDrainWriters&&(!S._writableState||S._writableState.needDrain)&&D())}function Ut(){z("onend"),S.end()}wt.endEmitted?n.nextTick(Mt):vt.once("end",Mt),S.on("unpipe",At);let D,q=!1;function tt(){q||(wt.pipes.length===1&&wt.pipes[0]===S?(z("false write response, pause",0),wt.awaitDrainWriters=S,wt.multiAwaitDrain=!1):wt.pipes.length>1&&wt.pipes.includes(S)&&(z("false write response, pause",wt.awaitDrainWriters.size),wt.awaitDrainWriters.add(S)),vt.pause()),D||(D=function(Bt,$t){return function(){let xt=Bt._readableState;xt.awaitDrainWriters===$t?(z("pipeOnDrain",1),xt.awaitDrainWriters=null):xt.multiAwaitDrain&&(z("pipeOnDrain",xt.awaitDrainWriters.size),xt.awaitDrainWriters.delete($t)),(!xt.awaitDrainWriters||xt.awaitDrainWriters.size===0)&&Bt.listenerCount("data")&&Bt.resume()}}(vt,S),S.on("drain",D))}function _t(Bt){z("ondata");let $t=S.write(Bt);z("dest.write",$t),$t===!1&&tt()}function gt(Bt){if(z("onerror",Bt),St(),S.removeListener("error",gt),S.listenerCount("error")===0){let $t=S._writableState||S._readableState;$t&&!$t.errorEmitted?U(S,Bt):S.emit("error",Bt)}}function yt(){S.removeListener("finish",Ot),St()}function Ot(){z("onfinish"),S.removeListener("close",yt),St()}function St(){z("unpipe"),vt.unpipe(S)}return vt.on("data",_t),N(S,"error",gt),S.once("close",yt),S.once("finish",Ot),S.emit("pipe",vt),S.writableNeedDrain===!0?tt():wt.flowing||(z("pipe resume"),vt.resume()),S},F.prototype.unpipe=function(S){let I=this._readableState;if(I.pipes.length===0)return this;if(!S){let wt=I.pipes;I.pipes=[],this.pause();for(let Mt=0;Mt<wt.length;Mt++)wt[Mt].emit("unpipe",this,{hasUnpiped:!1});return this}let vt=o(I.pipes,S);return vt===-1||(I.pipes.splice(vt,1),I.pipes.length===0&&this.pause(),S.emit("unpipe",this,{hasUnpiped:!1})),this},F.prototype.on=function(S,I){let vt=v.prototype.on.call(this,S,I),wt=this._readableState;return S==="data"?(wt.readableListening=this.listenerCount("readable")>0,wt.flowing!==!1&&this.resume()):S==="readable"&&!wt.endEmitted&&!wt.readableListening&&(wt.readableListening=wt.needReadable=!0,wt.flowing=!1,wt.emittedReadable=!1,z("on readable",wt.length,wt.reading),wt.length?u(this):wt.reading||n.nextTick(P,this)),vt},F.prototype.addListener=F.prototype.on,F.prototype.removeListener=function(S,I){let vt=v.prototype.removeListener.call(this,S,I);return S==="readable"&&n.nextTick(B,this),vt},F.prototype.off=F.prototype.removeListener,F.prototype.removeAllListeners=function(S){let I=v.prototype.removeAllListeners.apply(this,arguments);return(S==="readable"||S===void 0)&&n.nextTick(B,this),I},F.prototype.resume=function(){let S=this._readableState;return S.flowing||(z("resume"),S.flowing=!S.readableListening,function(I,vt){vt.resumeScheduled||(vt.resumeScheduled=!0,n.nextTick(H,I,vt))}(this,S)),S[it]=!1,this},F.prototype.pause=function(){return z("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(z("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[it]=!0,this},F.prototype.wrap=function(S){let I=!1;S.on("data",wt=>{!this.push(wt)&&S.pause&&(I=!0,S.pause())}),S.on("end",()=>{this.push(null)}),S.on("error",wt=>{U(this,wt)}),S.on("close",()=>{this.destroy()}),S.on("destroy",()=>{this.destroy()}),this._read=()=>{I&&S.resume&&(I=!1,S.resume())};let vt=i(S);for(let wt=1;wt<vt.length;wt++){let Mt=vt[wt];this[Mt]===void 0&&typeof S[Mt]=="function"&&(this[Mt]=S[Mt].bind(S))}return this},F.prototype[b]=function(){return pt(this)},F.prototype.iterator=function(S){return S!==void 0&&L(S,"options"),pt(this,S)},e(F.prototype,{readable:{__proto__:null,get(){let S=this._readableState;return!(!S||S.readable===!1||S.destroyed||S.errorEmitted||S.endEmitted)},set(S){this._readableState&&(this._readableState.readable=!!S)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(this._readableState.readable===!1||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(S){this._readableState&&(this._readableState.flowing=S)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(S){this._readableState&&(this._readableState.destroyed=S)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),e(X.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[it]!==!1},set(S){this[it]=!!S}}}),F._fromList=ht,F.from=function(S,I){return j(F,S,I)},F.fromWeb=function(S,I){return Pt().newStreamReadableFromReadableStream(S,I)},F.toWeb=function(S,I){return Pt().newReadableStreamFromStreamReadable(S,I)},F.wrap=function(S,I){var vt,wt;return new F({objectMode:(vt=(wt=S.readableObjectMode)!==null&&wt!==void 0?wt:S.objectMode)===null||vt===void 0||vt,...I,destroy(Mt,At){E.destroyer(S,Mt),At(Mt)}}).wrap(S)}}),ji=ft((l,h)=>{ot(),at(),st();var n=Le(),{ArrayPrototypeSlice:o,Error:s,FunctionPrototypeSymbolHasInstance:t,ObjectDefineProperty:r,ObjectDefineProperties:e,ObjectSetPrototypeOf:i,StringPrototypeToLowerCase:a,Symbol:c,SymbolHasInstance:g}=Vt();h.exports=L,L.WritableState=$;var{EventEmitter:d}=(Ue(),Lt(Ce)),b=Mi().Stream,{Buffer:w}=(Zt(),Lt(Xt)),y=Ye(),{addAbortSignal:v}=br(),{getHighWaterMark:N,getDefaultHighWaterMark:A}=mr(),{ERR_INVALID_ARG_TYPE:V,ERR_METHOD_NOT_IMPLEMENTED:rt,ERR_MULTIPLE_CALLBACK:z,ERR_STREAM_CANNOT_PIPE:lt,ERR_STREAM_DESTROYED:E,ERR_STREAM_ALREADY_FINISHED:_,ERR_STREAM_NULL_VALUES:p,ERR_STREAM_WRITE_AFTER_END:O,ERR_UNKNOWN_ENCODING:M}=ie().codes,{errorOrDestroy:K}=y;function J(){}i(L.prototype,b.prototype),i(L,b);var G=c("kOnFinished");function $(R,Z,u){typeof u!="boolean"&&(u=Z instanceof me()),this.objectMode=!(!R||!R.objectMode),u&&(this.objectMode=this.objectMode||!(!R||!R.writableObjectMode)),this.highWaterMark=R?N(this,R,"writableHighWaterMark",u):A(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let f=!(!R||R.decodeStrings!==!1);this.decodeStrings=!f,this.defaultEncoding=R&&R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=W.bind(void 0,Z),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,et(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!R||R.emitClose!==!1,this.autoDestroy=!R||R.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[G]=[]}function et(R){R.buffered=[],R.bufferedIndex=0,R.allBuffers=!0,R.allNoop=!0}function L(R){let Z=this instanceof me();if(!Z&&!t(L,this))return new L(R);this._writableState=new $(R,this,Z),R&&(typeof R.write=="function"&&(this._write=R.write),typeof R.writev=="function"&&(this._writev=R.writev),typeof R.destroy=="function"&&(this._destroy=R.destroy),typeof R.final=="function"&&(this._final=R.final),typeof R.construct=="function"&&(this._construct=R.construct),R.signal&&v(R.signal,this)),b.call(this,R),y.construct(this,()=>{let u=this._writableState;u.writing||nt(this,u),C(this,u)})}function it(R,Z,u,f){let m,k=R._writableState;if(typeof u=="function")f=u,u=k.defaultEncoding;else{if(u){if(u!=="buffer"&&!w.isEncoding(u))throw new M(u)}else u=k.defaultEncoding;typeof f!="function"&&(f=J)}if(Z===null)throw new p;if(!k.objectMode)if(typeof Z=="string")k.decodeStrings!==!1&&(Z=w.from(Z,u),u="buffer");else if(Z instanceof w)u="buffer";else{if(!b._isUint8Array(Z))throw new V("chunk",["string","Buffer","Uint8Array"],Z);Z=b._uint8ArrayToBuffer(Z),u="buffer"}return k.ending?m=new O:k.destroyed&&(m=new E("write")),m?(n.nextTick(f,m),K(R,m,!0),m):(k.pendingcb++,function(B,P,H,mt,pt){let ht=P.objectMode?1:H.length;P.length+=ht;let bt=P.length<P.highWaterMark;return bt||(P.needDrain=!0),P.writing||P.corked||P.errored||!P.constructed?(P.buffered.push({chunk:H,encoding:mt,callback:pt}),P.allBuffers&&mt!=="buffer"&&(P.allBuffers=!1),P.allNoop&&pt!==J&&(P.allNoop=!1)):(P.writelen=ht,P.writecb=pt,P.writing=!0,P.sync=!0,B._write(H,mt,P.onwrite),P.sync=!1),bt&&!P.errored&&!P.destroyed}(R,k,Z,u,f))}function x(R,Z,u,f,m,k,B){Z.writelen=f,Z.writecb=B,Z.writing=!0,Z.sync=!0,Z.destroyed?Z.onwrite(new E("write")):u?R._writev(m,Z.onwrite):R._write(m,k,Z.onwrite),Z.sync=!1}function j(R,Z,u,f){--Z.pendingcb,f(u),Q(Z),K(R,u)}function W(R,Z){let u=R._writableState,f=u.sync,m=u.writecb;typeof m=="function"?(u.writing=!1,u.writecb=null,u.length-=u.writelen,u.writelen=0,Z?(Z.stack,u.errored||(u.errored=Z),R._readableState&&!R._readableState.errored&&(R._readableState.errored=Z),f?n.nextTick(j,R,u,Z,m):j(R,u,Z,m)):(u.buffered.length>u.bufferedIndex&&nt(R,u),f?u.afterWriteTickInfo!==null&&u.afterWriteTickInfo.cb===m?u.afterWriteTickInfo.count++:(u.afterWriteTickInfo={count:1,cb:m,stream:R,state:u},n.nextTick(U,u.afterWriteTickInfo)):Y(R,u,1,m))):K(R,new z)}function U({stream:R,state:Z,count:u,cb:f}){return Z.afterWriteTickInfo=null,Y(R,Z,u,f)}function Y(R,Z,u,f){for(!Z.ending&&!R.destroyed&&Z.length===0&&Z.needDrain&&(Z.needDrain=!1,R.emit("drain"));u-- >0;)Z.pendingcb--,f();Z.destroyed&&Q(Z),C(R,Z)}function Q(R){if(R.writing)return;for(let m=R.bufferedIndex;m<R.buffered.length;++m){var Z;let{chunk:k,callback:B}=R.buffered[m],P=R.objectMode?1:k.length;R.length-=P,B((Z=R.errored)!==null&&Z!==void 0?Z:new E("write"))}let u=R[G].splice(0);for(let m=0;m<u.length;m++){var f;u[m]((f=R.errored)!==null&&f!==void 0?f:new E("end"))}et(R)}function nt(R,Z){if(Z.corked||Z.bufferProcessing||Z.destroyed||!Z.constructed)return;let{buffered:u,bufferedIndex:f,objectMode:m}=Z,k=u.length-f;if(!k)return;let B=f;if(Z.bufferProcessing=!0,k>1&&R._writev){Z.pendingcb-=k-1;let P=Z.allNoop?J:mt=>{for(let pt=B;pt<u.length;++pt)u[pt].callback(mt)},H=Z.allNoop&&B===0?u:o(u,B);H.allBuffers=Z.allBuffers,x(R,Z,!0,Z.length,H,"",P),et(Z)}else{do{let{chunk:P,encoding:H,callback:mt}=u[B];u[B++]=null,x(R,Z,!1,m?1:P.length,P,H,mt)}while(B<u.length&&!Z.writing);B===u.length?et(Z):B>256?(u.splice(0,B),Z.bufferedIndex=0):Z.bufferedIndex=B}Z.bufferProcessing=!1}function ut(R){return R.ending&&!R.destroyed&&R.constructed&&R.length===0&&!R.errored&&R.buffered.length===0&&!R.finished&&!R.writing&&!R.errorEmitted&&!R.closeEmitted}function ct(R,Z){!Z.prefinished&&!Z.finalCalled&&(typeof R._final!="function"||Z.destroyed?(Z.prefinished=!0,R.emit("prefinish")):(Z.finalCalled=!0,function(u,f){let m=!1;function k(B){if(m)K(u,B??z());else if(m=!0,f.pendingcb--,B){let P=f[G].splice(0);for(let H=0;H<P.length;H++)P[H](B);K(u,B,f.sync)}else ut(f)&&(f.prefinished=!0,u.emit("prefinish"),f.pendingcb++,n.nextTick(X,u,f))}f.sync=!0,f.pendingcb++;try{u._final(k)}catch(B){k(B)}f.sync=!1}(R,Z)))}function C(R,Z,u){ut(Z)&&(ct(R,Z),Z.pendingcb===0&&(u?(Z.pendingcb++,n.nextTick((f,m)=>{ut(m)?X(f,m):m.pendingcb--},R,Z)):ut(Z)&&(Z.pendingcb++,X(R,Z))))}function X(R,Z){Z.pendingcb--,Z.finished=!0;let u=Z[G].splice(0);for(let f=0;f<u.length;f++)u[f]();if(R.emit("finish"),Z.autoDestroy){let f=R._readableState;(!f||f.autoDestroy&&(f.endEmitted||f.readable===!1))&&R.destroy()}}$.prototype.getBuffer=function(){return o(this.buffered,this.bufferedIndex)},r($.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),r(L,g,{__proto__:null,value:function(R){return!!t(this,R)||this===L&&R&&R._writableState instanceof $}}),L.prototype.pipe=function(){K(this,new lt)},L.prototype.write=function(R,Z,u){return it(this,R,Z,u)===!0},L.prototype.cork=function(){this._writableState.corked++},L.prototype.uncork=function(){let R=this._writableState;R.corked&&(R.corked--,R.writing||nt(this,R))},L.prototype.setDefaultEncoding=function(R){if(typeof R=="string"&&(R=a(R)),!w.isEncoding(R))throw new M(R);return this._writableState.defaultEncoding=R,this},L.prototype._write=function(R,Z,u){if(!this._writev)throw new rt("_write()");this._writev([{chunk:R,encoding:Z}],u)},L.prototype._writev=null,L.prototype.end=function(R,Z,u){let f,m=this._writableState;if(typeof R=="function"?(u=R,R=null,Z=null):typeof Z=="function"&&(u=Z,Z=null),R!=null){let k=it(this,R,Z);k instanceof s&&(f=k)}return m.corked&&(m.corked=1,this.uncork()),f||(m.errored||m.ending?m.finished?f=new _("end"):m.destroyed&&(f=new E("end")):(m.ending=!0,C(this,m,!0),m.ended=!0)),typeof u=="function"&&(f||m.finished?n.nextTick(u,f):m[G].push(u)),this},e(L.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(R){this._writableState&&(this._writableState.destroyed=R)}},writable:{__proto__:null,get(){let R=this._writableState;return!(!R||R.writable===!1||R.destroyed||R.errored||R.ending||R.ended)},set(R){this._writableState&&(this._writableState.writable=!!R)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){let R=this._writableState;return!!R&&!R.destroyed&&!R.ending&&R.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(this._writableState.writable===!1||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});var F,dt=y.destroy;function kt(){return F===void 0&&(F={}),F}L.prototype.destroy=function(R,Z){let u=this._writableState;return!u.destroyed&&(u.bufferedIndex<u.buffered.length||u[G].length)&&n.nextTick(Q,u),dt.call(this,R,Z),this},L.prototype._undestroy=y.undestroy,L.prototype._destroy=function(R,Z){Z(R)},L.prototype[d.captureRejectionSymbol]=function(R){this.destroy(R)},L.fromWeb=function(R,Z){return kt().newStreamWritableFromWritableStream(R,Z)},L.toWeb=function(R){return kt().newWritableStreamFromStreamWritable(R)}}),qs=ft((l,h)=>{ot(),at(),st();var n=Le(),o=(Zt(),Lt(Xt)),{isReadable:s,isWritable:t,isIterable:r,isNodeStream:e,isReadableNodeStream:i,isWritableNodeStream:a,isDuplexNodeStream:c,isReadableStream:g,isWritableStream:d}=be(),b=Re(),{AbortError:w,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:v}}=ie(),{destroyer:N}=Ye(),A=me(),V=yr(),rt=ji(),{createDeferredPromise:z}=ne(),lt=Qn(),E=globalThis.Blob||o.Blob,_=typeof E<"u"?function(J){return J instanceof E}:function(J){return!1},p=globalThis.AbortController||rr().AbortController,{FunctionPrototypeCall:O}=Vt(),M=class extends A{constructor(J){super(J),(J==null?void 0:J.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(J==null?void 0:J.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};function K(J){let G,$,et,L,it,x=J.readable&&typeof J.readable.read!="function"?V.wrap(J.readable):J.readable,j=J.writable,W=!!s(x),U=!!t(j);function Y(Q){let nt=L;L=null,nt?nt(Q):Q&&it.destroy(Q)}return it=new M({readableObjectMode:!(x==null||!x.readableObjectMode),writableObjectMode:!(j==null||!j.writableObjectMode),readable:W,writable:U}),U&&(b(j,Q=>{U=!1,Q&&N(x,Q),Y(Q)}),it._write=function(Q,nt,ut){j.write(Q,nt)?ut():G=ut},it._final=function(Q){j.end(),$=Q},j.on("drain",function(){if(G){let Q=G;G=null,Q()}}),j.on("finish",function(){if($){let Q=$;$=null,Q()}})),W&&(b(x,Q=>{W=!1,Q&&N(x,Q),Y(Q)}),x.on("readable",function(){if(et){let Q=et;et=null,Q()}}),x.on("end",function(){it.push(null)}),it._read=function(){for(;;){let Q=x.read();if(Q===null)return void(et=it._read);if(!it.push(Q))return}}),it._destroy=function(Q,nt){!Q&&L!==null&&(Q=new w),et=null,G=null,$=null,L===null?nt(Q):(L=nt,N(j,Q),N(x,Q))},it}h.exports=function J(G,$){if(c(G))return G;if(i(G))return K({readable:G});if(a(G))return K({writable:G});if(e(G))return K({writable:!1,readable:!1});if(g(G))return K({readable:V.fromWeb(G)});if(d(G))return K({writable:rt.fromWeb(G)});if(typeof G=="function"){let{value:L,write:it,final:x,destroy:j}=function(U){let{promise:Y,resolve:Q}=z(),nt=new p,ut=nt.signal;return{value:U(async function*(){for(;;){let ct=Y;Y=null;let{chunk:C,done:X,cb:F}=await ct;if(n.nextTick(F),X)return;if(ut.aborted)throw new w(void 0,{cause:ut.reason});({promise:Y,resolve:Q}=z()),yield C}}(),{signal:ut}),write(ct,C,X){let F=Q;Q=null,F({chunk:ct,done:!1,cb:X})},final(ct){let C=Q;Q=null,C({done:!0,cb:ct})},destroy(ct,C){nt.abort(),C(ct)}}}(G);if(r(L))return lt(M,L,{objectMode:!0,write:it,final:x,destroy:j});let W=L==null?void 0:L.then;if(typeof W=="function"){let U,Y=O(W,L,Q=>{if(Q!=null)throw new v("nully","body",Q)},Q=>{N(U,Q)});return U=new M({objectMode:!0,readable:!1,write:it,final(Q){x(async()=>{try{await Y,n.nextTick(Q,null)}catch(nt){n.nextTick(Q,nt)}})},destroy:j})}throw new v("Iterable, AsyncIterable or AsyncFunction",$,L)}if(_(G))return J(G.arrayBuffer());if(r(G))return lt(M,G,{objectMode:!0,writable:!1});if(g(G==null?void 0:G.readable)&&d(G==null?void 0:G.writable))return M.fromWeb(G);if(typeof(G==null?void 0:G.writable)=="object"||typeof(G==null?void 0:G.readable)=="object")return K({readable:G!=null&&G.readable?i(G==null?void 0:G.readable)?G==null?void 0:G.readable:J(G.readable):void 0,writable:G!=null&&G.writable?a(G==null?void 0:G.writable)?G==null?void 0:G.writable:J(G.writable):void 0});let et=G==null?void 0:G.then;if(typeof et=="function"){let L;return O(et,G,it=>{it!=null&&L.push(it),L.push(null)},it=>{N(L,it)}),L=new M({objectMode:!0,writable:!1,read(){}})}throw new y($,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],G)}}),me=ft((l,h)=>{ot(),at(),st();var{ObjectDefineProperties:n,ObjectGetOwnPropertyDescriptor:o,ObjectKeys:s,ObjectSetPrototypeOf:t}=Vt();h.exports=c;var r,e,i=yr(),a=ji();t(c.prototype,i.prototype),t(c,i);{let d=s(a.prototype);for(let b=0;b<d.length;b++){let w=d[b];c.prototype[w]||(c.prototype[w]=a.prototype[w])}}function c(d){if(!(this instanceof c))return new c(d);i.call(this,d),a.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}function g(){return r===void 0&&(r={}),r}n(c.prototype,{writable:{__proto__:null,...o(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...o(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...o(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...o(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...o(a.prototype,"writableLength")},writableFinished:{__proto__:null,...o(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...o(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...o(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...o(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}}),c.fromWeb=function(d,b){return g().newStreamDuplexFromReadableWritablePair(d,b)},c.toWeb=function(d){return g().newReadableWritablePairFromDuplex(d)},c.from=function(d){return e||(e=qs()),e(d,"body")}}),Yn=ft((l,h)=>{ot(),at(),st();var{ObjectSetPrototypeOf:n,Symbol:o}=Vt();h.exports=i;var{ERR_METHOD_NOT_IMPLEMENTED:s}=ie().codes,t=me(),{getHighWaterMark:r}=mr();n(i.prototype,t.prototype),n(i,t);var e=o("kCallback");function i(g){if(!(this instanceof i))return new i(g);let d=g?r(this,g,"readableHighWaterMark",!0):null;d===0&&(g={...g,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:g.writableHighWaterMark||0}),t.call(this,g),this._readableState.sync=!1,this[e]=null,g&&(typeof g.transform=="function"&&(this._transform=g.transform),typeof g.flush=="function"&&(this._flush=g.flush)),this.on("prefinish",c)}function a(g){typeof this._flush!="function"||this.destroyed?(this.push(null),g&&g()):this._flush((d,b)=>{d?g?g(d):this.destroy(d):(b!=null&&this.push(b),this.push(null),g&&g())})}function c(){this._final!==a&&a.call(this)}i.prototype._final=a,i.prototype._transform=function(g,d,b){throw new s("_transform()")},i.prototype._write=function(g,d,b){let w=this._readableState,y=this._writableState,v=w.length;this._transform(g,d,(N,A)=>{N?b(N):(A!=null&&this.push(A),y.ended||v===w.length||w.length<w.highWaterMark?b():this[e]=b)})},i.prototype._read=function(){if(this[e]){let g=this[e];this[e]=null,g()}}}),Jn=ft((l,h)=>{ot(),at(),st();var{ObjectSetPrototypeOf:n}=Vt();h.exports=s;var o=Yn();function s(t){if(!(this instanceof s))return new s(t);o.call(this,t)}n(s.prototype,o.prototype),n(s,o),s.prototype._transform=function(t,r,e){e(null,t)}}),Ni=ft((l,h)=>{ot(),at(),st();var n,o,s,t=Le(),{ArrayIsArray:r,Promise:e,SymbolAsyncIterator:i,SymbolDispose:a}=Vt(),c=Re(),{once:g}=ne(),d=Ye(),b=me(),{aggregateTwoErrors:w,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:v,ERR_MISSING_ARGS:N,ERR_STREAM_DESTROYED:A,ERR_STREAM_PREMATURE_CLOSE:V},AbortError:rt}=ie(),{validateFunction:z,validateAbortSignal:lt}=ir(),{isIterable:E,isReadable:_,isReadableNodeStream:p,isNodeStream:O,isTransformStream:M,isWebStream:K,isReadableStream:J,isReadableFinished:G}=be(),$=globalThis.AbortController||rr().AbortController;function et(U,Y,Q){let nt=!1;return U.on("close",()=>{nt=!0}),{destroy:ut=>{nt||(nt=!0,d.destroyer(U,ut||new A("pipe")))},cleanup:c(U,{readable:Y,writable:Q},ut=>{nt=!ut})}}function L(U){if(E(U))return U;if(p(U))return async function*(Y){o||(o=yr()),yield*o.prototype[i].call(Y)}(U);throw new y("val",["Readable","Iterable","AsyncIterable"],U)}async function it(U,Y,Q,{end:nt}){let ut,ct=null,C=dt=>{if(dt&&(ut=dt),ct){let kt=ct;ct=null,kt()}},X=()=>new e((dt,kt)=>{ut?kt(ut):ct=()=>{ut?kt(ut):dt()}});Y.on("drain",C);let F=c(Y,{readable:!1},C);try{Y.writableNeedDrain&&await X();for await(let dt of U)Y.write(dt)||await X();nt&&(Y.end(),await X()),Q()}catch(dt){Q(ut!==dt?w(ut,dt):dt)}finally{F(),Y.off("drain",C)}}async function x(U,Y,Q,{end:nt}){M(Y)&&(Y=Y.writable);let ut=Y.getWriter();try{for await(let ct of U)await ut.ready,ut.write(ct).catch(()=>{});await ut.ready,nt&&await ut.close(),Q()}catch(ct){try{await ut.abort(ct),Q(ct)}catch(C){Q(C)}}}function j(U,Y,Q){if(U.length===1&&r(U[0])&&(U=U[0]),U.length<2)throw new N("streams");let nt,ut=new $,ct=ut.signal,C=Q==null?void 0:Q.signal,X=[];function F(){m(new rt)}lt(C,"options.signal"),s=s||ne().addAbortListener,C&&(nt=s(C,F));let dt,kt,R,Z=[],u=0;function f(P){m(P,--u==0)}function m(P,H){var mt;if(P&&(!dt||dt.code==="ERR_STREAM_PREMATURE_CLOSE")&&(dt=P),dt||H){for(;Z.length;)Z.shift()(dt);(mt=nt)===null||mt===void 0||mt[a](),ut.abort(),H&&(dt||X.forEach(pt=>pt()),t.nextTick(Y,dt,kt))}}for(let P=0;P<U.length;P++){let H=U[P],mt=P<U.length-1,pt=P>0,ht=mt||(Q==null?void 0:Q.end)!==!1,bt=P===U.length-1;if(O(H)){let Et=function(jt){jt&&jt.name!=="AbortError"&&jt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(jt)};if(ht){let{destroy:jt,cleanup:Pt}=et(H,mt,pt);Z.push(jt),_(H)&&bt&&X.push(Pt)}H.on("error",Et),_(H)&&bt&&X.push(()=>{H.removeListener("error",Et)})}if(P===0)if(typeof H=="function"){if(R=H({signal:ct}),!E(R))throw new v("Iterable, AsyncIterable or Stream","source",R)}else R=E(H)||p(H)||M(H)?H:b.from(H);else if(typeof H=="function"){var k;if(M(R)?R=L((k=R)===null||k===void 0?void 0:k.readable):R=L(R),R=H(R,{signal:ct}),mt){if(!E(R,!0))throw new v("AsyncIterable",`transform[${P-1}]`,R)}else{var B;n||(n=Jn());let Et=new n({objectMode:!0}),jt=(B=R)===null||B===void 0?void 0:B.then;if(typeof jt=="function")u++,jt.call(R,I=>{kt=I,I!=null&&Et.write(I),ht&&Et.end(),t.nextTick(f)},I=>{Et.destroy(I),t.nextTick(f,I)});else if(E(R,!0))u++,it(R,Et,f,{end:ht});else{if(!J(R)&&!M(R))throw new v("AsyncIterable or Promise","destination",R);{let I=R.readable||R;u++,it(I,Et,f,{end:ht})}}R=Et;let{destroy:Pt,cleanup:S}=et(R,!1,!0);Z.push(Pt),bt&&X.push(S)}}else if(O(H)){if(p(R)){u+=2;let Et=W(R,H,f,{end:ht});_(H)&&bt&&X.push(Et)}else if(M(R)||J(R)){let Et=R.readable||R;u++,it(Et,H,f,{end:ht})}else{if(!E(R))throw new y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],R);u++,it(R,H,f,{end:ht})}R=H}else if(K(H)){if(p(R))u++,x(L(R),H,f,{end:ht});else if(J(R)||E(R))u++,x(R,H,f,{end:ht});else{if(!M(R))throw new y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],R);u++,x(R.readable,H,f,{end:ht})}R=H}else R=b.from(H)}return(ct!=null&&ct.aborted||C!=null&&C.aborted)&&t.nextTick(F),R}function W(U,Y,Q,{end:nt}){let ut=!1;if(Y.on("close",()=>{ut||Q(new V)}),U.pipe(Y,{end:!1}),nt){let ct=function(){ut=!0,Y.end()};G(U)?t.nextTick(ct):U.once("end",ct)}else Q();return c(U,{readable:!0,writable:!1},ct=>{let C=U._readableState;ct&&ct.code==="ERR_STREAM_PREMATURE_CLOSE"&&C&&C.ended&&!C.errored&&!C.errorEmitted?U.once("end",Q).once("error",Q):Q(ct)}),c(Y,{readable:!1,writable:!0},Q)}h.exports={pipelineImpl:j,pipeline:function(...U){return j(U,g(function(Y){return z(Y[Y.length-1],"streams[stream.length - 1]"),Y.pop()}(U)))}}}),Xn=ft((l,h)=>{ot(),at(),st();var{pipeline:n}=Ni(),o=me(),{destroyer:s}=Ye(),{isNodeStream:t,isReadable:r,isWritable:e,isWebStream:i,isTransformStream:a,isWritableStream:c,isReadableStream:g}=be(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:b,ERR_MISSING_ARGS:w}}=ie(),y=Re();h.exports=function(...v){if(v.length===0)throw new w("streams");if(v.length===1)return o.from(v[0]);let N,A,V,rt,z,lt=[...v];if(typeof v[0]=="function"&&(v[0]=o.from(v[0])),typeof v[v.length-1]=="function"){let M=v.length-1;v[M]=o.from(v[M])}for(let M=0;M<v.length;++M)if(t(v[M])||i(v[M])){if(M<v.length-1&&!(r(v[M])||g(v[M])||a(v[M])))throw new b(`streams[${M}]`,lt[M],"must be readable");if(M>0&&!(e(v[M])||c(v[M])||a(v[M])))throw new b(`streams[${M}]`,lt[M],"must be writable")}let E=v[0],_=n(v,function(M){let K=rt;rt=null,K?K(M):M?z.destroy(M):!O&&!p&&z.destroy()}),p=!!(e(E)||c(E)||a(E)),O=!!(r(_)||g(_)||a(_));if(z=new o({writableObjectMode:!(E==null||!E.writableObjectMode),readableObjectMode:!(_==null||!_.readableObjectMode),writable:p,readable:O}),p){if(t(E))z._write=function(K,J,G){E.write(K,J)?G():N=G},z._final=function(K){E.end(),A=K},E.on("drain",function(){if(N){let K=N;N=null,K()}});else if(i(E)){let K=(a(E)?E.writable:E).getWriter();z._write=async function(J,G,$){try{await K.ready,K.write(J).catch(()=>{}),$()}catch(et){$(et)}},z._final=async function(J){try{await K.ready,K.close().catch(()=>{}),A=J}catch(G){J(G)}}}let M=a(_)?_.readable:_;y(M,()=>{if(A){let K=A;A=null,K()}})}if(O){if(t(_))_.on("readable",function(){if(V){let M=V;V=null,M()}}),_.on("end",function(){z.push(null)}),z._read=function(){for(;;){let M=_.read();if(M===null)return void(V=z._read);if(!z.push(M))return}};else if(i(_)){let M=(a(_)?_.readable:_).getReader();z._read=async function(){for(;;)try{let{value:K,done:J}=await M.read();if(!z.push(K))return;if(J)return void z.push(null)}catch{return}}}}return z._destroy=function(M,K){!M&&rt!==null&&(M=new d),V=null,N=null,A=null,rt===null?K(M):(rt=K,t(_)&&s(_,M))},z}}),Hs=ft((l,h)=>{ot(),at(),st();var n=globalThis.AbortController||rr().AbortController,{codes:{ERR_INVALID_ARG_VALUE:o,ERR_INVALID_ARG_TYPE:s,ERR_MISSING_ARGS:t,ERR_OUT_OF_RANGE:r},AbortError:e}=ie(),{validateAbortSignal:i,validateInteger:a,validateObject:c}=ir(),g=Vt().Symbol("kWeak"),d=Vt().Symbol("kResistStopPropagation"),{finished:b}=Re(),w=Xn(),{addAbortSignalNoValidate:y}=br(),{isWritable:v,isNodeStream:N}=be(),{deprecate:A}=ne(),{ArrayPrototypePush:V,Boolean:rt,MathFloor:z,Number:lt,NumberIsNaN:E,Promise:_,PromiseReject:p,PromiseResolve:O,PromisePrototypeThen:M,Symbol:K}=Vt(),J=K("kEmpty"),G=K("kEof");function $(j,W){if(typeof j!="function")throw new s("fn",["Function","AsyncFunction"],j);W!=null&&c(W,"options"),(W==null?void 0:W.signal)!=null&&i(W.signal,"options.signal");let U=1;(W==null?void 0:W.concurrency)!=null&&(U=z(W.concurrency));let Y=U-1;return(W==null?void 0:W.highWaterMark)!=null&&(Y=z(W.highWaterMark)),a(U,"options.concurrency",1),a(Y,"options.highWaterMark",0),Y+=U,(async function*(){let Q,nt,ut=ne().AbortSignalAny([W==null?void 0:W.signal].filter(rt)),ct=this,C=[],X={signal:ut},F=!1,dt=0;function kt(){F=!0,R()}function R(){dt-=1,Z()}function Z(){nt&&!F&&dt<U&&C.length<Y&&(nt(),nt=null)}(async function(){try{for await(let u of ct){if(F)return;if(ut.aborted)throw new e;try{if(u=j(u,X),u===J)continue;u=O(u)}catch(f){u=p(f)}dt+=1,M(u,R,kt),C.push(u),Q&&(Q(),Q=null),!F&&(C.length>=Y||dt>=U)&&await new _(f=>{nt=f})}C.push(G)}catch(u){let f=p(u);M(f,R,kt),C.push(f)}finally{F=!0,Q&&(Q(),Q=null)}})();try{for(;;){for(;C.length>0;){let u=await C[0];if(u===G)return;if(ut.aborted)throw new e;u!==J&&(yield u),C.shift(),Z()}await new _(u=>{Q=u})}}finally{F=!0,nt&&(nt(),nt=null)}}).call(this)}async function et(j,W=void 0){for await(let U of L.call(this,j,W))return!0;return!1}function L(j,W){if(typeof j!="function")throw new s("fn",["Function","AsyncFunction"],j);return $.call(this,async function(U,Y){return await j(U,Y)?U:J},W)}var it=class extends t{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};function x(j){if(j=lt(j),E(j))return 0;if(j<0)throw new r("number",">= 0",j);return j}h.exports.streamReturningOperators={asIndexedPairs:A(function(j=void 0){return j!=null&&c(j,"options"),(j==null?void 0:j.signal)!=null&&i(j.signal,"options.signal"),(async function*(){let W=0;for await(let Y of this){var U;if(j!=null&&(U=j.signal)!==null&&U!==void 0&&U.aborted)throw new e({cause:j.signal.reason});yield[W++,Y]}}).call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(j,W=void 0){return W!=null&&c(W,"options"),(W==null?void 0:W.signal)!=null&&i(W.signal,"options.signal"),j=x(j),(async function*(){var U;if(W!=null&&(U=W.signal)!==null&&U!==void 0&&U.aborted)throw new e;for await(let Q of this){var Y;if(W!=null&&(Y=W.signal)!==null&&Y!==void 0&&Y.aborted)throw new e;j--<=0&&(yield Q)}}).call(this)},filter:L,flatMap:function(j,W){let U=$.call(this,j,W);return(async function*(){for await(let Y of U)yield*Y}).call(this)},map:$,take:function(j,W=void 0){return W!=null&&c(W,"options"),(W==null?void 0:W.signal)!=null&&i(W.signal,"options.signal"),j=x(j),(async function*(){var U;if(W!=null&&(U=W.signal)!==null&&U!==void 0&&U.aborted)throw new e;for await(let Q of this){var Y;if(W!=null&&(Y=W.signal)!==null&&Y!==void 0&&Y.aborted)throw new e;if(j-- >0&&(yield Q),j<=0)return}}).call(this)},compose:function(j,W){if(W!=null&&c(W,"options"),(W==null?void 0:W.signal)!=null&&i(W.signal,"options.signal"),N(j)&&!v(j))throw new o("stream",j,"must be writable");let U=w(this,j);return W!=null&&W.signal&&y(W.signal,U),U}},h.exports.promiseReturningOperators={every:async function(j,W=void 0){if(typeof j!="function")throw new s("fn",["Function","AsyncFunction"],j);return!await et.call(this,async(...U)=>!await j(...U),W)},forEach:async function(j,W){if(typeof j!="function")throw new s("fn",["Function","AsyncFunction"],j);for await(let U of $.call(this,async function(Y,Q){return await j(Y,Q),J},W));},reduce:async function(j,W,U){var Y;if(typeof j!="function")throw new s("reducer",["Function","AsyncFunction"],j);U!=null&&c(U,"options"),(U==null?void 0:U.signal)!=null&&i(U.signal,"options.signal");let Q=arguments.length>1;if(U!=null&&(Y=U.signal)!==null&&Y!==void 0&&Y.aborted){let X=new e(void 0,{cause:U.signal.reason});throw this.once("error",()=>{}),await b(this.destroy(X)),X}let nt=new n,ut=nt.signal;if(U!=null&&U.signal){let X={once:!0,[g]:this,[d]:!0};U.signal.addEventListener("abort",()=>nt.abort(),X)}let ct=!1;try{for await(let X of this){var C;if(ct=!0,U!=null&&(C=U.signal)!==null&&C!==void 0&&C.aborted)throw new e;Q?W=await j(W,X,{signal:ut}):(W=X,Q=!0)}if(!ct&&!Q)throw new it}finally{nt.abort()}return W},toArray:async function(j){j!=null&&c(j,"options"),(j==null?void 0:j.signal)!=null&&i(j.signal,"options.signal");let W=[];for await(let Y of this){var U;if(j!=null&&(U=j.signal)!==null&&U!==void 0&&U.aborted)throw new e(void 0,{cause:j.signal.reason});V(W,Y)}return W},some:et,find:async function(j,W){for await(let U of L.call(this,j,W))return U}}}),Zn=ft((l,h)=>{ot(),at(),st();var{ArrayPrototypePop:n,Promise:o}=Vt(),{isIterable:s,isNodeStream:t,isWebStream:r}=be(),{pipelineImpl:e}=Ni(),{finished:i}=Re();to(),h.exports={finished:i,pipeline:function(...a){return new o((c,g)=>{let d,b,w=a[a.length-1];if(w&&typeof w=="object"&&!t(w)&&!s(w)&&!r(w)){let y=n(a);d=y.signal,b=y.end}e(a,(y,v)=>{y?g(y):c(v)},{signal:d,end:b})})}}}),to=ft((l,h)=>{ot(),at(),st();var{Buffer:n}=(Zt(),Lt(Xt)),{ObjectDefineProperty:o,ObjectKeys:s,ReflectApply:t}=Vt(),{promisify:{custom:r}}=ne(),{streamReturningOperators:e,promiseReturningOperators:i}=Hs(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=ie(),c=Xn(),{setDefaultHighWaterMark:g,getDefaultHighWaterMark:d}=mr(),{pipeline:b}=Ni(),{destroyer:w}=Ye(),y=Re(),v=Zn(),N=be(),A=h.exports=Mi().Stream;A.isDestroyed=N.isDestroyed,A.isDisturbed=N.isDisturbed,A.isErrored=N.isErrored,A.isReadable=N.isReadable,A.isWritable=N.isWritable,A.Readable=yr();for(let rt of s(e)){let z=function(...E){if(new.target)throw a();return A.Readable.from(t(lt,this,E))},lt=e[rt];o(z,"name",{__proto__:null,value:lt.name}),o(z,"length",{__proto__:null,value:lt.length}),o(A.Readable.prototype,rt,{__proto__:null,value:z,enumerable:!1,configurable:!0,writable:!0})}for(let rt of s(i)){let z=function(...E){if(new.target)throw a();return t(lt,this,E)},lt=i[rt];o(z,"name",{__proto__:null,value:lt.name}),o(z,"length",{__proto__:null,value:lt.length}),o(A.Readable.prototype,rt,{__proto__:null,value:z,enumerable:!1,configurable:!0,writable:!0})}A.Writable=ji(),A.Duplex=me(),A.Transform=Yn(),A.PassThrough=Jn(),A.pipeline=b;var{addAbortSignal:V}=br();A.addAbortSignal=V,A.finished=y,A.destroy=w,A.compose=c,A.setDefaultHighWaterMark=g,A.getDefaultHighWaterMark=d,o(A,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>v}),o(b,r,{__proto__:null,enumerable:!0,get:()=>v.pipeline}),o(y,r,{__proto__:null,enumerable:!0,get:()=>v.finished}),A.Stream=A,A._isUint8Array=function(rt){return rt instanceof Uint8Array},A._uint8ArrayToBuffer=function(rt){return n.from(rt.buffer,rt.byteOffset,rt.byteLength)}}),De=ft((l,h)=>{ot(),at(),st();var n=to(),o=Zn(),s=n.Readable.destroy;h.exports=n.Readable,h.exports._uint8ArrayToBuffer=n._uint8ArrayToBuffer,h.exports._isUint8Array=n._isUint8Array,h.exports.isDisturbed=n.isDisturbed,h.exports.isErrored=n.isErrored,h.exports.isReadable=n.isReadable,h.exports.Readable=n.Readable,h.exports.Writable=n.Writable,h.exports.Duplex=n.Duplex,h.exports.Transform=n.Transform,h.exports.PassThrough=n.PassThrough,h.exports.addAbortSignal=n.addAbortSignal,h.exports.finished=n.finished,h.exports.destroy=n.destroy,h.exports.destroy=s,h.exports.pipeline=n.pipeline,h.exports.compose=n.compose,Object.defineProperty(n,"promises",{configurable:!0,enumerable:!0,get:()=>o}),h.exports.Stream=n.Stream,h.exports.default=h.exports}),Vs=ft((l,h)=>{ot(),at(),st(),typeof Object.create=="function"?h.exports=function(n,o){o&&(n.super_=o,n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:h.exports=function(n,o){if(o){n.super_=o;var s=function(){};s.prototype=o.prototype,n.prototype=new s,n.prototype.constructor=n}}}),zs=ft((l,h)=>{ot(),at(),st();var{Buffer:n}=(Zt(),Lt(Xt)),o=Symbol.for("BufferList");function s(t){if(!(this instanceof s))return new s(t);s._init.call(this,t)}s._init=function(t){Object.defineProperty(this,o,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},s.prototype._new=function(t){return new s(t)},s.prototype._offset=function(t){if(t===0)return[0,0];let r=0;for(let e=0;e<this._bufs.length;e++){let i=r+this._bufs[e].length;if(t<i||e===this._bufs.length-1)return[e,t-r];r=i}},s.prototype._reverseOffset=function(t){let r=t[0],e=t[1];for(let i=0;i<r;i++)e+=this._bufs[i].length;return e},s.prototype.get=function(t){if(t>this.length||t<0)return;let r=this._offset(t);return this._bufs[r[0]][r[1]]},s.prototype.slice=function(t,r){return typeof t=="number"&&t<0&&(t+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,t,r)},s.prototype.copy=function(t,r,e,i){if((typeof e!="number"||e<0)&&(e=0),(typeof i!="number"||i>this.length)&&(i=this.length),e>=this.length||i<=0)return t||n.alloc(0);let a=!!t,c=this._offset(e),g=i-e,d=g,b=a&&r||0,w=c[1];if(e===0&&i===this.length){if(!a)return this._bufs.length===1?this._bufs[0]:n.concat(this._bufs,this.length);for(let y=0;y<this._bufs.length;y++)this._bufs[y].copy(t,b),b+=this._bufs[y].length;return t}if(d<=this._bufs[c[0]].length-w)return a?this._bufs[c[0]].copy(t,r,w,w+d):this._bufs[c[0]].slice(w,w+d);a||(t=n.allocUnsafe(g));for(let y=c[0];y<this._bufs.length;y++){let v=this._bufs[y].length-w;if(!(d>v)){this._bufs[y].copy(t,b,w,w+d),b+=v;break}this._bufs[y].copy(t,b,w),b+=v,d-=v,w&&(w=0)}return t.length>b?t.slice(0,b):t},s.prototype.shallowSlice=function(t,r){if(t=t||0,r=typeof r!="number"?this.length:r,t<0&&(t+=this.length),r<0&&(r+=this.length),t===r)return this._new();let e=this._offset(t),i=this._offset(r),a=this._bufs.slice(e[0],i[0]+1);return i[1]===0?a.pop():a[a.length-1]=a[a.length-1].slice(0,i[1]),e[1]!==0&&(a[0]=a[0].slice(e[1])),this._new(a)},s.prototype.toString=function(t,r,e){return this.slice(r,e).toString(t)},s.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;for(;this._bufs.length;){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},s.prototype.duplicate=function(){let t=this._new();for(let r=0;r<this._bufs.length;r++)t.append(this._bufs[r]);return t},s.prototype.append=function(t){if(t==null)return this;if(t.buffer)this._appendBuffer(n.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let r=0;r<t.length;r++)this.append(t[r]);else if(this._isBufferList(t))for(let r=0;r<t._bufs.length;r++)this.append(t._bufs[r]);else typeof t=="number"&&(t=t.toString()),this._appendBuffer(n.from(t));return this},s.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},s.prototype.indexOf=function(t,r,e){if(e===void 0&&typeof r=="string"&&(e=r,r=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=n.from([t]):typeof t=="string"?t=n.from(t,e):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=n.from(t.buffer,t.byteOffset,t.byteLength):n.isBuffer(t)||(t=n.from(t)),r=Number(r||0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),t.length===0)return r>this.length?this.length:r;let i=this._offset(r),a=i[0],c=i[1];for(;a<this._bufs.length;a++){let g=this._bufs[a];for(;c<g.length;)if(g.length-c>=t.length){let d=g.indexOf(t,c);if(d!==-1)return this._reverseOffset([a,d]);c=g.length-t.length+1}else{let d=this._reverseOffset([a,c]);if(this._match(d,t))return d;c++}c=0}return-1},s.prototype._match=function(t,r){if(this.length-t<r.length)return!1;for(let e=0;e<r.length;e++)if(this.get(t+e)!==r[e])return!1;return!0},function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let r in t)(function(e){s.prototype[e]=t[e]===null?function(i,a){return this.slice(i,i+a)[e](0,a)}:function(i=0){return this.slice(i,i+t[e])[e](0)}})(r)}(),s.prototype._isBufferList=function(t){return t instanceof s||s.isBufferList(t)},s.isBufferList=function(t){return t!=null&&t[o]},h.exports=s}),Ks=ft((l,h)=>{ot(),at(),st();var n=De().Duplex,o=Vs(),s=zs();function t(r){if(!(this instanceof t))return new t(r);if(typeof r=="function"){this._callback=r;let e=(function(i){this._callback&&(this._callback(i),this._callback=null)}).bind(this);this.on("pipe",function(i){i.on("error",e)}),this.on("unpipe",function(i){i.removeListener("error",e)}),r=null}s._init.call(this,r),n.call(this)}o(t,n),Object.assign(t.prototype,s.prototype),t.prototype._new=function(r){return new t(r)},t.prototype._write=function(r,e,i){this._appendBuffer(r),typeof i=="function"&&i()},t.prototype._read=function(r){if(!this.length)return this.push(null);r=Math.min(r,this.length),this.push(this.slice(0,r)),this.consume(r)},t.prototype.end=function(r){n.prototype.end.call(this,r),this._callback&&(this._callback(null,this.slice()),this._callback=null)},t.prototype._destroy=function(r,e){this._bufs.length=0,this.length=0,e(r)},t.prototype._isBufferList=function(r){return r instanceof t||r instanceof s||t.isBufferList(r)},t.isBufferList=s.isBufferList,h.exports=t,h.exports.BufferListStream=t,h.exports.BufferList=s}),Gs=ft((l,h)=>{ot(),at(),st(),h.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}}),eo=ft((l,h)=>{ot(),at(),st();var n=h.exports,{Buffer:o}=(Zt(),Lt(Xt));n.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},n.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},n.requiredHeaderFlagsErrors={};for(let t in n.requiredHeaderFlags){let r=n.requiredHeaderFlags[t];n.requiredHeaderFlagsErrors[t]="Invalid header flag bits, must be 0x"+r.toString(16)+" for "+n.types[t]+" packet"}n.codes={};for(let t in n.types){let r=n.types[t];n.codes[r]=t}n.CMD_SHIFT=4,n.CMD_MASK=240,n.DUP_MASK=8,n.QOS_MASK=3,n.QOS_SHIFT=1,n.RETAIN_MASK=1,n.VARBYTEINT_MASK=127,n.VARBYTEINT_FIN_MASK=128,n.VARBYTEINT_MAX=268435455,n.SESSIONPRESENT_MASK=1,n.SESSIONPRESENT_HEADER=o.from([n.SESSIONPRESENT_MASK]),n.CONNACK_HEADER=o.from([n.codes.connack<<n.CMD_SHIFT]),n.USERNAME_MASK=128,n.PASSWORD_MASK=64,n.WILL_RETAIN_MASK=32,n.WILL_QOS_MASK=24,n.WILL_QOS_SHIFT=3,n.WILL_FLAG_MASK=4,n.CLEAN_SESSION_MASK=2,n.CONNECT_HEADER=o.from([n.codes.connect<<n.CMD_SHIFT]),n.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},n.propertiesCodes={};for(let t in n.properties){let r=n.properties[t];n.propertiesCodes[r]=t}function s(t){return[0,1,2].map(r=>[0,1].map(e=>[0,1].map(i=>{let a=o.alloc(1);return a.writeUInt8(n.codes[t]<<n.CMD_SHIFT|(e?n.DUP_MASK:0)|r<<n.QOS_SHIFT|i,0,!0),a})))}n.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},n.PUBLISH_HEADER=s("publish"),n.SUBSCRIBE_HEADER=s("subscribe"),n.SUBSCRIBE_OPTIONS_QOS_MASK=3,n.SUBSCRIBE_OPTIONS_NL_MASK=1,n.SUBSCRIBE_OPTIONS_NL_SHIFT=2,n.SUBSCRIBE_OPTIONS_RAP_MASK=1,n.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,n.SUBSCRIBE_OPTIONS_RH_MASK=3,n.SUBSCRIBE_OPTIONS_RH_SHIFT=4,n.SUBSCRIBE_OPTIONS_RH=[0,16,32],n.SUBSCRIBE_OPTIONS_NL=4,n.SUBSCRIBE_OPTIONS_RAP=8,n.SUBSCRIBE_OPTIONS_QOS=[0,1,2],n.UNSUBSCRIBE_HEADER=s("unsubscribe"),n.ACKS={unsuback:s("unsuback"),puback:s("puback"),pubcomp:s("pubcomp"),pubrel:s("pubrel"),pubrec:s("pubrec")},n.SUBACK_HEADER=o.from([n.codes.suback<<n.CMD_SHIFT]),n.VERSION3=o.from([3]),n.VERSION4=o.from([4]),n.VERSION5=o.from([5]),n.VERSION131=o.from([131]),n.VERSION132=o.from([132]),n.QOS=[0,1,2].map(t=>o.from([t])),n.EMPTY={pingreq:o.from([n.codes.pingreq<<4,0]),pingresp:o.from([n.codes.pingresp<<4,0]),disconnect:o.from([n.codes.disconnect<<4,0])},n.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},n.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},n.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},n.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},n.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},n.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Qs=ft((l,h)=>{ot(),at(),st();var n=1e3,o=6e4,s=60*o,t=24*s,r=7*t,e=365.25*t;function i(a,c,g,d){var b=c>=1.5*g;return Math.round(a/g)+" "+d+(b?"s":"")}h.exports=function(a,c){c=c||{};var g=typeof a;if(g==="string"&&a.length>0)return function(d){if(d=String(d),!(d.length>100)){var b=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(b){var w=parseFloat(b[1]);switch((b[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return w*e;case"weeks":case"week":case"w":return w*r;case"days":case"day":case"d":return w*t;case"hours":case"hour":case"hrs":case"hr":case"h":return w*s;case"minutes":case"minute":case"mins":case"min":case"m":return w*o;case"seconds":case"second":case"secs":case"sec":case"s":return w*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return w;default:return}}}}(a);if(g==="number"&&isFinite(a))return c.long?function(d){var b=Math.abs(d);return b>=t?i(d,b,t,"day"):b>=s?i(d,b,s,"hour"):b>=o?i(d,b,o,"minute"):b>=n?i(d,b,n,"second"):d+" ms"}(a):function(d){var b=Math.abs(d);return b>=t?Math.round(d/t)+"d":b>=s?Math.round(d/s)+"h":b>=o?Math.round(d/o)+"m":b>=n?Math.round(d/n)+"s":d+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}}),Ys=ft((l,h)=>{ot(),at(),st(),h.exports=function(n){function o(r){let e,i,a,c=null;function g(...d){if(!g.enabled)return;let b=g,w=Number(new Date),y=w-(e||w);b.diff=y,b.prev=e,b.curr=w,e=w,d[0]=o.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");let v=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,(N,A)=>{if(N==="%%")return"%";v++;let V=o.formatters[A];if(typeof V=="function"){let rt=d[v];N=V.call(b,rt),d.splice(v,1),v--}return N}),o.formatArgs.call(b,d),(b.log||o.log).apply(b,d)}return g.namespace=r,g.useColors=o.useColors(),g.color=o.selectColor(r),g.extend=s,g.destroy=o.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>c!==null?c:(i!==o.namespaces&&(i=o.namespaces,a=o.enabled(r)),a),set:d=>{c=d}}),typeof o.init=="function"&&o.init(g),g}function s(r,e){let i=o(this.namespace+(typeof e>"u"?":":e)+r);return i.log=this.log,i}function t(r,e){let i=0,a=0,c=-1,g=0;for(;i<r.length;)if(a<e.length&&(e[a]===r[i]||e[a]==="*"))e[a]==="*"?(c=a,g=i,a++):(i++,a++);else{if(c===-1)return!1;a=c+1,g++,i=g}for(;a<e.length&&e[a]==="*";)a++;return a===e.length}return o.debug=o,o.default=o,o.coerce=function(r){return r instanceof Error?r.stack||r.message:r},o.disable=function(){let r=[...o.names,...o.skips.map(e=>"-"+e)].join(",");return o.enable(""),r},o.enable=function(r){o.save(r),o.namespaces=r,o.names=[],o.skips=[];let e=(typeof r=="string"?r:"").trim().replace(" ",",").split(",").filter(Boolean);for(let i of e)i[0]==="-"?o.skips.push(i.slice(1)):o.names.push(i)},o.enabled=function(r){for(let e of o.skips)if(t(r,e))return!1;for(let e of o.names)if(t(r,e))return!0;return!1},o.humanize=Qs(),o.destroy=function(){},Object.keys(n).forEach(r=>{o[r]=n[r]}),o.names=[],o.skips=[],o.formatters={},o.selectColor=function(r){let e=0;for(let i=0;i<r.length;i++)e=(e<<5)-e+r.charCodeAt(i),e|=0;return o.colors[Math.abs(e)%o.colors.length]},o.enable(o.load()),o}}),ye=ft((l,h)=>{ot(),at(),st(),l.formatArgs=function(o){if(o[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+o[0]+(this.useColors?"%c ":" ")+"+"+h.exports.humanize(this.diff),!this.useColors)return;let s="color: "+this.color;o.splice(1,0,s,"color: inherit");let t=0,r=0;o[0].replace(/%[a-zA-Z%]/g,e=>{e!=="%%"&&(t++,e==="%c"&&(r=t))}),o.splice(r,0,s)},l.save=function(o){try{o?l.storage.setItem("debug",o):l.storage.removeItem("debug")}catch{}},l.load=function(){let o;try{o=l.storage.getItem("debug")}catch{}return!o&&typeof Ft<"u"&&"env"in Ft&&(o=Ft.env.DEBUG),o},l.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let o;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(o=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(o[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},l.storage=function(){try{return localStorage}catch{}}(),l.destroy=(()=>{let o=!1;return()=>{o||(o=!0)}})(),l.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],l.log=console.debug||console.log||(()=>{}),h.exports=Ys()(l);var{formatters:n}=h.exports;n.j=function(o){try{return JSON.stringify(o)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}}),Js=ft((l,h)=>{ot(),at(),st();var n=Ks(),{EventEmitter:o}=(Ue(),Lt(Ce)),s=Gs(),t=eo(),r=ye()("mqtt-packet:parser");h.exports=class rn extends o{constructor(){super(),this.parser=this.constructor.parser}static parser(i){return this instanceof rn?(this.settings=i||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new rn().parser(i)}_resetState(){r("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new s,this.error=null,this._list=n(),this._stateCounter=0}parse(i){for(this.error&&this._resetState(),this._list.append(i),r("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,r("parse: state complete. _stateCounter is now: %d",this._stateCounter),r("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return r("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let i=this._list.readUInt8(0),a=i>>t.CMD_SHIFT;this.packet.cmd=t.types[a];let c=15&i,g=t.requiredHeaderFlags[a];return g!=null&&c!==g?this._emitError(new Error(t.requiredHeaderFlagsErrors[a])):(this.packet.retain=!!(i&t.RETAIN_MASK),this.packet.qos=i>>t.QOS_SHIFT&t.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=!!(i&t.DUP_MASK),r("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let i=this._parseVarByteNum(!0);return i&&(this.packet.length=i.value,this._list.consume(i.bytes)),r("_parseLength %d",i.value),!!i}_parsePayload(){r("_parsePayload: payload %O",this._list);let i=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}i=!0}return r("_parsePayload complete result: %s",i),i}_parseConnect(){r("_parseConnect");let i,a,c,g,d={},b=this.packet,w=this._parseString();if(w===null)return this._emitError(new Error("Cannot parse protocolId"));if(w!=="MQTT"&&w!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(b.protocolId=w,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(b.protocolVersion=this._list.readUInt8(this._pos),b.protocolVersion>=128&&(b.bridgeMode=!0,b.protocolVersion=b.protocolVersion-128),b.protocolVersion!==3&&b.protocolVersion!==4&&b.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(1&this._list.readUInt8(this._pos))return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));d.username=this._list.readUInt8(this._pos)&t.USERNAME_MASK,d.password=this._list.readUInt8(this._pos)&t.PASSWORD_MASK,d.will=this._list.readUInt8(this._pos)&t.WILL_FLAG_MASK;let y=!!(this._list.readUInt8(this._pos)&t.WILL_RETAIN_MASK),v=(this._list.readUInt8(this._pos)&t.WILL_QOS_MASK)>>t.WILL_QOS_SHIFT;if(d.will)b.will={},b.will.retain=y,b.will.qos=v;else{if(y)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(v)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(b.clean=!!(this._list.readUInt8(this._pos)&t.CLEAN_SESSION_MASK),this._pos++,b.keepalive=this._parseNum(),b.keepalive===-1)return this._emitError(new Error("Packet too short"));if(b.protocolVersion===5){let A=this._parseProperties();Object.getOwnPropertyNames(A).length&&(b.properties=A)}let N=this._parseString();if(N===null)return this._emitError(new Error("Packet too short"));if(b.clientId=N,r("_parseConnect: packet.clientId: %s",b.clientId),d.will){if(b.protocolVersion===5){let A=this._parseProperties();Object.getOwnPropertyNames(A).length&&(b.will.properties=A)}if(i=this._parseString(),i===null)return this._emitError(new Error("Cannot parse will topic"));if(b.will.topic=i,r("_parseConnect: packet.will.topic: %s",b.will.topic),a=this._parseBuffer(),a===null)return this._emitError(new Error("Cannot parse will payload"));b.will.payload=a,r("_parseConnect: packet.will.paylaod: %s",b.will.payload)}if(d.username){if(g=this._parseString(),g===null)return this._emitError(new Error("Cannot parse username"));b.username=g,r("_parseConnect: packet.username: %s",b.username)}if(d.password){if(c=this._parseBuffer(),c===null)return this._emitError(new Error("Cannot parse password"));b.password=c}return this.settings=b,r("_parseConnect: complete"),b}_parseConnack(){r("_parseConnack");let i=this.packet;if(this._list.length<1)return null;let a=this._list.readUInt8(this._pos++);if(a>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(i.sessionPresent=!!(a&t.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?i.reasonCode=this._list.readUInt8(this._pos++):i.reasonCode=0;else{if(this._list.length<2)return null;i.returnCode=this._list.readUInt8(this._pos++)}if(i.returnCode===-1||i.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(i.properties=c)}r("_parseConnack: complete")}_parsePublish(){r("_parsePublish");let i=this.packet;if(i.topic=this._parseString(),i.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(i.qos>0)||this._parseMessageId()){if(this.settings.protocolVersion===5){let a=this._parseProperties();Object.getOwnPropertyNames(a).length&&(i.properties=a)}i.payload=this._list.slice(this._pos,i.length),r("_parsePublish: payload from buffer list: %o",i.payload)}}_parseSubscribe(){r("_parseSubscribe");let i,a,c,g,d,b,w,y=this.packet;if(y.subscriptions=[],this._parseMessageId()){if(this.settings.protocolVersion===5){let v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(y.properties=v)}if(y.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<y.length;){if(i=this._parseString(),i===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=y.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(a=this._parseByte(),this.settings.protocolVersion===5){if(192&a)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(252&a)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(c=a&t.SUBSCRIBE_OPTIONS_QOS_MASK,c>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(b=!!(a>>t.SUBSCRIBE_OPTIONS_NL_SHIFT&t.SUBSCRIBE_OPTIONS_NL_MASK),d=!!(a>>t.SUBSCRIBE_OPTIONS_RAP_SHIFT&t.SUBSCRIBE_OPTIONS_RAP_MASK),g=a>>t.SUBSCRIBE_OPTIONS_RH_SHIFT&t.SUBSCRIBE_OPTIONS_RH_MASK,g>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));w={topic:i,qos:c},this.settings.protocolVersion===5?(w.nl=b,w.rap=d,w.rh=g):this.settings.bridgeMode&&(w.rh=0,w.rap=!0,w.nl=!0),r("_parseSubscribe: push subscription `%s` to subscription",w),y.subscriptions.push(w)}}}_parseSuback(){r("_parseSuback");let i=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(this.settings.protocolVersion===5){let a=this._parseProperties();Object.getOwnPropertyNames(a).length&&(i.properties=a)}if(i.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let a=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!t.MQTT5_SUBACK_CODES[a])return this._emitError(new Error("Invalid suback code"))}else if(a>2&&a!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(a)}}}_parseUnsubscribe(){r("_parseUnsubscribe");let i=this.packet;if(i.unsubscriptions=[],this._parseMessageId()){if(this.settings.protocolVersion===5){let a=this._parseProperties();Object.getOwnPropertyNames(a).length&&(i.properties=a)}if(i.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<i.length;){let a=this._parseString();if(a===null)return this._emitError(new Error("Cannot parse topic"));r("_parseUnsubscribe: push topic `%s` to unsubscriptions",a),i.unsubscriptions.push(a)}}}_parseUnsuback(){r("_parseUnsuback");let i=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&i.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(i.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let a=this._parseProperties();for(Object.getOwnPropertyNames(a).length&&(i.properties=a),i.granted=[];this._pos<this.packet.length;){let c=this._list.readUInt8(this._pos++);if(!t.MQTT5_UNSUBACK_CODES[c])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(c)}}}_parseConfirmation(){r("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let i=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(i.length>2){switch(i.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!t.MQTT5_PUBACK_PUBREC_CODES[i.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!t.MQTT5_PUBREL_PUBCOMP_CODES[i.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"))}r("_parseConfirmation: packet.reasonCode `%d`",i.reasonCode)}else i.reasonCode=0;if(i.length>3){let a=this._parseProperties();Object.getOwnPropertyNames(a).length&&(i.properties=a)}}return!0}_parseDisconnect(){let i=this.packet;if(r("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(i.reasonCode=this._parseByte(),t.MQTT5_DISCONNECT_CODES[i.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):i.reasonCode=0;let a=this._parseProperties();Object.getOwnPropertyNames(a).length&&(i.properties=a)}return r("_parseDisconnect result: true"),!0}_parseAuth(){r("_parseAuth");let i=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(i.reasonCode=this._parseByte(),!t.MQTT5_AUTH_CODES[i.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let a=this._parseProperties();return Object.getOwnPropertyNames(a).length&&(i.properties=a),r("_parseAuth: result: true"),!0}_parseMessageId(){let i=this.packet;return i.messageId=this._parseNum(),i.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(r("_parseMessageId: packet.messageId %d",i.messageId),!0)}_parseString(i){let a=this._parseNum(),c=a+this._pos;if(a===-1||c>this._list.length||c>this.packet.length)return null;let g=this._list.toString("utf8",this._pos,c);return this._pos+=a,r("_parseString: result: %s",g),g}_parseStringPair(){return r("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let i=this._parseNum(),a=i+this._pos;if(i===-1||a>this._list.length||a>this.packet.length)return null;let c=this._list.slice(this._pos,a);return this._pos+=i,r("_parseBuffer: result: %o",c),c}_parseNum(){if(this._list.length-this._pos<2)return-1;let i=this._list.readUInt16BE(this._pos);return this._pos+=2,r("_parseNum: result: %s",i),i}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let i=this._list.readUInt32BE(this._pos);return this._pos+=4,r("_parse4ByteNum: result: %s",i),i}_parseVarByteNum(i){r("_parseVarByteNum");let a,c=0,g=1,d=0,b=!1,w=this._pos?this._pos:0;for(;c<4&&w+c<this._list.length;){if(a=this._list.readUInt8(w+c++),d+=g*(a&t.VARBYTEINT_MASK),g*=128,!(a&t.VARBYTEINT_FIN_MASK)){b=!0;break}if(this._list.length<=c)break}return!b&&c===4&&this._list.length>=c&&this._emitError(new Error("Invalid variable byte integer")),w&&(this._pos+=c),b=!!b&&(i?{bytes:c,value:d}:d),r("_parseVarByteNum: result: %o",b),b}_parseByte(){let i;return this._pos<this._list.length&&(i=this._list.readUInt8(this._pos),this._pos++),r("_parseByte: result: %o",i),i}_parseByType(i){switch(r("_parseByType: type: %s",i),i){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){r("_parseProperties");let i=this._parseVarByteNum(),a=this._pos+i,c={};for(;this._pos<a;){let g=this._parseByte();if(!g)return this._emitError(new Error("Cannot parse property code type")),!1;let d=t.propertiesCodes[g];if(!d)return this._emitError(new Error("Unknown property")),!1;if(d!=="userProperties")c[d]?(Array.isArray(c[d])||(c[d]=[c[d]]),c[d].push(this._parseByType(t.propertiesTypes[d]))):c[d]=this._parseByType(t.propertiesTypes[d]);else{c[d]||(c[d]=Object.create(null));let b=this._parseByType(t.propertiesTypes[d]);if(c[d][b.name])if(Array.isArray(c[d][b.name]))c[d][b.name].push(b.value);else{let w=c[d][b.name];c[d][b.name]=[w],c[d][b.name].push(b.value)}else c[d][b.name]=b.value}}return c}_newPacket(){return r("_newPacket"),this.packet&&(this._list.consume(this.packet.length),r("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),r("_newPacket: new packet"),this.packet=new s,this._pos=0,!0}_emitError(i){r("_emitError",i),this.error=i,this.emit("error",i)}}}),Xs=ft((l,h)=>{ot(),at(),st();var{Buffer:n}=(Zt(),Lt(Xt)),o={},s=n.isBuffer(n.from([1,2]).subarray(0,1));function t(r){let e=n.allocUnsafe(2);return e.writeUInt8(r>>8,0),e.writeUInt8(255&r,1),e}h.exports={cache:o,generateCache:function(){for(let r=0;r<65536;r++)o[r]=t(r)},generateNumber:t,genBufVariableByteInt:function(r){let e=0,i=0,a=n.allocUnsafe(4);do e=r%128|0,(r=r/128|0)>0&&(e|=128),a.writeUInt8(e,i++);while(r>0&&i<4);return r>0&&(i=0),s?a.subarray(0,i):a.slice(0,i)},generate4ByteBuffer:function(r){let e=n.allocUnsafe(4);return e.writeUInt32BE(r,0),e}}}),Zs=ft((l,h)=>{ot(),at(),st(),typeof Ft>"u"||!Ft.version||Ft.version.indexOf("v0.")===0||Ft.version.indexOf("v1.")===0&&Ft.version.indexOf("v1.8.")!==0?h.exports={nextTick:function(n,o,s,t){if(typeof n!="function")throw new TypeError('"callback" argument must be a function');var r,e,i=arguments.length;switch(i){case 0:case 1:return Ft.nextTick(n);case 2:return Ft.nextTick(function(){n.call(null,o)});case 3:return Ft.nextTick(function(){n.call(null,o,s)});case 4:return Ft.nextTick(function(){n.call(null,o,s,t)});default:for(r=new Array(i-1),e=0;e<r.length;)r[e++]=arguments[e];return Ft.nextTick(function(){n.apply(null,r)})}}}:h.exports=Ft}),ro=ft((l,h)=>{ot(),at(),st();var n=eo(),{Buffer:o}=(Zt(),Lt(Xt)),s=o.allocUnsafe(0),t=o.from([0]),r=Xs(),e=Zs().nextTick,i=ye()("mqtt-packet:writeToStream"),a=r.cache,c=r.generateNumber,g=r.generateCache,d=r.genBufVariableByteInt,b=r.generate4ByteBuffer,w=lt,y=!0;function v($,et,L){switch(i("generate called"),et.cork&&(et.cork(),e(N,et)),y&&(y=!1,g()),i("generate: packet.cmd: %s",$.cmd),$.cmd){case"connect":return function(it,x){let j=it||{},W=j.protocolId||"MQTT",U=j.protocolVersion||4,Y=j.will,Q=j.clean,nt=j.keepalive||0,ut=j.clientId||"",ct=j.username,C=j.password,X=j.properties;Q===void 0&&(Q=!0);let F,dt,kt=0;if(typeof W!="string"&&!o.isBuffer(W))return x.destroy(new Error("Invalid protocolId")),!1;if(kt+=W.length+2,U!==3&&U!==4&&U!==5)return x.destroy(new Error("Invalid protocol version")),!1;if(kt+=1,(typeof ut=="string"||o.isBuffer(ut))&&(ut||U>=4)&&(ut||Q))kt+=o.byteLength(ut)+2;else{if(U<4)return x.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(1*Q==0)return x.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof nt!="number"||nt<0||nt>65535||nt%1!=0)return x.destroy(new Error("Invalid keepalive")),!1;if(kt+=2,kt+=1,U===5){if(F=p(x,X),!F)return!1;kt+=F.length}if(Y){if(typeof Y!="object")return x.destroy(new Error("Invalid will")),!1;if(!Y.topic||typeof Y.topic!="string")return x.destroy(new Error("Invalid will topic")),!1;if(kt+=o.byteLength(Y.topic)+2,kt+=2,Y.payload){if(!(Y.payload.length>=0))return x.destroy(new Error("Invalid will payload")),!1;typeof Y.payload=="string"?kt+=o.byteLength(Y.payload):kt+=Y.payload.length}if(dt={},U===5){if(dt=p(x,Y.properties),!dt)return!1;kt+=dt.length}}let R=!1;if(ct!=null){if(!G(ct))return x.destroy(new Error("Invalid username")),!1;R=!0,kt+=o.byteLength(ct)+2}if(C!=null){if(!R)return x.destroy(new Error("Username is required to use password")),!1;if(!G(C))return x.destroy(new Error("Invalid password")),!1;kt+=J(C)+2}x.write(n.CONNECT_HEADER),V(x,kt),_(x,W),j.bridgeMode&&(U+=128),x.write(U===131?n.VERSION131:U===132?n.VERSION132:U===4?n.VERSION4:U===5?n.VERSION5:n.VERSION3);let Z=0;return Z|=ct!=null?n.USERNAME_MASK:0,Z|=C!=null?n.PASSWORD_MASK:0,Z|=Y&&Y.retain?n.WILL_RETAIN_MASK:0,Z|=Y&&Y.qos?Y.qos<<n.WILL_QOS_SHIFT:0,Z|=Y?n.WILL_FLAG_MASK:0,Z|=Q?n.CLEAN_SESSION_MASK:0,x.write(o.from([Z])),w(x,nt),U===5&&F.write(),_(x,ut),Y&&(U===5&&dt.write(),rt(x,Y.topic),_(x,Y.payload)),ct!=null&&_(x,ct),C!=null&&_(x,C),!0}($,et);case"connack":return function(it,x,j){let W=j?j.protocolVersion:4,U=it||{},Y=W===5?U.reasonCode:U.returnCode,Q=U.properties,nt=2;if(typeof Y!="number")return x.destroy(new Error("Invalid return code")),!1;let ut=null;if(W===5){if(ut=p(x,Q),!ut)return!1;nt+=ut.length}return x.write(n.CONNACK_HEADER),V(x,nt),x.write(U.sessionPresent?n.SESSIONPRESENT_HEADER:t),x.write(o.from([Y])),ut==null||ut.write(),!0}($,et,L);case"publish":return function(it,x,j){i("publish: packet: %o",it);let W=j?j.protocolVersion:4,U=it||{},Y=U.qos||0,Q=U.retain?n.RETAIN_MASK:0,nt=U.topic,ut=U.payload||s,ct=U.messageId,C=U.properties,X=0;if(typeof nt=="string")X+=o.byteLength(nt)+2;else{if(!o.isBuffer(nt))return x.destroy(new Error("Invalid topic")),!1;X+=nt.length+2}if(o.isBuffer(ut)?X+=ut.length:X+=o.byteLength(ut),Y&&typeof ct!="number")return x.destroy(new Error("Invalid messageId")),!1;Y&&(X+=2);let F=null;if(W===5){if(F=p(x,C),!F)return!1;X+=F.length}return x.write(n.PUBLISH_HEADER[Y][U.dup?1:0][Q?1:0]),V(x,X),w(x,J(nt)),x.write(nt),Y>0&&w(x,ct),F==null||F.write(),i("publish: payload: %o",ut),x.write(ut)}($,et,L);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(it,x,j){let W=j?j.protocolVersion:4,U=it||{},Y=U.cmd||"puback",Q=U.messageId,nt=U.dup&&Y==="pubrel"?n.DUP_MASK:0,ut=0,ct=U.reasonCode,C=U.properties,X=W===5?3:2;if(Y==="pubrel"&&(ut=1),typeof Q!="number")return x.destroy(new Error("Invalid messageId")),!1;let F=null;if(W===5&&typeof C=="object"){if(F=O(x,C,j,X),!F)return!1;X+=F.length}return x.write(n.ACKS[Y][ut][nt][0]),X===3&&(X+=ct!==0?1:-1),V(x,X),w(x,Q),W===5&&X!==2&&x.write(o.from([ct])),F!==null?F.write():X===4&&x.write(o.from([0])),!0}($,et,L);case"subscribe":return function(it,x,j){i("subscribe: packet: ");let W=j?j.protocolVersion:4,U=it||{},Y=U.dup?n.DUP_MASK:0,Q=U.messageId,nt=U.subscriptions,ut=U.properties,ct=0;if(typeof Q!="number")return x.destroy(new Error("Invalid messageId")),!1;ct+=2;let C=null;if(W===5){if(C=p(x,ut),!C)return!1;ct+=C.length}if(typeof nt!="object"||!nt.length)return x.destroy(new Error("Invalid subscriptions")),!1;for(let F=0;F<nt.length;F+=1){let dt=nt[F].topic,kt=nt[F].qos;if(typeof dt!="string")return x.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof kt!="number")return x.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(W===5){if(typeof(nt[F].nl||!1)!="boolean")return x.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(nt[F].rap||!1)!="boolean")return x.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let R=nt[F].rh||0;if(typeof R!="number"||R>2)return x.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}ct+=o.byteLength(dt)+2+1}i("subscribe: writing to stream: %o",n.SUBSCRIBE_HEADER),x.write(n.SUBSCRIBE_HEADER[1][Y?1:0][0]),V(x,ct),w(x,Q),C!==null&&C.write();let X=!0;for(let F of nt){let dt,kt=F.topic,R=F.qos,Z=+F.nl,u=+F.rap,f=F.rh;rt(x,kt),dt=n.SUBSCRIBE_OPTIONS_QOS[R],W===5&&(dt|=Z?n.SUBSCRIBE_OPTIONS_NL:0,dt|=u?n.SUBSCRIBE_OPTIONS_RAP:0,dt|=f?n.SUBSCRIBE_OPTIONS_RH[f]:0),X=x.write(o.from([dt]))}return X}($,et,L);case"suback":return function(it,x,j){let W=j?j.protocolVersion:4,U=it||{},Y=U.messageId,Q=U.granted,nt=U.properties,ut=0;if(typeof Y!="number")return x.destroy(new Error("Invalid messageId")),!1;if(ut+=2,typeof Q!="object"||!Q.length)return x.destroy(new Error("Invalid qos vector")),!1;for(let C=0;C<Q.length;C+=1){if(typeof Q[C]!="number")return x.destroy(new Error("Invalid qos vector")),!1;ut+=1}let ct=null;if(W===5){if(ct=O(x,nt,j,ut),!ct)return!1;ut+=ct.length}return x.write(n.SUBACK_HEADER),V(x,ut),w(x,Y),ct!==null&&ct.write(),x.write(o.from(Q))}($,et,L);case"unsubscribe":return function(it,x,j){let W=j?j.protocolVersion:4,U=it||{},Y=U.messageId,Q=U.dup?n.DUP_MASK:0,nt=U.unsubscriptions,ut=U.properties,ct=0;if(typeof Y!="number")return x.destroy(new Error("Invalid messageId")),!1;if(ct+=2,typeof nt!="object"||!nt.length)return x.destroy(new Error("Invalid unsubscriptions")),!1;for(let F=0;F<nt.length;F+=1){if(typeof nt[F]!="string")return x.destroy(new Error("Invalid unsubscriptions")),!1;ct+=o.byteLength(nt[F])+2}let C=null;if(W===5){if(C=p(x,ut),!C)return!1;ct+=C.length}x.write(n.UNSUBSCRIBE_HEADER[1][Q?1:0][0]),V(x,ct),w(x,Y),C!==null&&C.write();let X=!0;for(let F=0;F<nt.length;F++)X=rt(x,nt[F]);return X}($,et,L);case"unsuback":return function(it,x,j){let W=j?j.protocolVersion:4,U=it||{},Y=U.messageId,Q=U.dup?n.DUP_MASK:0,nt=U.granted,ut=U.properties,ct=U.cmd,C=0,X=2;if(typeof Y!="number")return x.destroy(new Error("Invalid messageId")),!1;if(W===5){if(typeof nt!="object"||!nt.length)return x.destroy(new Error("Invalid qos vector")),!1;for(let dt=0;dt<nt.length;dt+=1){if(typeof nt[dt]!="number")return x.destroy(new Error("Invalid qos vector")),!1;X+=1}}let F=null;if(W===5){if(F=O(x,ut,j,X),!F)return!1;X+=F.length}return x.write(n.ACKS[ct][C][Q][0]),V(x,X),w(x,Y),F!==null&&F.write(),W===5&&x.write(o.from(nt)),!0}($,et,L);case"pingreq":case"pingresp":return function(it,x){return x.write(n.EMPTY[it.cmd])}($,et);case"disconnect":return function(it,x,j){let W=j?j.protocolVersion:4,U=it||{},Y=U.reasonCode,Q=U.properties,nt=W===5?1:0,ut=null;if(W===5){if(ut=O(x,Q,j,nt),!ut)return!1;nt+=ut.length}return x.write(o.from([n.codes.disconnect<<4])),V(x,nt),W===5&&x.write(o.from([Y])),ut!==null&&ut.write(),!0}($,et,L);case"auth":return function(it,x,j){let W=j?j.protocolVersion:4,U=it||{},Y=U.reasonCode,Q=U.properties,nt=W===5?1:0;W!==5&&x.destroy(new Error("Invalid mqtt version for auth packet"));let ut=O(x,Q,j,nt);return!!ut&&(nt+=ut.length,x.write(o.from([n.codes.auth<<4])),V(x,nt),x.write(o.from([Y])),ut!==null&&ut.write(),!0)}($,et,L);default:return et.destroy(new Error("Unknown command")),!1}}function N($){$.uncork()}Object.defineProperty(v,"cacheNumbers",{get:()=>w===lt,set($){$?((!a||Object.keys(a).length===0)&&(y=!0),w=lt):(y=!1,w=E)}});var A={};function V($,et){if(et>n.VARBYTEINT_MAX)return $.destroy(new Error(`Invalid variable byte integer: ${et}`)),!1;let L=A[et];return L||(L=d(et),et<16384&&(A[et]=L)),i("writeVarByteInt: writing to stream: %o",L),$.write(L)}function rt($,et){let L=o.byteLength(et);return w($,L),i("writeString: %s",et),$.write(et,"utf8")}function z($,et,L){rt($,et),rt($,L)}function lt($,et){return i("writeNumberCached: number: %d",et),i("writeNumberCached: %o",a[et]),$.write(a[et])}function E($,et){let L=c(et);return i("writeNumberGenerated: %o",L),$.write(L)}function _($,et){typeof et=="string"?rt($,et):et?(w($,et.length),$.write(et)):w($,0)}function p($,et){if(typeof et!="object"||et.length!=null)return{length:1,write(){K($,{},0)}};let L=0;function it(x,j){let W=0;switch(n.propertiesTypes[x]){case"byte":if(typeof j!="boolean")return $.destroy(new Error(`Invalid ${x}: ${j}`)),!1;W+=2;break;case"int8":if(typeof j!="number"||j<0||j>255)return $.destroy(new Error(`Invalid ${x}: ${j}`)),!1;W+=2;break;case"binary":if(j&&j===null)return $.destroy(new Error(`Invalid ${x}: ${j}`)),!1;W+=1+o.byteLength(j)+2;break;case"int16":if(typeof j!="number"||j<0||j>65535)return $.destroy(new Error(`Invalid ${x}: ${j}`)),!1;W+=3;break;case"int32":if(typeof j!="number"||j<0||j>4294967295)return $.destroy(new Error(`Invalid ${x}: ${j}`)),!1;W+=5;break;case"var":if(typeof j!="number"||j<0||j>268435455)return $.destroy(new Error(`Invalid ${x}: ${j}`)),!1;W+=1+o.byteLength(d(j));break;case"string":if(typeof j!="string")return $.destroy(new Error(`Invalid ${x}: ${j}`)),!1;W+=3+o.byteLength(j.toString());break;case"pair":if(typeof j!="object")return $.destroy(new Error(`Invalid ${x}: ${j}`)),!1;W+=Object.getOwnPropertyNames(j).reduce((U,Y)=>{let Q=j[Y];return Array.isArray(Q)?U+=Q.reduce((nt,ut)=>nt+=3+o.byteLength(Y.toString())+2+o.byteLength(ut.toString()),0):U+=3+o.byteLength(Y.toString())+2+o.byteLength(j[Y].toString()),U},0);break;default:return $.destroy(new Error(`Invalid property ${x}: ${j}`)),!1}return W}if(et)for(let x in et){let j=0,W=0,U=et[x];if(Array.isArray(U))for(let Y=0;Y<U.length;Y++){if(W=it(x,U[Y]),!W)return!1;j+=W}else{if(W=it(x,U),!W)return!1;j=W}if(!j)return!1;L+=j}return{length:o.byteLength(d(L))+L,write(){K($,et,L)}}}function O($,et,L,it){let x=["reasonString","userProperties"],j=L&&L.properties&&L.properties.maximumPacketSize?L.properties.maximumPacketSize:0,W=p($,et);if(j)for(;it+W.length>j;){let U=x.shift();if(!U||!et[U])return!1;delete et[U],W=p($,et)}return W}function M($,et,L){switch(n.propertiesTypes[et]){case"byte":$.write(o.from([n.properties[et]])),$.write(o.from([+L]));break;case"int8":$.write(o.from([n.properties[et]])),$.write(o.from([L]));break;case"binary":$.write(o.from([n.properties[et]])),_($,L);break;case"int16":$.write(o.from([n.properties[et]])),w($,L);break;case"int32":$.write(o.from([n.properties[et]])),function(it,x){let j=b(x);i("write4ByteNumber: %o",j),it.write(j)}($,L);break;case"var":$.write(o.from([n.properties[et]])),V($,L);break;case"string":$.write(o.from([n.properties[et]])),rt($,L);break;case"pair":Object.getOwnPropertyNames(L).forEach(it=>{let x=L[it];Array.isArray(x)?x.forEach(j=>{$.write(o.from([n.properties[et]])),z($,it.toString(),j.toString())}):($.write(o.from([n.properties[et]])),z($,it.toString(),x.toString()))});break;default:return $.destroy(new Error(`Invalid property ${et} value: ${L}`)),!1}}function K($,et,L){V($,L);for(let it in et)if(Object.prototype.hasOwnProperty.call(et,it)&&et[it]!==null){let x=et[it];if(Array.isArray(x))for(let j=0;j<x.length;j++)M($,it,x[j]);else M($,it,x)}}function J($){return $?$ instanceof o?$.length:o.byteLength($):0}function G($){return typeof $=="string"||$ instanceof o}h.exports=v}),ta=ft((l,h)=>{ot(),at(),st();var n=ro(),{EventEmitter:o}=(Ue(),Lt(Ce)),{Buffer:s}=(Zt(),Lt(Xt)),t=class extends o{constructor(){super(),this._array=new Array(20),this._i=0}write(r){return this._array[this._i++]=r,!0}concat(){let r,e=0,i=new Array(this._array.length),a=this._array,c=0;for(r=0;r<a.length&&a[r]!==void 0;r++)typeof a[r]!="string"?i[r]=a[r].length:i[r]=s.byteLength(a[r]),e+=i[r];let g=s.allocUnsafe(e);for(r=0;r<a.length&&a[r]!==void 0;r++)typeof a[r]!="string"?(a[r].copy(g,c),c+=i[r]):(g.write(a[r],c),c+=i[r]);return g}destroy(r){r&&this.emit("error",r)}};h.exports=function(r,e){let i=new t;return n(r,i,e),i.concat()}}),ea=ft(l=>{ot(),at(),st(),l.parser=Js().parser,l.generate=ta(),l.writeToStream=ro()}),io=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"__esModule",{value:!0}),l.default=class{constructor(){this.nextId=Math.max(1,Math.floor(65535*Math.random()))}allocate(){let h=this.nextId++;return this.nextId===65536&&(this.nextId=1),h}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(h){return!0}deallocate(h){}clear(){}}}),ra=ft((l,h)=>{function n(o){return o instanceof pr?pr.from(o):new o.constructor(o.buffer.slice(),o.byteOffset,o.length)}ot(),at(),st(),h.exports=function(o){if((o=o||{}).circles)return function(e){let i=[],a=[],c=new Map;if(c.set(Date,y=>new Date(y)),c.set(Map,(y,v)=>new Map(d(Array.from(y),v))),c.set(Set,(y,v)=>new Set(d(Array.from(y),v))),e.constructorHandlers)for(let y of e.constructorHandlers)c.set(y[0],y[1]);let g=null;return e.proto?w:b;function d(y,v){let N=Object.keys(y),A=new Array(N.length);for(let V=0;V<N.length;V++){let rt=N[V],z=y[rt];if(typeof z!="object"||z===null)A[rt]=z;else if(z.constructor!==Object&&(g=c.get(z.constructor)))A[rt]=g(z,v);else if(ArrayBuffer.isView(z))A[rt]=n(z);else{let lt=i.indexOf(z);A[rt]=lt!==-1?a[lt]:v(z)}}return A}function b(y){if(typeof y!="object"||y===null)return y;if(Array.isArray(y))return d(y,b);if(y.constructor!==Object&&(g=c.get(y.constructor)))return g(y,b);let v={};i.push(y),a.push(v);for(let N in y){if(Object.hasOwnProperty.call(y,N)===!1)continue;let A=y[N];if(typeof A!="object"||A===null)v[N]=A;else if(A.constructor!==Object&&(g=c.get(A.constructor)))v[N]=g(A,b);else if(ArrayBuffer.isView(A))v[N]=n(A);else{let V=i.indexOf(A);v[N]=V!==-1?a[V]:b(A)}}return i.pop(),a.pop(),v}function w(y){if(typeof y!="object"||y===null)return y;if(Array.isArray(y))return d(y,w);if(y.constructor!==Object&&(g=c.get(y.constructor)))return g(y,w);let v={};i.push(y),a.push(v);for(let N in y){let A=y[N];if(typeof A!="object"||A===null)v[N]=A;else if(A.constructor!==Object&&(g=c.get(A.constructor)))v[N]=g(A,w);else if(ArrayBuffer.isView(A))v[N]=n(A);else{let V=i.indexOf(A);v[N]=V!==-1?a[V]:w(A)}}return i.pop(),a.pop(),v}}(o);let s=new Map;if(s.set(Date,e=>new Date(e)),s.set(Map,(e,i)=>new Map(r(Array.from(e),i))),s.set(Set,(e,i)=>new Set(r(Array.from(e),i))),o.constructorHandlers)for(let e of o.constructorHandlers)s.set(e[0],e[1]);let t=null;return o.proto?function e(i){if(typeof i!="object"||i===null)return i;if(Array.isArray(i))return r(i,e);if(i.constructor!==Object&&(t=s.get(i.constructor)))return t(i,e);let a={};for(let c in i){let g=i[c];typeof g!="object"||g===null?a[c]=g:g.constructor!==Object&&(t=s.get(g.constructor))?a[c]=t(g,e):ArrayBuffer.isView(g)?a[c]=n(g):a[c]=e(g)}return a}:function e(i){if(typeof i!="object"||i===null)return i;if(Array.isArray(i))return r(i,e);if(i.constructor!==Object&&(t=s.get(i.constructor)))return t(i,e);let a={};for(let c in i){if(Object.hasOwnProperty.call(i,c)===!1)continue;let g=i[c];typeof g!="object"||g===null?a[c]=g:g.constructor!==Object&&(t=s.get(g.constructor))?a[c]=t(g,e):ArrayBuffer.isView(g)?a[c]=n(g):a[c]=e(g)}return a};function r(e,i){let a=Object.keys(e),c=new Array(a.length);for(let g=0;g<a.length;g++){let d=a[g],b=e[d];typeof b!="object"||b===null?c[d]=b:b.constructor!==Object&&(t=s.get(b.constructor))?c[d]=t(b,i):ArrayBuffer.isView(b)?c[d]=n(b):c[d]=i(b)}return c}}}),ia=ft((l,h)=>{ot(),at(),st(),h.exports=ra()()}),na=ft(l=>{function h(n){let o=n.split("/");for(let s=0;s<o.length;s++)if(o[s]!=="+"){if(o[s]==="#")return s===o.length-1;if(o[s].indexOf("+")!==-1||o[s].indexOf("#")!==-1)return!1}return!0}ot(),at(),st(),Object.defineProperty(l,"__esModule",{value:!0}),l.validateTopic=h,l.validateTopics=function(n){if(n.length===0)return"empty_topic_list";for(let o=0;o<n.length;o++)if(!h(n[o]))return n[o];return null}}),no=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"__esModule",{value:!0});var h=De(),n={objectMode:!0},o={clean:!0};l.default=class{constructor(s){this.options=s||{},this.options=Object.assign(Object.assign({},o),s),this._inflights=new Map}put(s,t){return this._inflights.set(s.messageId,s),t&&t(),this}createStream(){let s=new h.Readable(n),t=[],r=!1,e=0;return this._inflights.forEach((i,a)=>{t.push(i)}),s._read=()=>{!r&&e<t.length?s.push(t[e++]):s.push(null)},s.destroy=i=>{if(!r)return r=!0,setTimeout(()=>{s.emit("close")},0),s},s}del(s,t){let r=this._inflights.get(s.messageId);return r?(this._inflights.delete(s.messageId),t(null,r)):t&&t(new Error("missing packet")),this}get(s,t){let r=this._inflights.get(s.messageId);return r?t(null,r):t&&t(new Error("missing packet")),this}close(s){this.options.clean&&(this._inflights=null),s&&s()}}}),oa=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"__esModule",{value:!0});var h=[0,16,128,131,135,144,145,151,153];l.default=(n,o,s)=>{n.log("handlePublish: packet %o",o),s=typeof s<"u"?s:n.noop;let t=o.topic.toString(),r=o.payload,{qos:e}=o,{messageId:i}=o,{options:a}=n;if(n.options.protocolVersion===5){let c;if(o.properties&&(c=o.properties.topicAlias),typeof c<"u")if(t.length===0){if(!(c>0&&c<=65535))return n.log("handlePublish :: topic alias out of range. alias: %d",c),void n.emit("error",new Error("Received Topic Alias is out of range"));{let g=n.topicAliasRecv.getTopicByAlias(c);if(!g)return n.log("handlePublish :: unregistered topic alias. alias: %d",c),void n.emit("error",new Error("Received unregistered Topic Alias"));t=g,n.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",t,c)}}else{if(!n.topicAliasRecv.put(t,c))return n.log("handlePublish :: topic alias out of range. alias: %d",c),void n.emit("error",new Error("Received Topic Alias is out of range"));n.log("handlePublish :: registered topic: %s - alias: %d",t,c)}}switch(n.log("handlePublish: qos %d",e),e){case 2:a.customHandleAcks(t,r,o,(c,g)=>(typeof c=="number"&&(g=c,c=null),c?n.emit("error",c):h.indexOf(g)===-1?n.emit("error",new Error("Wrong reason code for pubrec")):void(g?n._sendPacket({cmd:"pubrec",messageId:i,reasonCode:g},s):n.incomingStore.put(o,()=>{n._sendPacket({cmd:"pubrec",messageId:i},s)}))));break;case 1:a.customHandleAcks(t,r,o,(c,g)=>(typeof c=="number"&&(g=c,c=null),c?n.emit("error",c):h.indexOf(g)===-1?n.emit("error",new Error("Wrong reason code for puback")):(g||n.emit("message",t,r,o),void n.handleMessage(o,d=>{if(d)return s&&s(d);n._sendPacket({cmd:"puback",messageId:i,reasonCode:g},s)}))));break;case 0:n.emit("message",t,r,o),n.handleMessage(o,s);break;default:n.log("handlePublish: unknown QoS. Doing nothing.")}}}),sa=ft((l,h)=>{h.exports={version:"5.10.4"}}),Je=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"__esModule",{value:!0}),l.MQTTJS_VERSION=l.nextTick=l.ErrorWithReasonCode=void 0,l.applyMixin=function(n,o,s=!1){var t;let r=[o];for(;;){let e=r[0],i=Object.getPrototypeOf(e);if(!(i!=null&&i.prototype))break;r.unshift(i)}for(let e of r)for(let i of Object.getOwnPropertyNames(e.prototype))(s||i!=="constructor")&&Object.defineProperty(n.prototype,i,(t=Object.getOwnPropertyDescriptor(e.prototype,i))!==null&&t!==void 0?t:Object.create(null))};var h=class _s extends Error{constructor(o,s){super(o),this.code=s,Object.setPrototypeOf(this,_s.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};l.ErrorWithReasonCode=h,l.nextTick=typeof(Ft==null?void 0:Ft.nextTick)=="function"?Ft.nextTick:n=>{setTimeout(n,0)},l.MQTTJS_VERSION=sa().version}),wr=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"__esModule",{value:!0}),l.ReasonCodes=void 0;var h=Je();l.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},l.default=(n,o)=>{let{messageId:s}=o,t=o.cmd,r=null,e=n.outgoing[s]?n.outgoing[s].cb:null,i=null;if(e){switch(n.log("_handleAck :: packet type",t),t){case"pubcomp":case"puback":{let a=o.reasonCode;a&&a>0&&a!==16?(i=new h.ErrorWithReasonCode(`Publish error: ${l.ReasonCodes[a]}`,a),n._removeOutgoingAndStoreMessage(s,()=>{e(i,o)})):n._removeOutgoingAndStoreMessage(s,e);break}case"pubrec":{r={cmd:"pubrel",qos:2,messageId:s};let a=o.reasonCode;a&&a>0&&a!==16?(i=new h.ErrorWithReasonCode(`Publish error: ${l.ReasonCodes[a]}`,a),n._removeOutgoingAndStoreMessage(s,()=>{e(i,o)})):n._sendPacket(r);break}case"suback":{delete n.outgoing[s],n.messageIdProvider.deallocate(s);let a=o.granted;for(let c=0;c<a.length;c++){let g=a[c];if(128&g){i=new Error(`Subscribe error: ${l.ReasonCodes[g]}`),i.code=g;let d=n.messageIdToTopic[s];d&&d.forEach(b=>{delete n._resubscribeTopics[b]})}}delete n.messageIdToTopic[s],n._invokeStoreProcessingQueue(),e(i,o);break}case"unsuback":delete n.outgoing[s],n.messageIdProvider.deallocate(s),n._invokeStoreProcessingQueue(),e(null,o);break;default:n.emit("error",new Error("unrecognized packet type"))}n.disconnecting&&Object.keys(n.outgoing).length===0&&n.emit("outgoingEmpty")}else n.log("_handleAck :: Server sent an ack in error. Ignoring.")}}),aa=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"__esModule",{value:!0});var h=Je(),n=wr();l.default=(o,s)=>{let{options:t}=o,r=t.protocolVersion,e=r===5?s.reasonCode:s.returnCode;if(r===5)o.handleAuth(s,(i,a)=>{if(i)o.emit("error",i);else if(e===24)o.reconnecting=!1,o._sendPacket(a);else{let c=new h.ErrorWithReasonCode(`Connection refused: ${n.ReasonCodes[e]}`,e);o.emit("error",c)}});else{let i=new h.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${r}`,e);o.emit("error",i)}}}),la=ft(l=>{var d,b,w,y,v,N,A,V,rt,z,lt,E,_,p,O,M,K,J,G,$,et,L,it,x,j,W,U,nn,Q,nt,ut,ct,C,vs,F,dt,kt,R,Pe,u,Be,m,on,B,P,Cr,mt,Rr,ht,qt,Et,sn,Pt,sr,I,xe,wt,an,At;ot(),at(),st(),Object.defineProperty(l,"__esModule",{value:!0}),l.LRUCache=void 0;var h=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,n=new Set,o=typeof Ft=="object"&&Ft?Ft:{},s=(Ut,D,q,tt)=>{typeof o.emitWarning=="function"&&o.emitWarning(Ut,D,q,tt)},t=globalThis.AbortController,r=globalThis.AbortSignal;if(typeof t>"u"){r=class{constructor(){Nt(this,"onabort");Nt(this,"_onabort",[]);Nt(this,"reason");Nt(this,"aborted",!1)}addEventListener(q,tt){this._onabort.push(tt)}},t=class{constructor(){Nt(this,"signal",new r);D()}abort(q){var tt,_t;if(!this.signal.aborted){this.signal.reason=q,this.signal.aborted=!0;for(let gt of this.signal._onabort)gt(q);(_t=(tt=this.signal).onabort)==null||_t.call(tt,q)}}};let Ut=((d=o.env)==null?void 0:d.LRU_CACHE_IGNORE_AC_WARNING)!=="1",D=()=>{Ut&&(Ut=!1,s("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",D))}}var e=Ut=>Ut&&Ut===Math.floor(Ut)&&Ut>0&&isFinite(Ut),i=Ut=>e(Ut)?Ut<=Math.pow(2,8)?Uint8Array:Ut<=Math.pow(2,16)?Uint16Array:Ut<=Math.pow(2,32)?Uint32Array:Ut<=Number.MAX_SAFE_INTEGER?a:null:null,a=class extends Array{constructor(Ut){super(Ut),this.fill(0)}},c=(b=class{constructor(D,q){Nt(this,"heap");Nt(this,"length");if(!T(b,w))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new q(D),this.length=0}static create(D){let q=i(D);if(!q)return[];Tt(b,w,!0);let tt=new b(D,q);return Tt(b,w,!1),tt}push(D){this.heap[this.length++]=D}pop(){return this.heap[--this.length]}},w=new WeakMap,Rt(b,w,!1),b),g=(At=class{constructor(D){Rt(this,U);Rt(this,C);Rt(this,R);Rt(this,u);Rt(this,m);Rt(this,P);Rt(this,mt);Rt(this,ht);Rt(this,Et);Rt(this,Pt);Rt(this,I);Rt(this,wt);Rt(this,y,void 0);Rt(this,v,void 0);Rt(this,N,void 0);Rt(this,A,void 0);Rt(this,V,void 0);Rt(this,rt,void 0);Nt(this,"ttl");Nt(this,"ttlResolution");Nt(this,"ttlAutopurge");Nt(this,"updateAgeOnGet");Nt(this,"updateAgeOnHas");Nt(this,"allowStale");Nt(this,"noDisposeOnSet");Nt(this,"noUpdateTTL");Nt(this,"maxEntrySize");Nt(this,"sizeCalculation");Nt(this,"noDeleteOnFetchRejection");Nt(this,"noDeleteOnStaleGet");Nt(this,"allowStaleOnFetchAbort");Nt(this,"allowStaleOnFetchRejection");Nt(this,"ignoreFetchAbort");Rt(this,z,void 0);Rt(this,lt,void 0);Rt(this,E,void 0);Rt(this,_,void 0);Rt(this,p,void 0);Rt(this,O,void 0);Rt(this,M,void 0);Rt(this,K,void 0);Rt(this,J,void 0);Rt(this,G,void 0);Rt(this,$,void 0);Rt(this,et,void 0);Rt(this,L,void 0);Rt(this,it,void 0);Rt(this,x,void 0);Rt(this,j,void 0);Rt(this,W,void 0);Rt(this,Q,()=>{});Rt(this,nt,()=>{});Rt(this,ut,()=>{});Rt(this,ct,()=>!1);Rt(this,F,D=>{});Rt(this,dt,(D,q,tt)=>{});Rt(this,kt,(D,q,tt,_t)=>{if(tt||_t)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Nt(this,B,"LRUCache");let{max:q=0,ttl:tt,ttlResolution:_t=1,ttlAutopurge:gt,updateAgeOnGet:yt,updateAgeOnHas:Ot,allowStale:St,dispose:Bt,disposeAfter:$t,noDisposeOnSet:xt,noUpdateTTL:ce,maxSize:Yt=0,maxEntrySize:oe=0,sizeCalculation:te,fetchMethod:Jt,memoMethod:Ct,noDeleteOnFetchRejection:Qt,noDeleteOnStaleGet:ar,allowStaleOnFetchRejection:fe,allowStaleOnFetchAbort:le,ignoreFetchAbort:tr}=D;if(q!==0&&!e(q))throw new TypeError("max option must be a nonnegative integer");let Ie=q?i(q):Array;if(!Ie)throw new Error("invalid max value: "+q);if(Tt(this,y,q),Tt(this,v,Yt),this.maxEntrySize=oe||T(this,v),this.sizeCalculation=te,this.sizeCalculation){if(!T(this,v)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Ct!==void 0&&typeof Ct!="function")throw new TypeError("memoMethod must be a function if defined");if(Tt(this,rt,Ct),Jt!==void 0&&typeof Jt!="function")throw new TypeError("fetchMethod must be a function if specified");if(Tt(this,V,Jt),Tt(this,j,!!Jt),Tt(this,E,new Map),Tt(this,_,new Array(q).fill(void 0)),Tt(this,p,new Array(q).fill(void 0)),Tt(this,O,new Ie(q)),Tt(this,M,new Ie(q)),Tt(this,K,0),Tt(this,J,0),Tt(this,G,c.create(q)),Tt(this,z,0),Tt(this,lt,0),typeof Bt=="function"&&Tt(this,N,Bt),typeof $t=="function"?(Tt(this,A,$t),Tt(this,$,[])):(Tt(this,A,void 0),Tt(this,$,void 0)),Tt(this,x,!!T(this,N)),Tt(this,W,!!T(this,A)),this.noDisposeOnSet=!!xt,this.noUpdateTTL=!!ce,this.noDeleteOnFetchRejection=!!Qt,this.allowStaleOnFetchRejection=!!fe,this.allowStaleOnFetchAbort=!!le,this.ignoreFetchAbort=!!tr,this.maxEntrySize!==0){if(T(this,v)!==0&&!e(T(this,v)))throw new TypeError("maxSize must be a positive integer if specified");if(!e(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");It(this,C,vs).call(this)}if(this.allowStale=!!St,this.noDeleteOnStaleGet=!!ar,this.updateAgeOnGet=!!yt,this.updateAgeOnHas=!!Ot,this.ttlResolution=e(_t)||_t===0?_t:1,this.ttlAutopurge=!!gt,this.ttl=tt||0,this.ttl){if(!e(this.ttl))throw new TypeError("ttl must be a positive integer if specified");It(this,U,nn).call(this)}if(T(this,y)===0&&this.ttl===0&&T(this,v)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!T(this,y)&&!T(this,v)){let Ke="LRU_CACHE_UNBOUNDED";(lr=>!n.has(lr))(Ke)&&(n.add(Ke),s("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Ke,At))}}static unsafeExposeInternals(D){return{starts:T(D,L),ttls:T(D,it),sizes:T(D,et),keyMap:T(D,E),keyList:T(D,_),valList:T(D,p),next:T(D,O),prev:T(D,M),get head(){return T(D,K)},get tail(){return T(D,J)},free:T(D,G),isBackgroundFetch:q=>{var tt;return It(tt=D,ht,qt).call(tt,q)},backgroundFetch:(q,tt,_t,gt)=>{var yt;return It(yt=D,mt,Rr).call(yt,q,tt,_t,gt)},moveToTail:q=>{var tt;return It(tt=D,Pt,sr).call(tt,q)},indexes:q=>{var tt;return It(tt=D,R,Pe).call(tt,q)},rindexes:q=>{var tt;return It(tt=D,u,Be).call(tt,q)},isStale:q=>{var tt;return T(tt=D,ct).call(tt,q)}}}get max(){return T(this,y)}get maxSize(){return T(this,v)}get calculatedSize(){return T(this,lt)}get size(){return T(this,z)}get fetchMethod(){return T(this,V)}get memoMethod(){return T(this,rt)}get dispose(){return T(this,N)}get disposeAfter(){return T(this,A)}getRemainingTTL(D){return T(this,E).has(D)?1/0:0}*entries(){for(let D of It(this,R,Pe).call(this))T(this,p)[D]!==void 0&&T(this,_)[D]!==void 0&&!It(this,ht,qt).call(this,T(this,p)[D])&&(yield[T(this,_)[D],T(this,p)[D]])}*rentries(){for(let D of It(this,u,Be).call(this))T(this,p)[D]!==void 0&&T(this,_)[D]!==void 0&&!It(this,ht,qt).call(this,T(this,p)[D])&&(yield[T(this,_)[D],T(this,p)[D]])}*keys(){for(let D of It(this,R,Pe).call(this)){let q=T(this,_)[D];q!==void 0&&!It(this,ht,qt).call(this,T(this,p)[D])&&(yield q)}}*rkeys(){for(let D of It(this,u,Be).call(this)){let q=T(this,_)[D];q!==void 0&&!It(this,ht,qt).call(this,T(this,p)[D])&&(yield q)}}*values(){for(let D of It(this,R,Pe).call(this))T(this,p)[D]!==void 0&&!It(this,ht,qt).call(this,T(this,p)[D])&&(yield T(this,p)[D])}*rvalues(){for(let D of It(this,u,Be).call(this))T(this,p)[D]!==void 0&&!It(this,ht,qt).call(this,T(this,p)[D])&&(yield T(this,p)[D])}[Symbol.iterator](){return this.entries()}find(D,q={}){for(let tt of It(this,R,Pe).call(this)){let _t=T(this,p)[tt],gt=It(this,ht,qt).call(this,_t)?_t.__staleWhileFetching:_t;if(gt!==void 0&&D(gt,T(this,_)[tt],this))return this.get(T(this,_)[tt],q)}}forEach(D,q=this){for(let tt of It(this,R,Pe).call(this)){let _t=T(this,p)[tt],gt=It(this,ht,qt).call(this,_t)?_t.__staleWhileFetching:_t;gt!==void 0&&D.call(q,gt,T(this,_)[tt],this)}}rforEach(D,q=this){for(let tt of It(this,u,Be).call(this)){let _t=T(this,p)[tt],gt=It(this,ht,qt).call(this,_t)?_t.__staleWhileFetching:_t;gt!==void 0&&D.call(q,gt,T(this,_)[tt],this)}}purgeStale(){let D=!1;for(let q of It(this,u,Be).call(this,{allowStale:!0}))T(this,ct).call(this,q)&&(It(this,I,xe).call(this,T(this,_)[q],"expire"),D=!0);return D}info(D){let q=T(this,E).get(D);if(q===void 0)return;let tt=T(this,p)[q],_t=It(this,ht,qt).call(this,tt)?tt.__staleWhileFetching:tt;if(_t===void 0)return;let gt={value:_t};if(T(this,it)&&T(this,L)){let yt=T(this,it)[q],Ot=T(this,L)[q];if(yt&&Ot){let St=yt-(h.now()-Ot);gt.ttl=St,gt.start=Date.now()}}return T(this,et)&&(gt.size=T(this,et)[q]),gt}dump(){let D=[];for(let q of It(this,R,Pe).call(this,{allowStale:!0})){let tt=T(this,_)[q],_t=T(this,p)[q],gt=It(this,ht,qt).call(this,_t)?_t.__staleWhileFetching:_t;if(gt===void 0||tt===void 0)continue;let yt={value:gt};if(T(this,it)&&T(this,L)){yt.ttl=T(this,it)[q];let Ot=h.now()-T(this,L)[q];yt.start=Math.floor(Date.now()-Ot)}T(this,et)&&(yt.size=T(this,et)[q]),D.unshift([tt,yt])}return D}load(D){this.clear();for(let[q,tt]of D){if(tt.start){let _t=Date.now()-tt.start;tt.start=h.now()-_t}this.set(q,tt.value,tt)}}set(D,q,tt={}){var ce,Yt,oe,te,Jt;if(q===void 0)return this.delete(D),this;let{ttl:_t=this.ttl,start:gt,noDisposeOnSet:yt=this.noDisposeOnSet,sizeCalculation:Ot=this.sizeCalculation,status:St}=tt,{noUpdateTTL:Bt=this.noUpdateTTL}=tt,$t=T(this,kt).call(this,D,q,tt.size||0,Ot);if(this.maxEntrySize&&$t>this.maxEntrySize)return St&&(St.set="miss",St.maxEntrySizeExceeded=!0),It(this,I,xe).call(this,D,"set"),this;let xt=T(this,z)===0?void 0:T(this,E).get(D);if(xt===void 0)xt=T(this,z)===0?T(this,J):T(this,G).length!==0?T(this,G).pop():T(this,z)===T(this,y)?It(this,P,Cr).call(this,!1):T(this,z),T(this,_)[xt]=D,T(this,p)[xt]=q,T(this,E).set(D,xt),T(this,O)[T(this,J)]=xt,T(this,M)[xt]=T(this,J),Tt(this,J,xt),ur(this,z)._++,T(this,dt).call(this,xt,$t,St),St&&(St.set="add"),Bt=!1;else{It(this,Pt,sr).call(this,xt);let Ct=T(this,p)[xt];if(q!==Ct){if(T(this,j)&&It(this,ht,qt).call(this,Ct)){Ct.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:Qt}=Ct;Qt!==void 0&&!yt&&(T(this,x)&&((ce=T(this,N))==null||ce.call(this,Qt,D,"set")),T(this,W)&&((Yt=T(this,$))==null||Yt.push([Qt,D,"set"])))}else yt||(T(this,x)&&((oe=T(this,N))==null||oe.call(this,Ct,D,"set")),T(this,W)&&((te=T(this,$))==null||te.push([Ct,D,"set"])));if(T(this,F).call(this,xt),T(this,dt).call(this,xt,$t,St),T(this,p)[xt]=q,St){St.set="replace";let Qt=Ct&&It(this,ht,qt).call(this,Ct)?Ct.__staleWhileFetching:Ct;Qt!==void 0&&(St.oldValue=Qt)}}else St&&(St.set="update")}if(_t!==0&&!T(this,it)&&It(this,U,nn).call(this),T(this,it)&&(Bt||T(this,ut).call(this,xt,_t,gt),St&&T(this,nt).call(this,St,xt)),!yt&&T(this,W)&&T(this,$)){let Ct,Qt=T(this,$);for(;Ct=Qt==null?void 0:Qt.shift();)(Jt=T(this,A))==null||Jt.call(this,...Ct)}return this}pop(){var D;try{for(;T(this,z);){let q=T(this,p)[T(this,K)];if(It(this,P,Cr).call(this,!0),It(this,ht,qt).call(this,q)){if(q.__staleWhileFetching)return q.__staleWhileFetching}else if(q!==void 0)return q}}finally{if(T(this,W)&&T(this,$)){let q,tt=T(this,$);for(;q=tt==null?void 0:tt.shift();)(D=T(this,A))==null||D.call(this,...q)}}}has(D,q={}){let{updateAgeOnHas:tt=this.updateAgeOnHas,status:_t}=q,gt=T(this,E).get(D);if(gt!==void 0){let yt=T(this,p)[gt];if(It(this,ht,qt).call(this,yt)&&yt.__staleWhileFetching===void 0)return!1;if(!T(this,ct).call(this,gt))return tt&&T(this,Q).call(this,gt),_t&&(_t.has="hit",T(this,nt).call(this,_t,gt)),!0;_t&&(_t.has="stale",T(this,nt).call(this,_t,gt))}else _t&&(_t.has="miss");return!1}peek(D,q={}){let{allowStale:tt=this.allowStale}=q,_t=T(this,E).get(D);if(_t===void 0||!tt&&T(this,ct).call(this,_t))return;let gt=T(this,p)[_t];return It(this,ht,qt).call(this,gt)?gt.__staleWhileFetching:gt}async fetch(D,q={}){let{allowStale:tt=this.allowStale,updateAgeOnGet:_t=this.updateAgeOnGet,noDeleteOnStaleGet:gt=this.noDeleteOnStaleGet,ttl:yt=this.ttl,noDisposeOnSet:Ot=this.noDisposeOnSet,size:St=0,sizeCalculation:Bt=this.sizeCalculation,noUpdateTTL:$t=this.noUpdateTTL,noDeleteOnFetchRejection:xt=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:ce=this.allowStaleOnFetchRejection,ignoreFetchAbort:Yt=this.ignoreFetchAbort,allowStaleOnFetchAbort:oe=this.allowStaleOnFetchAbort,context:te,forceRefresh:Jt=!1,status:Ct,signal:Qt}=q;if(!T(this,j))return Ct&&(Ct.fetch="get"),this.get(D,{allowStale:tt,updateAgeOnGet:_t,noDeleteOnStaleGet:gt,status:Ct});let ar={allowStale:tt,updateAgeOnGet:_t,noDeleteOnStaleGet:gt,ttl:yt,noDisposeOnSet:Ot,size:St,sizeCalculation:Bt,noUpdateTTL:$t,noDeleteOnFetchRejection:xt,allowStaleOnFetchRejection:ce,allowStaleOnFetchAbort:oe,ignoreFetchAbort:Yt,status:Ct,signal:Qt},fe=T(this,E).get(D);if(fe===void 0){Ct&&(Ct.fetch="miss");let le=It(this,mt,Rr).call(this,D,fe,ar,te);return le.__returned=le}{let le=T(this,p)[fe];if(It(this,ht,qt).call(this,le)){let lr=tt&&le.__staleWhileFetching!==void 0;return Ct&&(Ct.fetch="inflight",lr&&(Ct.returnedStale=!0)),lr?le.__staleWhileFetching:le.__returned=le}let tr=T(this,ct).call(this,fe);if(!Jt&&!tr)return Ct&&(Ct.fetch="hit"),It(this,Pt,sr).call(this,fe),_t&&T(this,Q).call(this,fe),Ct&&T(this,nt).call(this,Ct,fe),le;let Ie=It(this,mt,Rr).call(this,D,fe,ar,te),Ke=Ie.__staleWhileFetching!==void 0&&tt;return Ct&&(Ct.fetch=tr?"stale":"refresh",Ke&&tr&&(Ct.returnedStale=!0)),Ke?Ie.__staleWhileFetching:Ie.__returned=Ie}}async forceFetch(D,q={}){let tt=await this.fetch(D,q);if(tt===void 0)throw new Error("fetch() returned undefined");return tt}memo(D,q={}){let tt=T(this,rt);if(!tt)throw new Error("no memoMethod provided to constructor");let{context:_t,forceRefresh:gt,...yt}=q,Ot=this.get(D,yt);if(!gt&&Ot!==void 0)return Ot;let St=tt(D,Ot,{options:yt,context:_t});return this.set(D,St,yt),St}get(D,q={}){let{allowStale:tt=this.allowStale,updateAgeOnGet:_t=this.updateAgeOnGet,noDeleteOnStaleGet:gt=this.noDeleteOnStaleGet,status:yt}=q,Ot=T(this,E).get(D);if(Ot!==void 0){let St=T(this,p)[Ot],Bt=It(this,ht,qt).call(this,St);return yt&&T(this,nt).call(this,yt,Ot),T(this,ct).call(this,Ot)?(yt&&(yt.get="stale"),Bt?(yt&&tt&&St.__staleWhileFetching!==void 0&&(yt.returnedStale=!0),tt?St.__staleWhileFetching:void 0):(gt||It(this,I,xe).call(this,D,"expire"),yt&&tt&&(yt.returnedStale=!0),tt?St:void 0)):(yt&&(yt.get="hit"),Bt?St.__staleWhileFetching:(It(this,Pt,sr).call(this,Ot),_t&&T(this,Q).call(this,Ot),St))}yt&&(yt.get="miss")}delete(D){return It(this,I,xe).call(this,D,"delete")}clear(){return It(this,wt,an).call(this,"delete")}},B=Symbol.toStringTag,y=new WeakMap,v=new WeakMap,N=new WeakMap,A=new WeakMap,V=new WeakMap,rt=new WeakMap,z=new WeakMap,lt=new WeakMap,E=new WeakMap,_=new WeakMap,p=new WeakMap,O=new WeakMap,M=new WeakMap,K=new WeakMap,J=new WeakMap,G=new WeakMap,$=new WeakMap,et=new WeakMap,L=new WeakMap,it=new WeakMap,x=new WeakMap,j=new WeakMap,W=new WeakMap,U=new WeakSet,nn=function(){let D=new a(T(this,y)),q=new a(T(this,y));Tt(this,it,D),Tt(this,L,q),Tt(this,ut,(gt,yt,Ot=h.now())=>{if(q[gt]=yt!==0?Ot:0,D[gt]=yt,yt!==0&&this.ttlAutopurge){let St=setTimeout(()=>{T(this,ct).call(this,gt)&&It(this,I,xe).call(this,T(this,_)[gt],"expire")},yt+1);St.unref&&St.unref()}}),Tt(this,Q,gt=>{q[gt]=D[gt]!==0?h.now():0}),Tt(this,nt,(gt,yt)=>{if(D[yt]){let Ot=D[yt],St=q[yt];if(!Ot||!St)return;gt.ttl=Ot,gt.start=St,gt.now=tt||_t();let Bt=gt.now-St;gt.remainingTTL=Ot-Bt}});let tt=0,_t=()=>{let gt=h.now();if(this.ttlResolution>0){tt=gt;let yt=setTimeout(()=>tt=0,this.ttlResolution);yt.unref&&yt.unref()}return gt};this.getRemainingTTL=gt=>{let yt=T(this,E).get(gt);if(yt===void 0)return 0;let Ot=D[yt],St=q[yt];return Ot&&St?Ot-((tt||_t())-St):1/0},Tt(this,ct,gt=>{let yt=q[gt],Ot=D[gt];return!!Ot&&!!yt&&(tt||_t())-yt>Ot})},Q=new WeakMap,nt=new WeakMap,ut=new WeakMap,ct=new WeakMap,C=new WeakSet,vs=function(){let D=new a(T(this,y));Tt(this,lt,0),Tt(this,et,D),Tt(this,F,q=>{Tt(this,lt,T(this,lt)-D[q]),D[q]=0}),Tt(this,kt,(q,tt,_t,gt)=>{if(It(this,ht,qt).call(this,tt))return 0;if(!e(_t)){if(!gt)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if(typeof gt!="function")throw new TypeError("sizeCalculation must be a function");if(_t=gt(tt,q),!e(_t))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return _t}),Tt(this,dt,(q,tt,_t)=>{if(D[q]=tt,T(this,v)){let gt=T(this,v)-D[q];for(;T(this,lt)>gt;)It(this,P,Cr).call(this,!0)}Tt(this,lt,T(this,lt)+D[q]),_t&&(_t.entrySize=tt,_t.totalCalculatedSize=T(this,lt))})},F=new WeakMap,dt=new WeakMap,kt=new WeakMap,R=new WeakSet,Pe=function*({allowStale:D=this.allowStale}={}){if(T(this,z))for(let q=T(this,J);It(this,m,on).call(this,q)&&((D||!T(this,ct).call(this,q))&&(yield q),q!==T(this,K));)q=T(this,M)[q]},u=new WeakSet,Be=function*({allowStale:D=this.allowStale}={}){if(T(this,z))for(let q=T(this,K);It(this,m,on).call(this,q)&&((D||!T(this,ct).call(this,q))&&(yield q),q!==T(this,J));)q=T(this,O)[q]},m=new WeakSet,on=function(D){return D!==void 0&&T(this,E).get(T(this,_)[D])===D},P=new WeakSet,Cr=function(D){var gt,yt;let q=T(this,K),tt=T(this,_)[q],_t=T(this,p)[q];return T(this,j)&&It(this,ht,qt).call(this,_t)?_t.__abortController.abort(new Error("evicted")):(T(this,x)||T(this,W))&&(T(this,x)&&((gt=T(this,N))==null||gt.call(this,_t,tt,"evict")),T(this,W)&&((yt=T(this,$))==null||yt.push([_t,tt,"evict"]))),T(this,F).call(this,q),D&&(T(this,_)[q]=void 0,T(this,p)[q]=void 0,T(this,G).push(q)),T(this,z)===1?(Tt(this,K,Tt(this,J,0)),T(this,G).length=0):Tt(this,K,T(this,O)[q]),T(this,E).delete(tt),ur(this,z)._--,q},mt=new WeakSet,Rr=function(D,q,tt,_t){let gt=q===void 0?void 0:T(this,p)[q];if(It(this,ht,qt).call(this,gt))return gt;let yt=new t,{signal:Ot}=tt;Ot==null||Ot.addEventListener("abort",()=>yt.abort(Ot.reason),{signal:yt.signal});let St={signal:yt.signal,options:tt,context:_t},Bt=(Yt,oe=!1)=>{let{aborted:te}=yt.signal,Jt=tt.ignoreFetchAbort&&Yt!==void 0;if(tt.status&&(te&&!oe?(tt.status.fetchAborted=!0,tt.status.fetchError=yt.signal.reason,Jt&&(tt.status.fetchAbortIgnored=!0)):tt.status.fetchResolved=!0),te&&!Jt&&!oe)return $t(yt.signal.reason);let Ct=xt;return T(this,p)[q]===xt&&(Yt===void 0?Ct.__staleWhileFetching?T(this,p)[q]=Ct.__staleWhileFetching:It(this,I,xe).call(this,D,"fetch"):(tt.status&&(tt.status.fetchUpdated=!0),this.set(D,Yt,St.options))),Yt},$t=Yt=>{let{aborted:oe}=yt.signal,te=oe&&tt.allowStaleOnFetchAbort,Jt=te||tt.allowStaleOnFetchRejection,Ct=Jt||tt.noDeleteOnFetchRejection,Qt=xt;if(T(this,p)[q]===xt&&(Ct&&Qt.__staleWhileFetching!==void 0?te||(T(this,p)[q]=Qt.__staleWhileFetching):It(this,I,xe).call(this,D,"fetch")),Jt)return tt.status&&Qt.__staleWhileFetching!==void 0&&(tt.status.returnedStale=!0),Qt.__staleWhileFetching;if(Qt.__returned===Qt)throw Yt};tt.status&&(tt.status.fetchDispatched=!0);let xt=new Promise((Yt,oe)=>{var Jt;let te=(Jt=T(this,V))==null?void 0:Jt.call(this,D,gt,St);te&&te instanceof Promise&&te.then(Ct=>Yt(Ct===void 0?void 0:Ct),oe),yt.signal.addEventListener("abort",()=>{(!tt.ignoreFetchAbort||tt.allowStaleOnFetchAbort)&&(Yt(void 0),tt.allowStaleOnFetchAbort&&(Yt=Ct=>Bt(Ct,!0)))})}).then(Bt,Yt=>(tt.status&&(tt.status.fetchRejected=!0,tt.status.fetchError=Yt),$t(Yt))),ce=Object.assign(xt,{__abortController:yt,__staleWhileFetching:gt,__returned:void 0});return q===void 0?(this.set(D,ce,{...St.options,status:void 0}),q=T(this,E).get(D)):T(this,p)[q]=ce,ce},ht=new WeakSet,qt=function(D){if(!T(this,j))return!1;let q=D;return!!q&&q instanceof Promise&&q.hasOwnProperty("__staleWhileFetching")&&q.__abortController instanceof t},Et=new WeakSet,sn=function(D,q){T(this,M)[q]=D,T(this,O)[D]=q},Pt=new WeakSet,sr=function(D){D!==T(this,J)&&(D===T(this,K)?Tt(this,K,T(this,O)[D]):It(this,Et,sn).call(this,T(this,M)[D],T(this,O)[D]),It(this,Et,sn).call(this,T(this,J),D),Tt(this,J,D))},I=new WeakSet,xe=function(D,q){var _t,gt,yt,Ot;let tt=!1;if(T(this,z)!==0){let St=T(this,E).get(D);if(St!==void 0)if(tt=!0,T(this,z)===1)It(this,wt,an).call(this,q);else{T(this,F).call(this,St);let Bt=T(this,p)[St];if(It(this,ht,qt).call(this,Bt)?Bt.__abortController.abort(new Error("deleted")):(T(this,x)||T(this,W))&&(T(this,x)&&((_t=T(this,N))==null||_t.call(this,Bt,D,q)),T(this,W)&&((gt=T(this,$))==null||gt.push([Bt,D,q]))),T(this,E).delete(D),T(this,_)[St]=void 0,T(this,p)[St]=void 0,St===T(this,J))Tt(this,J,T(this,M)[St]);else if(St===T(this,K))Tt(this,K,T(this,O)[St]);else{let $t=T(this,M)[St];T(this,O)[$t]=T(this,O)[St];let xt=T(this,O)[St];T(this,M)[xt]=T(this,M)[St]}ur(this,z)._--,T(this,G).push(St)}}if(T(this,W)&&((yt=T(this,$))!=null&&yt.length)){let St,Bt=T(this,$);for(;St=Bt==null?void 0:Bt.shift();)(Ot=T(this,A))==null||Ot.call(this,...St)}return tt},wt=new WeakSet,an=function(D){var q,tt,_t;for(let gt of It(this,u,Be).call(this,{allowStale:!0})){let yt=T(this,p)[gt];if(It(this,ht,qt).call(this,yt))yt.__abortController.abort(new Error("deleted"));else{let Ot=T(this,_)[gt];T(this,x)&&((q=T(this,N))==null||q.call(this,yt,Ot,D)),T(this,W)&&((tt=T(this,$))==null||tt.push([yt,Ot,D]))}}if(T(this,E).clear(),T(this,p).fill(void 0),T(this,_).fill(void 0),T(this,it)&&T(this,L)&&(T(this,it).fill(0),T(this,L).fill(0)),T(this,et)&&T(this,et).fill(0),Tt(this,K,0),Tt(this,J,0),T(this,G).length=0,Tt(this,lt,0),Tt(this,z,0),T(this,W)&&T(this,$)){let gt,yt=T(this,$);for(;gt=yt==null?void 0:yt.shift();)(_t=T(this,A))==null||_t.call(this,...gt)}},At);l.LRUCache=g}),we=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.ContainerIterator=l.Container=l.Base=void 0,l.ContainerIterator=class{constructor(n=0){this.iteratorType=n}equals(n){return this.o===n.o}};var h=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};l.Base=h,l.Container=class extends h{}}),ua=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var h=we(),n=class extends h.Base{constructor(o=[]){super(),this.S=[];let s=this;o.forEach(function(t){s.push(t)})}clear(){this.i=0,this.S=[]}push(o){return this.S.push(o),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}};l.default=n}),ha=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var h=we(),n=class extends h.Base{constructor(o=[]){super(),this.j=0,this.q=[];let s=this;o.forEach(function(t){s.push(t)})}clear(){this.q=[],this.i=this.j=0}push(o){let s=this.q.length;if(this.j/s>.5&&this.j+this.i>=s&&s>4096){let t=this.i;for(let r=0;r<t;++r)this.q[r]=this.q[this.j+r];this.j=0,this.q[this.i]=o}else this.q[this.j+this.i]=o;return++this.i}pop(){if(this.i===0)return;let o=this.q[this.j++];return this.i-=1,o}front(){if(this.i!==0)return this.q[this.j]}};l.default=n}),ca=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var h=we(),n=class extends h.Base{constructor(o=[],s=function(r,e){return r>e?-1:r<e?1:0},t=!0){if(super(),this.v=s,Array.isArray(o))this.C=t?[...o]:o;else{this.C=[];let e=this;o.forEach(function(i){e.C.push(i)})}this.i=this.C.length;let r=this.i>>1;for(let e=this.i-1>>1;e>=0;--e)this.k(e,r)}m(o){let s=this.C[o];for(;o>0;){let t=o-1>>1,r=this.C[t];if(this.v(r,s)<=0)break;this.C[o]=r,o=t}this.C[o]=s}k(o,s){let t=this.C[o];for(;o<s;){let r=o<<1|1,e=r+1,i=this.C[r];if(e<this.i&&this.v(i,this.C[e])>0&&(r=e,i=this.C[e]),this.v(i,t)>=0)break;this.C[o]=i,o=r}this.C[o]=t}clear(){this.i=0,this.C.length=0}push(o){this.C.push(o),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let o=this.C[0],s=this.C.pop();return this.i-=1,this.i&&(this.C[0]=s,this.k(0,this.i>>1)),o}top(){return this.C[0]}find(o){return this.C.indexOf(o)>=0}remove(o){let s=this.C.indexOf(o);return!(s<0)&&(s===0?this.pop():s===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(s,1,this.C.pop()),this.i-=1,this.m(s),this.k(s,this.i>>1)),!0)}updateItem(o){let s=this.C.indexOf(o);return!(s<0)&&(this.m(s),this.k(s,this.i>>1),!0)}toArray(){return[...this.C]}};l.default=n}),Ui=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var h=we(),n=class extends h.Container{};l.default=n}),_e=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.throwIteratorAccessError=function(){throw new RangeError("Iterator access denied!")}}),oo=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.RandomIterator=void 0;var h=we(),n=_e(),o=class extends h.ContainerIterator{constructor(s,t){super(t),this.o=s,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,n.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,n.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,n.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,n.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(s){this.container.setElementByPos(this.o,s)}};l.RandomIterator=o}),fa=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var h,n=(h=Ui())&&h.t?h:{default:h},o=oo(),s=class Es extends o.RandomIterator{constructor(e,i,a){super(e,a),this.container=i}copy(){return new Es(this.o,this.container,this.iteratorType)}},t=class extends n.default{constructor(r=[],e=!0){if(super(),Array.isArray(r))this.J=e?[...r]:r,this.i=r.length;else{this.J=[];let i=this;r.forEach(function(a){i.pushBack(a)})}}clear(){this.i=0,this.J.length=0}begin(){return new s(0,this)}end(){return new s(this.i,this)}rBegin(){return new s(this.i-1,this,1)}rEnd(){return new s(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;return this.J[r]}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;return this.J.splice(r,1),this.i-=1,this.i}eraseElementByValue(r){let e=0;for(let i=0;i<this.i;++i)this.J[i]!==r&&(this.J[e++]=this.J[i]);return this.i=this.J.length=e,this.i}eraseElementByIterator(r){let e=r.o;return r=r.next(),this.eraseElementByPos(e),r}pushBack(r){return this.J.push(r),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(r,e){if(r<0||r>this.i-1)throw new RangeError;this.J[r]=e}insert(r,e,i=1){if(r<0||r>this.i)throw new RangeError;return this.J.splice(r,0,...new Array(i).fill(e)),this.i+=i,this.i}find(r){for(let e=0;e<this.i;++e)if(this.J[e]===r)return new s(e,this);return this.end()}reverse(){this.J.reverse()}unique(){let r=1;for(let e=1;e<this.i;++e)this.J[e]!==this.J[e-1]&&(this.J[r++]=this.J[e]);return this.i=this.J.length=r,this.i}sort(r){this.J.sort(r)}forEach(r){for(let e=0;e<this.i;++e)r(this.J[e],e,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}};l.default=t}),da=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var h,n=(h=Ui())&&h.t?h:{default:h},o=we(),s=_e(),t=class Ss extends o.ContainerIterator{constructor(i,a,c,g){super(g),this.o=i,this.h=a,this.container=c,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o.l}set pointer(i){this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o.l=i}copy(){return new Ss(this.o,this.h,this.container,this.iteratorType)}},r=class extends n.default{constructor(e=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let i=this;e.forEach(function(a){i.pushBack(a)})}V(e){let{L:i,B:a}=e;i.B=a,a.L=i,e===this.p&&(this.p=a),e===this._&&(this._=i),this.i-=1}G(e,i){let a=i.B,c={l:e,L:i,B:a};i.B=c,a.L=c,i===this.h&&(this.p=c),a===this.h&&(this._=c),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new t(this.p,this.h,this)}end(){return new t(this.h,this.h,this)}rBegin(){return new t(this._,this.h,this,1)}rEnd(){return new t(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return i.l}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return this.V(i),this.i}eraseElementByValue(e){let i=this.p;for(;i!==this.h;)i.l===e&&this.V(i),i=i.B;return this.i}eraseElementByIterator(e){let i=e.o;return i===this.h&&(0,s.throwIteratorAccessError)(),e=e.next(),this.V(i),e}pushBack(e){return this.G(e,this._),this.i}popBack(){if(this.i===0)return;let e=this._.l;return this.V(this._),e}pushFront(e){return this.G(e,this.h),this.i}popFront(){if(this.i===0)return;let e=this.p.l;return this.V(this.p),e}setElementByPos(e,i){if(e<0||e>this.i-1)throw new RangeError;let a=this.p;for(;e--;)a=a.B;a.l=i}insert(e,i,a=1){if(e<0||e>this.i)throw new RangeError;if(a<=0)return this.i;if(e===0)for(;a--;)this.pushFront(i);else if(e===this.i)for(;a--;)this.pushBack(i);else{let c=this.p;for(let d=1;d<e;++d)c=c.B;let g=c.B;for(this.i+=a;a--;)c.B={l:i,L:c},c.B.L=c,c=c.B;c.B=g,g.L=c}return this.i}find(e){let i=this.p;for(;i!==this.h;){if(i.l===e)return new t(i,this.h,this);i=i.B}return this.end()}reverse(){if(this.i<=1)return;let e=this.p,i=this._,a=0;for(;a<<1<this.i;){let c=e.l;e.l=i.l,i.l=c,e=e.B,i=i.L,a+=1}}unique(){if(this.i<=1)return this.i;let e=this.p;for(;e!==this.h;){let i=e;for(;i.B!==this.h&&i.l===i.B.l;)i=i.B,this.i-=1;e.B=i.B,e.B.L=e,e=e.B}return this.i}sort(e){if(this.i<=1)return;let i=[];this.forEach(function(c){i.push(c)}),i.sort(e);let a=this.p;i.forEach(function(c){a.l=c,a=a.B})}merge(e){let i=this;if(this.i===0)e.forEach(function(a){i.pushBack(a)});else{let a=this.p;e.forEach(function(c){for(;a!==i.h&&a.l<=c;)a=a.B;i.G(c,a.L)})}return this.i}forEach(e){let i=this.p,a=0;for(;i!==this.h;)e(i.l,a++,this),i=i.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let e=this.p;for(;e!==this.h;)yield e.l,e=e.B}).bind(this)()}};l.default=r}),pa=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var h,n=(h=Ui())&&h.t?h:{default:h},o=oo(),s=class As extends o.RandomIterator{constructor(e,i,a){super(e,a),this.container=i}copy(){return new As(this.o,this.container,this.iteratorType)}},t=class extends n.default{constructor(r=[],e=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let i=(()=>{if(typeof r.length=="number")return r.length;if(typeof r.size=="number")return r.size;if(typeof r.size=="function")return r.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=e,this.P=Math.max(Math.ceil(i/this.F),1);for(let g=0;g<this.P;++g)this.A.push(new Array(this.F));let a=Math.ceil(i/this.F);this.j=this.R=(this.P>>1)-(a>>1),this.D=this.N=this.F-i%this.F>>1;let c=this;r.forEach(function(g){c.pushBack(g)})}T(){let r=[],e=Math.max(this.P>>1,1);for(let i=0;i<e;++i)r[i]=new Array(this.F);for(let i=this.j;i<this.P;++i)r[r.length]=this.A[i];for(let i=0;i<this.R;++i)r[r.length]=this.A[i];r[r.length]=[...this.A[this.R]],this.j=e,this.R=r.length-1;for(let i=0;i<e;++i)r[r.length]=new Array(this.F);this.A=r,this.P=r.length}O(r){let e=this.D+r+1,i=e%this.F,a=i-1,c=this.j+(e-i)/this.F;return i===0&&(c-=1),c%=this.P,a<0&&(a+=this.F),{curNodeBucketIndex:c,curNodePointerIndex:a}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new s(0,this)}end(){return new s(this.i,this)}rBegin(){return new s(this.i-1,this,1)}rEnd(){return new s(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(r){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=r,this.i}popBack(){if(this.i===0)return;let r=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,r}pushFront(r){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=r,this.i}popFront(){if(this.i===0)return;let r=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,r}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let{curNodeBucketIndex:e,curNodePointerIndex:i}=this.O(r);return this.A[e][i]}setElementByPos(r,e){if(r<0||r>this.i-1)throw new RangeError;let{curNodeBucketIndex:i,curNodePointerIndex:a}=this.O(r);this.A[i][a]=e}insert(r,e,i=1){if(r<0||r>this.i)throw new RangeError;if(r===0)for(;i--;)this.pushFront(e);else if(r===this.i)for(;i--;)this.pushBack(e);else{let a=[];for(let c=r;c<this.i;++c)a.push(this.getElementByPos(c));this.cut(r-1);for(let c=0;c<i;++c)this.pushBack(e);for(let c=0;c<a.length;++c)this.pushBack(a[c])}return this.i}cut(r){if(r<0)return this.clear(),0;let{curNodeBucketIndex:e,curNodePointerIndex:i}=this.O(r);return this.R=e,this.N=i,this.i=r+1,this.i}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;if(r===0)this.popFront();else if(r===this.i-1)this.popBack();else{let e=[];for(let a=r+1;a<this.i;++a)e.push(this.getElementByPos(a));this.cut(r),this.popBack();let i=this;e.forEach(function(a){i.pushBack(a)})}return this.i}eraseElementByValue(r){if(this.i===0)return 0;let e=[];for(let a=0;a<this.i;++a){let c=this.getElementByPos(a);c!==r&&e.push(c)}let i=e.length;for(let a=0;a<i;++a)this.setElementByPos(a,e[a]);return this.cut(i-1)}eraseElementByIterator(r){let e=r.o;return this.eraseElementByPos(e),r=r.next()}find(r){for(let e=0;e<this.i;++e)if(this.getElementByPos(e)===r)return new s(e,this);return this.end()}reverse(){let r=0,e=this.i-1;for(;r<e;){let i=this.getElementByPos(r);this.setElementByPos(r,this.getElementByPos(e)),this.setElementByPos(e,i),r+=1,e-=1}}unique(){if(this.i<=1)return this.i;let r=1,e=this.getElementByPos(0);for(let i=1;i<this.i;++i){let a=this.getElementByPos(i);a!==e&&(e=a,this.setElementByPos(r++,a))}for(;this.i>r;)this.popBack();return this.i}sort(r){let e=[];for(let i=0;i<this.i;++i)e.push(this.getElementByPos(i));e.sort(r);for(let i=0;i<this.i;++i)this.setElementByPos(i,e[i])}shrinkToFit(){if(this.i===0)return;let r=[];this.forEach(function(e){r.push(e)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let e=0;e<this.P;++e)this.A.push(new Array(this.F));for(let e=0;e<r.length;++e)this.pushBack(r[e])}forEach(r){for(let e=0;e<this.i;++e)r(this.getElementByPos(e),e,this)}[Symbol.iterator](){return(function*(){for(let r=0;r<this.i;++r)yield this.getElementByPos(r)}).bind(this)()}};l.default=t}),ga=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.TreeNodeEnableIndex=l.TreeNode=void 0;var h=class{constructor(n,o){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=n,this.l=o}L(){let n=this;if(n.ee===1&&n.tt.tt===n)n=n.W;else if(n.U)for(n=n.U;n.W;)n=n.W;else{let o=n.tt;for(;o.U===n;)n=o,o=n.tt;n=o}return n}B(){let n=this;if(n.W){for(n=n.W;n.U;)n=n.U;return n}{let o=n.tt;for(;o.W===n;)n=o,o=n.tt;return n.W!==o?o:n}}te(){let n=this.tt,o=this.W,s=o.U;return n.tt===this?n.tt=o:n.U===this?n.U=o:n.W=o,o.tt=n,o.U=this,this.tt=o,this.W=s,s&&(s.tt=this),o}se(){let n=this.tt,o=this.U,s=o.W;return n.tt===this?n.tt=o:n.U===this?n.U=o:n.W=o,o.tt=n,o.W=this,this.tt=o,this.U=s,s&&(s.tt=this),o}};l.TreeNode=h,l.TreeNodeEnableIndex=class extends h{constructor(){super(...arguments),this.rt=1}te(){let n=super.te();return this.ie(),n.ie(),n}se(){let n=super.se();return this.ie(),n.ie(),n}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}}}),so=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var h=ga(),n=we(),o=_e(),s=class extends n.Container{constructor(t=function(e,i){return e<i?-1:e>i?1:0},r=!1){super(),this.Y=void 0,this.v=t,r?(this.re=h.TreeNodeEnableIndex,this.M=function(e,i,a){let c=this.ne(e,i,a);if(c){let g=c.tt;for(;g!==this.h;)g.rt+=1,g=g.tt;let d=this.he(c);if(d){let{parentNode:b,grandParent:w,curNode:y}=d;b.ie(),w.ie(),y.ie()}}return this.i},this.V=function(e){let i=this.fe(e);for(;i!==this.h;)i.rt-=1,i=i.tt}):(this.re=h.TreeNode,this.M=function(e,i,a){let c=this.ne(e,i,a);return c&&this.he(c),this.i},this.V=this.fe),this.h=new this.re}X(t,r){let e=this.h;for(;t;){let i=this.v(t.u,r);if(i<0)t=t.W;else{if(!(i>0))return t;e=t,t=t.U}}return e}Z(t,r){let e=this.h;for(;t;)this.v(t.u,r)<=0?t=t.W:(e=t,t=t.U);return e}$(t,r){let e=this.h;for(;t;){let i=this.v(t.u,r);if(i<0)e=t,t=t.W;else{if(!(i>0))return t;t=t.U}}return e}rr(t,r){let e=this.h;for(;t;)this.v(t.u,r)<0?(e=t,t=t.W):t=t.U;return e}ue(t){for(;;){let r=t.tt;if(r===this.h)return;if(t.ee===1)return void(t.ee=0);if(t===r.U){let e=r.W;if(e.ee===1)e.ee=0,r.ee=1,r===this.Y?this.Y=r.te():r.te();else{if(e.W&&e.W.ee===1)return e.ee=r.ee,r.ee=0,e.W.ee=0,void(r===this.Y?this.Y=r.te():r.te());e.U&&e.U.ee===1?(e.ee=1,e.U.ee=0,e.se()):(e.ee=1,t=r)}}else{let e=r.U;if(e.ee===1)e.ee=0,r.ee=1,r===this.Y?this.Y=r.se():r.se();else{if(e.U&&e.U.ee===1)return e.ee=r.ee,r.ee=0,e.U.ee=0,void(r===this.Y?this.Y=r.se():r.se());e.W&&e.W.ee===1?(e.ee=1,e.W.ee=0,e.te()):(e.ee=1,t=r)}}}}fe(t){if(this.i===1)return this.clear(),this.h;let r=t;for(;r.U||r.W;){if(r.W)for(r=r.W;r.U;)r=r.U;else r=r.U;[t.u,r.u]=[r.u,t.u],[t.l,r.l]=[r.l,t.l],t=r}this.h.U===r?this.h.U=r.tt:this.h.W===r&&(this.h.W=r.tt),this.ue(r);let e=r.tt;return r===e.U?e.U=void 0:e.W=void 0,this.i-=1,this.Y.ee=0,e}oe(t,r){return t!==void 0&&(!(!this.oe(t.U,r)&&!r(t))||this.oe(t.W,r))}he(t){for(;;){let r=t.tt;if(r.ee===0)return;let e=r.tt;if(r===e.U){let i=e.W;if(i&&i.ee===1){if(i.ee=r.ee=0,e===this.Y)return;e.ee=1,t=e;continue}if(t===r.W){if(t.ee=0,t.U&&(t.U.tt=r),t.W&&(t.W.tt=e),r.W=t.U,e.U=t.W,t.U=r,t.W=e,e===this.Y)this.Y=t,this.h.tt=t;else{let a=e.tt;a.U===e?a.U=t:a.W=t}return t.tt=e.tt,r.tt=t,e.tt=t,e.ee=1,{parentNode:r,grandParent:e,curNode:t}}r.ee=0,e===this.Y?this.Y=e.se():e.se(),e.ee=1}else{let i=e.U;if(i&&i.ee===1){if(i.ee=r.ee=0,e===this.Y)return;e.ee=1,t=e;continue}if(t===r.U){if(t.ee=0,t.U&&(t.U.tt=e),t.W&&(t.W.tt=r),e.W=t.U,r.U=t.W,t.U=e,t.W=r,e===this.Y)this.Y=t,this.h.tt=t;else{let a=e.tt;a.U===e?a.U=t:a.W=t}return t.tt=e.tt,r.tt=t,e.tt=t,e.ee=1,{parentNode:r,grandParent:e,curNode:t}}r.ee=0,e===this.Y?this.Y=e.te():e.te(),e.ee=1}return}}ne(t,r,e){if(this.Y===void 0)return this.i+=1,this.Y=new this.re(t,r),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,void(this.h.W=this.Y);let i,a=this.h.U,c=this.v(a.u,t);if(c!==0){if(c>0)a.U=new this.re(t,r),a.U.tt=a,i=a.U,this.h.U=i;else{let g=this.h.W,d=this.v(g.u,t);if(d===0)return void(g.l=r);if(d<0)g.W=new this.re(t,r),g.W.tt=g,i=g.W,this.h.W=i;else{if(e!==void 0){let b=e.o;if(b!==this.h){let w=this.v(b.u,t);if(w===0)return void(b.l=r);if(w>0){let y=b.L(),v=this.v(y.u,t);if(v===0)return void(y.l=r);v<0&&(i=new this.re(t,r),y.W===void 0?(y.W=i,i.tt=y):(b.U=i,i.tt=b))}}}if(i===void 0)for(i=this.Y;;){let b=this.v(i.u,t);if(b>0){if(i.U===void 0){i.U=new this.re(t,r),i.U.tt=i,i=i.U;break}i=i.U}else{if(!(b<0))return void(i.l=r);if(i.W===void 0){i.W=new this.re(t,r),i.W.tt=i,i=i.W;break}i=i.W}}}}return this.i+=1,i}a.l=r}I(t,r){for(;t;){let e=this.v(t.u,r);if(e<0)t=t.W;else{if(!(e>0))return t;t=t.U}}return t||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(t,r){let e=t.o;if(e===this.h&&(0,o.throwIteratorAccessError)(),this.i===1)return e.u=r,!0;if(e===this.h.U)return this.v(e.B().u,r)>0&&(e.u=r,!0);if(e===this.h.W)return this.v(e.L().u,r)<0&&(e.u=r,!0);let i=e.L().u;if(this.v(i,r)>=0)return!1;let a=e.B().u;return!(this.v(a,r)<=0)&&(e.u=r,!0)}eraseElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let r=0,e=this;return this.oe(this.Y,function(i){return t===r?(e.V(i),!0):(r+=1,!1)}),this.i}eraseElementByKey(t){if(this.i===0)return!1;let r=this.I(this.Y,t);return r!==this.h&&(this.V(r),!0)}eraseElementByIterator(t){let r=t.o;r===this.h&&(0,o.throwIteratorAccessError)();let e=r.W===void 0;return t.iteratorType===0?e&&t.next():(!e||r.U===void 0)&&t.next(),this.V(r),t}forEach(t){let r=0;for(let e of this)t(e,r++,this)}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let r,e=0;for(let i of this){if(e===t){r=i;break}e+=1}return r}getHeight(){if(this.i===0)return 0;let t=function(r){return r?Math.max(t(r.U),t(r.W))+1:0};return t(this.Y)}};l.default=s}),ao=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var h=we(),n=_e(),o=class extends h.ContainerIterator{constructor(s,t,r){super(r),this.o=s,this.h=t,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,n.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,n.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let s=this.o,t=this.h.tt;if(s===this.h)return t?t.rt-1:0;let r=0;for(s.U&&(r+=s.U.rt);s!==t;){let e=s.tt;s===e.W&&(r+=1,e.U&&(r+=e.U.rt)),s=e}return r}};l.default=o}),ba=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var h=s(so()),n=s(ao()),o=_e();function s(e){return e&&e.t?e:{default:e}}var t=class Is extends n.default{constructor(i,a,c,g){super(i,a,g),this.container=c}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.u}copy(){return new Is(this.o,this.h,this.container,this.iteratorType)}},r=class extends h.default{constructor(e=[],i,a){super(i,a);let c=this;e.forEach(function(g){c.insert(g)})}*K(e){e!==void 0&&(yield*this.K(e.U),yield e.u,yield*this.K(e.W))}begin(){return new t(this.h.U||this.h,this.h,this)}end(){return new t(this.h,this.h,this)}rBegin(){return new t(this.h.W||this.h,this.h,this,1)}rEnd(){return new t(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(e,i){return this.M(e,void 0,i)}find(e){let i=this.I(this.Y,e);return new t(i,this.h,this)}lowerBound(e){let i=this.X(this.Y,e);return new t(i,this.h,this)}upperBound(e){let i=this.Z(this.Y,e);return new t(i,this.h,this)}reverseLowerBound(e){let i=this.$(this.Y,e);return new t(i,this.h,this)}reverseUpperBound(e){let i=this.rr(this.Y,e);return new t(i,this.h,this)}union(e){let i=this;return e.forEach(function(a){i.insert(a)}),this.i}[Symbol.iterator](){return this.K(this.Y)}};l.default=r}),ma=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var h=s(so()),n=s(ao()),o=_e();function s(e){return e&&e.t?e:{default:e}}var t=class ks extends n.default{constructor(i,a,c,g){super(i,a,g),this.container=c}get pointer(){this.o===this.h&&(0,o.throwIteratorAccessError)();let i=this;return new Proxy([],{get:(a,c)=>c==="0"?i.o.u:c==="1"?i.o.l:void 0,set(a,c,g){if(c!=="1")throw new TypeError("props must be 1");return i.o.l=g,!0}})}copy(){return new ks(this.o,this.h,this.container,this.iteratorType)}},r=class extends h.default{constructor(e=[],i,a){super(i,a);let c=this;e.forEach(function(g){c.setElement(g[0],g[1])})}*K(e){e!==void 0&&(yield*this.K(e.U),yield[e.u,e.l],yield*this.K(e.W))}begin(){return new t(this.h.U||this.h,this.h,this)}end(){return new t(this.h,this.h,this)}rBegin(){return new t(this.h.W||this.h,this.h,this,1)}rEnd(){return new t(this.h,this.h,this,1)}front(){if(this.i===0)return;let e=this.h.U;return[e.u,e.l]}back(){if(this.i===0)return;let e=this.h.W;return[e.u,e.l]}lowerBound(e){let i=this.X(this.Y,e);return new t(i,this.h,this)}upperBound(e){let i=this.Z(this.Y,e);return new t(i,this.h,this)}reverseLowerBound(e){let i=this.$(this.Y,e);return new t(i,this.h,this)}reverseUpperBound(e){let i=this.rr(this.Y,e);return new t(i,this.h,this)}setElement(e,i,a){return this.M(e,i,a)}find(e){let i=this.I(this.Y,e);return new t(i,this.h,this)}getElementByKey(e){return this.I(this.Y,e).l}union(e){let i=this;return e.forEach(function(a){i.setElement(a[0],a[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}};l.default=r}),lo=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.default=function(h){let n=typeof h;return n==="object"&&h!==null||n==="function"}}),uo=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.HashContainerIterator=l.HashContainer=void 0;var h,n=we(),o=(h=lo())&&h.t?h:{default:h},s=_e(),t=class extends n.ContainerIterator{constructor(e,i,a){super(a),this.o=e,this.h=i,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L,this})}};l.HashContainerIterator=t;var r=class extends n.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(e){let{L:i,B:a}=e;i.B=a,a.L=i,e===this.p&&(this.p=a),e===this._&&(this._=i),this.i-=1}M(e,i,a){let c;if(a===void 0&&(a=(0,o.default)(e)),a){let g=e[this.HASH_TAG];if(g!==void 0)return this.H[g].l=i,this.i;Object.defineProperty(e,this.HASH_TAG,{value:this.H.length,configurable:!0}),c={u:e,l:i,L:this._,B:this.h},this.H.push(c)}else{let g=this.g[e];if(g)return g.l=i,this.i;c={u:e,l:i,L:this._,B:this.h},this.g[e]=c}return this.i===0?(this.p=c,this.h.B=c):this._.B=c,this._=c,this.h.L=c,++this.i}I(e,i){if(i===void 0&&(i=(0,o.default)(e)),i){let a=e[this.HASH_TAG];return a===void 0?this.h:this.H[a]}return this.g[e]||this.h}clear(){let e=this.HASH_TAG;this.H.forEach(function(i){delete i.u[e]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(e,i){let a;if(i===void 0&&(i=(0,o.default)(e)),i){let c=e[this.HASH_TAG];if(c===void 0)return!1;delete e[this.HASH_TAG],a=this.H[c],delete this.H[c]}else{if(a=this.g[e],a===void 0)return!1;delete this.g[e]}return this.V(a),!0}eraseElementByIterator(e){let i=e.o;return i===this.h&&(0,s.throwIteratorAccessError)(),this.V(i),e.next()}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return this.V(i),this.i}};l.HashContainer=r}),ya=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var h=uo(),n=_e(),o=class Ts extends h.HashContainerIterator{constructor(r,e,i,a){super(r,e,a),this.container=i}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.u}copy(){return new Ts(this.o,this.h,this.container,this.iteratorType)}},s=class extends h.HashContainer{constructor(t=[]){super();let r=this;t.forEach(function(e){r.insert(e)})}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(t,r){return this.M(t,void 0,r)}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let r=this.p;for(;t--;)r=r.B;return r.u}find(t,r){let e=this.I(t,r);return new o(e,this.h,this)}forEach(t){let r=0,e=this.p;for(;e!==this.h;)t(e.u,r++,this),e=e.B}[Symbol.iterator](){return(function*(){let t=this.p;for(;t!==this.h;)yield t.u,t=t.B}).bind(this)()}};l.default=s}),wa=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var h,n=uo(),o=(h=lo())&&h.t?h:{default:h},s=_e(),t=class Os extends n.HashContainerIterator{constructor(i,a,c,g){super(i,a,g),this.container=c}get pointer(){this.o===this.h&&(0,s.throwIteratorAccessError)();let i=this;return new Proxy([],{get:(a,c)=>c==="0"?i.o.u:c==="1"?i.o.l:void 0,set(a,c,g){if(c!=="1")throw new TypeError("props must be 1");return i.o.l=g,!0}})}copy(){return new Os(this.o,this.h,this.container,this.iteratorType)}},r=class extends n.HashContainer{constructor(e=[]){super();let i=this;e.forEach(function(a){i.setElement(a[0],a[1])})}begin(){return new t(this.p,this.h,this)}end(){return new t(this.h,this.h,this)}rBegin(){return new t(this._,this.h,this,1)}rEnd(){return new t(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(e,i,a){return this.M(e,i,a)}getElementByKey(e,i){if(i===void 0&&(i=(0,o.default)(e)),i){let c=e[this.HASH_TAG];return c!==void 0?this.H[c].l:void 0}let a=this.g[e];return a?a.l:void 0}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return[i.u,i.l]}find(e,i){let a=this.I(e,i);return new t(a,this.h,this)}forEach(e){let i=0,a=this.p;for(;a!==this.h;)e([a.u,a.l],i++,this),a=a.B}[Symbol.iterator](){return(function*(){let e=this.p;for(;e!==this.h;)yield[e.u,e.l],e=e.B}).bind(this)()}};l.default=r}),_a=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"t",{value:!0}),Object.defineProperty(l,"Deque",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(l,"HashMap",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(l,"HashSet",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(l,"LinkList",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(l,"OrderedMap",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(l,"OrderedSet",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(l,"PriorityQueue",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(l,"Queue",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(l,"Stack",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(l,"Vector",{enumerable:!0,get:function(){return s.default}});var h=g(ua()),n=g(ha()),o=g(ca()),s=g(fa()),t=g(da()),r=g(pa()),e=g(ba()),i=g(ma()),a=g(ya()),c=g(wa());function g(d){return d&&d.t?d:{default:d}}}),va=ft((l,h)=>{ot(),at(),st();var n=_a().OrderedSet,o=ye()("number-allocator:trace"),s=ye()("number-allocator:error");function t(e,i){this.low=e,this.high=i}function r(e,i){if(!(this instanceof r))return new r(e,i);this.min=e,this.max=i,this.ss=new n([],(a,c)=>a.compare(c)),o("Create"),this.clear()}t.prototype.equals=function(e){return this.low===e.low&&this.high===e.high},t.prototype.compare=function(e){return this.low<e.low&&this.high<e.low?-1:e.low<this.low&&e.high<this.low?1:0},r.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},r.prototype.alloc=function(){if(this.ss.size()===0)return o("alloc():empty"),null;let e=this.ss.begin(),i=e.pointer.low,a=e.pointer.high,c=i;return c+1<=a?this.ss.updateKeyByIterator(e,new t(i+1,a)):this.ss.eraseElementByPos(0),o("alloc():"+c),c},r.prototype.use=function(e){let i=new t(e,e),a=this.ss.lowerBound(i);if(!a.equals(this.ss.end())){let c=a.pointer.low,g=a.pointer.high;return a.pointer.equals(i)?(this.ss.eraseElementByIterator(a),o("use():"+e),!0):!(c>e)&&(c===e?(this.ss.updateKeyByIterator(a,new t(c+1,g)),o("use():"+e),!0):g===e?(this.ss.updateKeyByIterator(a,new t(c,g-1)),o("use():"+e),!0):(this.ss.updateKeyByIterator(a,new t(e+1,g)),this.ss.insert(new t(c,e-1)),o("use():"+e),!0))}return o("use():failed"),!1},r.prototype.free=function(e){if(e<this.min||e>this.max)return void s("free():"+e+" is out of range");let i=new t(e,e),a=this.ss.upperBound(i);if(a.equals(this.ss.end())){if(a.equals(this.ss.begin()))return void this.ss.insert(i);a.pre();let c=a.pointer.high;a.pointer.high+1===e?this.ss.updateKeyByIterator(a,new t(c,e)):this.ss.insert(i)}else if(a.equals(this.ss.begin()))if(e+1===a.pointer.low){let c=a.pointer.high;this.ss.updateKeyByIterator(a,new t(e,c))}else this.ss.insert(i);else{let c=a.pointer.low,g=a.pointer.high;a.pre();let d=a.pointer.low;a.pointer.high+1===e?e+1===c?(this.ss.eraseElementByIterator(a),this.ss.updateKeyByIterator(a,new t(d,g))):this.ss.updateKeyByIterator(a,new t(d,e)):e+1===c?(this.ss.eraseElementByIterator(a.next()),this.ss.insert(new t(e,g))):this.ss.insert(i)}o("free():"+e)},r.prototype.clear=function(){o("clear()"),this.ss.clear(),this.ss.insert(new t(this.min,this.max))},r.prototype.intervalCount=function(){return this.ss.size()},r.prototype.dump=function(){for(let e of this.ss);},h.exports=r}),ho=ft((l,h)=>{ot(),at(),st();var n=va();h.exports.NumberAllocator=n}),Ea=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"__esModule",{value:!0});var h=la(),n=ho();l.default=class{constructor(o){o>0&&(this.aliasToTopic=new h.LRUCache({max:o}),this.topicToAlias={},this.numberAllocator=new n.NumberAllocator(1,o),this.max=o,this.length=0)}put(o,s){if(s===0||s>this.max)return!1;let t=this.aliasToTopic.get(s);return t&&delete this.topicToAlias[t],this.aliasToTopic.set(s,o),this.topicToAlias[o]=s,this.numberAllocator.use(s),this.length=this.aliasToTopic.size,!0}getTopicByAlias(o){return this.aliasToTopic.get(o)}getAliasByTopic(o){let s=this.topicToAlias[o];return typeof s<"u"&&this.aliasToTopic.get(s),s}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}}}),Sa=ft(l=>{ot(),at(),st();var h=l&&l.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});var n=wr(),o=h(Ea()),s=Je();l.default=(t,r)=>{t.log("_handleConnack");let{options:e}=t,i=e.protocolVersion===5?r.reasonCode:r.returnCode;if(clearTimeout(t.connackTimer),delete t.topicAliasSend,r.properties){if(r.properties.topicAliasMaximum){if(r.properties.topicAliasMaximum>65535)return void t.emit("error",new Error("topicAliasMaximum from broker is out of range"));r.properties.topicAliasMaximum>0&&(t.topicAliasSend=new o.default(r.properties.topicAliasMaximum))}r.properties.serverKeepAlive&&e.keepalive&&(e.keepalive=r.properties.serverKeepAlive),r.properties.maximumPacketSize&&(e.properties||(e.properties={}),e.properties.maximumPacketSize=r.properties.maximumPacketSize)}if(i===0)t.reconnecting=!1,t._onConnect(r);else if(i>0){let a=new s.ErrorWithReasonCode(`Connection refused: ${n.ReasonCodes[i]}`,i);t.emit("error",a),t.options.reconnectOnConnackError&&t._cleanUp(!0)}}}),Aa=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"__esModule",{value:!0}),l.default=(h,n,o)=>{h.log("handling pubrel packet");let s=typeof o<"u"?o:h.noop,{messageId:t}=n,r={cmd:"pubcomp",messageId:t};h.incomingStore.get(n,(e,i)=>{e?h._sendPacket(r,s):(h.emit("message",i.topic,i.payload,i),h.handleMessage(i,a=>{if(a)return s(a);h.incomingStore.del(i,h.noop),h._sendPacket(r,s)}))})}}),Ia=ft(l=>{ot(),at(),st();var h=l&&l.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});var n=h(oa()),o=h(aa()),s=h(Sa()),t=h(wr()),r=h(Aa());l.default=(e,i,a)=>{let{options:c}=e;if(c.protocolVersion===5&&c.properties&&c.properties.maximumPacketSize&&c.properties.maximumPacketSize<i.length)return e.emit("error",new Error(`exceeding packets size ${i.cmd}`)),e.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),e;switch(e.log("_handlePacket :: emitting packetreceive"),e.emit("packetreceive",i),i.cmd){case"publish":(0,n.default)(e,i,a);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":e.reschedulePing(),(0,t.default)(e,i),a();break;case"pubrel":e.reschedulePing(),(0,r.default)(e,i,a);break;case"connack":(0,s.default)(e,i),a();break;case"auth":e.reschedulePing(),(0,o.default)(e,i),a();break;case"pingresp":e.log("_handlePacket :: received pingresp"),e.reschedulePing(!0),a();break;case"disconnect":e.emit("disconnect",i),a();break;default:e.log("_handlePacket :: unknown command"),a()}}}),ka=ft(l=>{ot(),at(),st();var h=l&&l.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.TypedEventEmitter=void 0;var n=h((Ue(),Lt(Ce))),o=Je(),s=class{};l.TypedEventEmitter=s,(0,o.applyMixin)(s,n.default)}),_r=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"__esModule",{value:!0}),l.isReactNativeBrowser=l.isWebWorker=void 0;var h,n=()=>{var t,r;return!(typeof self!="object"||(r=(t=self==null?void 0:self.constructor)===null||t===void 0?void 0:t.name)===null||r===void 0||!r.includes("WorkerGlobalScope"))},o=()=>typeof navigator<"u"&&navigator.product==="ReactNative",s=typeof window<"u"&&(typeof navigator<"u"&&((h=navigator.userAgent)===null||h===void 0?void 0:h.toLowerCase().indexOf(" electron/"))>-1&&Ft!=null&&Ft.versions?!Object.prototype.hasOwnProperty.call(Ft.versions,"electron"):typeof window.document<"u")||n()||o();l.isWebWorker=n(),l.isReactNativeBrowser=o(),l.default=s}),Ta=ft((l,h)=>{var n,o;ot(),at(),st(),n=l,o=function(s){var t,r=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,e=536870912,i=2*e,a=new WeakMap,c=function(d,b){return function(w){var y=b.get(w),v=y===void 0?w.size:y<i?y+1:0;if(!w.has(v))return d(w,v);if(w.size<e){for(;w.has(v);)v=Math.floor(Math.random()*i);return d(w,v)}if(w.size>r)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;w.has(v);)v=Math.floor(Math.random()*r);return d(w,v)}}((t=a,function(d,b){return t.set(d,b),b}),a),g=function(d){return function(b){var w=d(b);return b.add(w),w}}(c);s.addUniqueNumber=g,s.generateUniqueNumber=c},typeof l=="object"&&typeof h<"u"?o(l):typeof define=="function"&&define.amd?define(["exports"],o):o((n=typeof globalThis<"u"?globalThis:n||self).fastUniqueNumbers={})}),Oa=ft((l,h)=>{var n,o;ot(),at(),st(),n=l,o=function(s,t){s.load=function(r){var e=new Map([[0,function(){}]]),i=new Map([[0,function(){}]]),a=new Map,c=new Worker(r);return c.addEventListener("message",function(g){var d=g.data;if(function(p){return p.method!==void 0&&p.method==="call"}(d)){var b=d.params,w=b.timerId,y=b.timerType;if(y==="interval"){var v=e.get(w);if(typeof v=="number"){var N=a.get(v);if(N===void 0||N.timerId!==w||N.timerType!==y)throw new Error("The timer is in an undefined state.")}else{if(!(typeof v<"u"))throw new Error("The timer is in an undefined state.");v()}}else if(y==="timeout"){var A=i.get(w);if(typeof A=="number"){var V=a.get(A);if(V===void 0||V.timerId!==w||V.timerType!==y)throw new Error("The timer is in an undefined state.")}else{if(!(typeof A<"u"))throw new Error("The timer is in an undefined state.");A(),i.delete(w)}}}else{if(!function(p){return p.error===null&&typeof p.id=="number"}(d)){var rt=d.error.message;throw new Error(rt)}var z=d.id,lt=a.get(z);if(lt===void 0)throw new Error("The timer is in an undefined state.");var E=lt.timerId,_=lt.timerType;a.delete(z),_==="interval"?e.delete(E):i.delete(E)}}),{clearInterval:function(g){var d=t.generateUniqueNumber(a);a.set(d,{timerId:g,timerType:"interval"}),e.set(g,d),c.postMessage({id:d,method:"clear",params:{timerId:g,timerType:"interval"}})},clearTimeout:function(g){var d=t.generateUniqueNumber(a);a.set(d,{timerId:g,timerType:"timeout"}),i.set(g,d),c.postMessage({id:d,method:"clear",params:{timerId:g,timerType:"timeout"}})},setInterval:function(g){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=t.generateUniqueNumber(e);return e.set(b,function(){g(),typeof e.get(b)=="function"&&c.postMessage({id:null,method:"set",params:{delay:d,now:performance.now(),timerId:b,timerType:"interval"}})}),c.postMessage({id:null,method:"set",params:{delay:d,now:performance.now(),timerId:b,timerType:"interval"}}),b},setTimeout:function(g){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=t.generateUniqueNumber(i);return i.set(b,g),c.postMessage({id:null,method:"set",params:{delay:d,now:performance.now(),timerId:b,timerType:"timeout"}}),b}}}},typeof l=="object"&&typeof h<"u"?o(l,Ta()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],o):o((n=typeof globalThis<"u"?globalThis:n||self).workerTimersBroker={},n.fastUniqueNumbers)}),Ca=ft((l,h)=>{var n,o;ot(),at(),st(),n=l,o=function(s,t){var r,e,i,a=(r=t.load,e=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,i=null,function(){if(i!==null)return i;var c=new Blob([e],{type:"application/javascript; charset=utf-8"}),g=URL.createObjectURL(c);return i=r(g),setTimeout(function(){return URL.revokeObjectURL(g)}),i});s.clearInterval=function(c){return a().clearInterval(c)},s.clearTimeout=function(c){return a().clearTimeout(c)},s.setInterval=function(){var c;return(c=a()).setInterval.apply(c,arguments)},s.setTimeout=function(){var c;return(c=a()).setTimeout.apply(c,arguments)}},typeof l=="object"&&typeof h<"u"?o(l,Oa()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],o):o((n=typeof globalThis<"u"?globalThis:n||self).workerTimers={},n.workerTimersBroker)}),Ra=ft(l=>{ot(),at(),st();var h,n=l&&l.__createBinding||(Object.create?function(a,c,g,d){d===void 0&&(d=g);var b=Object.getOwnPropertyDescriptor(c,g);(!b||("get"in b?!c.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return c[g]}}),Object.defineProperty(a,d,b)}:function(a,c,g,d){d===void 0&&(d=g),a[d]=c[g]}),o=l&&l.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),s=l&&l.__importStar||(h=function(a){return(h=Object.getOwnPropertyNames||function(c){var g=[];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(g[g.length]=d);return g})(a)},function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var g=h(a),d=0;d<g.length;d++)g[d]!=="default"&&n(c,a,g[d]);return o(c,a),c});Object.defineProperty(l,"__esModule",{value:!0});var t=s(_r()),r=Ca(),e={set:r.setInterval,clear:r.clearInterval},i={set:(a,c)=>setInterval(a,c),clear:a=>clearInterval(a)};l.default=a=>{switch(a){case"native":return i;case"worker":return e;default:return!t.default||t.isWebWorker||t.isReactNativeBrowser?i:e}}}),co=ft(l=>{ot(),at(),st();var h=l&&l.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(l,"__esModule",{value:!0});var n=h(Ra());l.default=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(o,s){this.destroyed=!1,this.client=o,this.timer=typeof s=="object"&&"set"in s&&"clear"in s?s:(0,n.default)(s),this.setKeepalive(o.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(o){if(o*=1e3,isNaN(o)||o<=0||o>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${o}`);this._keepalive=o,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${o}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let o=Math.ceil(1.5*this._keepalive);this._keepaliveTimeoutTimestamp=Date.now()+o,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}}}),Li=ft(l=>{ot(),at(),st();var h,n=l&&l.__createBinding||(Object.create?function(lt,E,_,p){p===void 0&&(p=_);var O=Object.getOwnPropertyDescriptor(E,_);(!O||("get"in O?!E.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return E[_]}}),Object.defineProperty(lt,p,O)}:function(lt,E,_,p){p===void 0&&(p=_),lt[p]=E[_]}),o=l&&l.__setModuleDefault||(Object.create?function(lt,E){Object.defineProperty(lt,"default",{enumerable:!0,value:E})}:function(lt,E){lt.default=E}),s=l&&l.__importStar||(h=function(lt){return(h=Object.getOwnPropertyNames||function(E){var _=[];for(var p in E)Object.prototype.hasOwnProperty.call(E,p)&&(_[_.length]=p);return _})(lt)},function(lt){if(lt&&lt.__esModule)return lt;var E={};if(lt!=null)for(var _=h(lt),p=0;p<_.length;p++)_[p]!=="default"&&n(E,lt,_[p]);return o(E,lt),E}),t=l&&l.__importDefault||function(lt){return lt&&lt.__esModule?lt:{default:lt}};Object.defineProperty(l,"__esModule",{value:!0});var r=t(Ls()),e=t(ea()),i=t(io()),a=De(),c=t(ia()),g=s(na()),d=t(ye()),b=t(no()),w=t(Ia()),y=Je(),v=ka(),N=t(co()),A=s(_r()),V=globalThis.setImmediate||((...lt)=>{let E=lt.shift();(0,y.nextTick)(()=>{E(...lt)})}),rt={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},z=class ln extends v.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(E,_){super(),this.options=_||{};for(let p in rt)typeof this.options[p]>"u"?this.options[p]=rt[p]:this.options[p]=_[p];this.log=this.options.log||(0,d.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",ln.VERSION),A.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",A.default?"browser":"node"),this.log("MqttClient :: options.protocol",_.protocol),this.log("MqttClient :: options.protocolVersion",_.protocolVersion),this.log("MqttClient :: options.username",_.username),this.log("MqttClient :: options.keepalive",_.keepalive),this.log("MqttClient :: options.reconnectPeriod",_.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",_.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",_.properties?_.properties.topicAliasMaximum:void 0),this.options.clientId=typeof _.clientId=="string"?_.clientId:ln.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=_.protocolVersion===5&&_.customHandleAcks?_.customHandleAcks:(...p)=>{p[3](null,0)},this.options.writeCache||(e.default.writeToStream.cacheNumbers=!1),this.streamBuilder=E,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new i.default:this.options.messageIdProvider,this.outgoingStore=_.outgoingStore||new b.default,this.incomingStore=_.incomingStore||new b.default,this.queueQoSZero=_.queueQoSZero===void 0||_.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,_.properties&&_.properties.topicAliasMaximum>0&&(_.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new r.default(_.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:p}=this,O=()=>{let M=p.shift();this.log("deliver :: entry %o",M);let K=null;if(!M)return void this._resubscribe();K=M.packet,this.log("deliver :: call _sendPacket for %o",K);let J=!0;K.messageId&&K.messageId!==0&&(this.messageIdProvider.register(K.messageId)||(J=!1)),J?this._sendPacket(K,G=>{M.cb&&M.cb(G),O()}):(this.log("messageId: %d has already used. The message is skipped and removed.",K.messageId),O())};this.log("connect :: sending queued packets"),O()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(E,_){_()}handleMessage(E,_){_()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var E;let _=new a.Writable,p=e.default.parser(this.options),O=null,M=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new b.default,this.outgoingStore=this.options.outgoingStore||new b.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),p.on("packet",$=>{this.log("parser :: on packet push to packets array."),M.push($)});let K=()=>{this.log("work :: getting next packet in queue");let $=M.shift();if($)this.log("work :: packet pulled from queue"),(0,w.default)(this,$,J);else{this.log("work :: no packets in queue");let et=O;O=null,this.log("work :: done flag is %s",!!et),et&&et()}},J=()=>{if(M.length)(0,y.nextTick)(K);else{let $=O;O=null,$()}};_._write=($,et,L)=>{O=L,this.log("writable stream :: parsing buffer"),p.parse($),K()},this.log("connect :: pipe stream to writable stream"),this.stream.pipe(_),this.stream.on("error",$=>{this.log("streamErrorHandler :: error",$.message),$.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",$)):this.noop($)}),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let G={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(G.will=Object.assign(Object.assign({},this.options.will),{payload:(E=this.options.will)===null||E===void 0?void 0:E.payload})),this.topicAliasRecv&&(G.properties||(G.properties={}),this.topicAliasRecv&&(G.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(G),p.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let $=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket($)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(E,_,p,O){this.log("publish :: message `%s` to topic `%s`",_,E);let{options:M}=this;typeof p=="function"&&(O=p,p=null),p=p||{},p=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),p);let{qos:K,retain:J,dup:G,properties:$,cbStorePut:et}=p;if(this._checkDisconnecting(O))return this;let L=()=>{let it=0;if((K===1||K===2)&&(it=this._nextId(),it===null))return this.log("No messageId left"),!1;let x={cmd:"publish",topic:E,payload:_,qos:K,retain:J,messageId:it,dup:G};switch(M.protocolVersion===5&&(x.properties=$),this.log("publish :: qos",K),K){case 1:case 2:this.outgoing[x.messageId]={volatile:!1,cb:O||this.noop},this.log("MqttClient:publish: packet cmd: %s",x.cmd),this._sendPacket(x,void 0,et);break;default:this.log("MqttClient:publish: packet cmd: %s",x.cmd),this._sendPacket(x,O,et)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!L())&&this._storeProcessingQueue.push({invoke:L,cbStorePut:p.cbStorePut,callback:O}),this}publishAsync(E,_,p){return new Promise((O,M)=>{this.publish(E,_,p,(K,J)=>{K?M(K):O(J)})})}subscribe(E,_,p){let O=this.options.protocolVersion;typeof _=="function"&&(p=_),p=p||this.noop;let M=!1,K=[];typeof E=="string"?K=E=[E]:Array.isArray(E)?K=E:typeof E=="object"&&(M=E.resubscribe,delete E.resubscribe,K=Object.keys(E));let J=g.validateTopics(K);if(J!==null)return V(p,new Error(`Invalid topic ${J}`)),this;if(this._checkDisconnecting(p))return this.log("subscribe: discconecting true"),this;let G={qos:0};O===5&&(G.nl=!1,G.rap=!1,G.rh=0);let $=(_=Object.assign(Object.assign({},G),_)).properties,et=[],L=(x,j)=>{if(j=j||_,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,x)||this._resubscribeTopics[x].qos<j.qos||M){let W={topic:x,qos:j.qos};O===5&&(W.nl=j.nl,W.rap=j.rap,W.rh=j.rh,W.properties=$),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",W.topic,W.qos),et.push(W)}};if(Array.isArray(E)?E.forEach(x=>{this.log("subscribe: array topic %s",x),L(x)}):Object.keys(E).forEach(x=>{this.log("subscribe: object topic %s, %o",x,E[x]),L(x,E[x])}),!et.length)return p(null,[]),this;let it=()=>{let x=this._nextId();if(x===null)return this.log("No messageId left"),!1;let j={cmd:"subscribe",subscriptions:et,messageId:x};if($&&(j.properties=$),this.options.resubscribe){this.log("subscribe :: resubscribe true");let W=[];et.forEach(U=>{if(this.options.reconnectPeriod>0){let Y={qos:U.qos};O===5&&(Y.nl=U.nl||!1,Y.rap=U.rap||!1,Y.rh=U.rh||0,Y.properties=U.properties),this._resubscribeTopics[U.topic]=Y,W.push(U.topic)}}),this.messageIdToTopic[j.messageId]=W}return this.outgoing[j.messageId]={volatile:!0,cb(W,U){if(!W){let{granted:Y}=U;for(let Q=0;Q<Y.length;Q+=1)et[Q].qos=Y[Q]}p(W,et,U)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(j),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!it())&&this._storeProcessingQueue.push({invoke:it,callback:p}),this}subscribeAsync(E,_){return new Promise((p,O)=>{this.subscribe(E,_,(M,K)=>{M?O(M):p(K)})})}unsubscribe(E,_,p){typeof E=="string"&&(E=[E]),typeof _=="function"&&(p=_),p=p||this.noop;let O=g.validateTopics(E);if(O!==null)return V(p,new Error(`Invalid topic ${O}`)),this;if(this._checkDisconnecting(p))return this;let M=()=>{let K=this._nextId();if(K===null)return this.log("No messageId left"),!1;let J={cmd:"unsubscribe",messageId:K,unsubscriptions:[]};return typeof E=="string"?J.unsubscriptions=[E]:Array.isArray(E)&&(J.unsubscriptions=E),this.options.resubscribe&&J.unsubscriptions.forEach(G=>{delete this._resubscribeTopics[G]}),typeof _=="object"&&_.properties&&(J.properties=_.properties),this.outgoing[J.messageId]={volatile:!0,cb:p},this.log("unsubscribe: call _sendPacket"),this._sendPacket(J),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!M())&&this._storeProcessingQueue.push({invoke:M,callback:p}),this}unsubscribeAsync(E,_){return new Promise((p,O)=>{this.unsubscribe(E,_,(M,K)=>{M?O(M):p(K)})})}end(E,_,p){this.log("end :: (%s)",this.options.clientId),(E==null||typeof E!="boolean")&&(p=p||_,_=E,E=!1),typeof _!="object"&&(p=p||_,_=null),this.log("end :: cb? %s",!!p),(!p||typeof p!="function")&&(p=this.noop);let O=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(K=>{this.outgoingStore.close(J=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),p){let G=K||J;this.log("end :: closeStores: invoking callback with args"),p(G)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},M=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,E),this._cleanUp(E,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,y.nextTick)(O)},_)};return this.disconnecting?(p(),this):(this._clearReconnect(),this.disconnecting=!0,!E&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,M,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),M()),this)}endAsync(E,_){return new Promise((p,O)=>{this.end(E,_,M=>{M?O(M):p()})})}removeOutgoingMessage(E){if(this.outgoing[E]){let{cb:_}=this.outgoing[E];this._removeOutgoingAndStoreMessage(E,()=>{_(new Error("Message removed"))})}return this}reconnect(E){this.log("client reconnect");let _=()=>{E?(this.options.incomingStore=E.incomingStore,this.options.outgoingStore=E.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new b.default,this.outgoingStore=this.options.outgoingStore||new b.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=_:_(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(E=>{this.outgoing[E].volatile&&typeof this.outgoing[E].cb=="function"&&(this.outgoing[E].cb(new Error("Connection closed")),delete this.outgoing[E])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(E=>{typeof this.outgoing[E].cb=="function"&&(this.outgoing[E].cb(new Error("Connection closed")),delete this.outgoing[E])}))}_removeTopicAliasAndRecoverTopicName(E){let _;E.properties&&(_=E.properties.topicAlias);let p=E.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",_,p),p.length===0){if(typeof _>"u")return new Error("Unregistered Topic Alias");if(p=this.topicAliasSend.getTopicByAlias(_),typeof p>"u")return new Error("Unregistered Topic Alias");E.topic=p}_&&delete E.properties.topicAlias}_checkDisconnecting(E){return this.disconnecting&&(E&&E!==this.noop?E(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(E,_,p={}){if(_&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",_)),this.log("_cleanUp :: forced? %s",E),E)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let O=Object.assign({cmd:"disconnect"},p);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(O,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),V(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),_&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",_),_())}_storeAndSend(E,_,p){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",E.cmd);let O,M=E;if(M.cmd==="publish"&&(M=(0,c.default)(E),O=this._removeTopicAliasAndRecoverTopicName(M),O))return _&&_(O);this.outgoingStore.put(M,K=>{if(K)return _&&_(K);p(),this._writePacket(E,_)})}_applyTopicAlias(E){if(this.options.protocolVersion===5&&E.cmd==="publish"){let _;E.properties&&(_=E.properties.topicAlias);let p=E.topic.toString();if(this.topicAliasSend)if(_){if(p.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",p,_),!this.topicAliasSend.put(p,_)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",p,_),new Error("Sending Topic Alias out of range")}else p.length!==0&&(this.options.autoAssignTopicAlias?(_=this.topicAliasSend.getAliasByTopic(p),_?(E.topic="",E.properties=Object.assign(Object.assign({},E.properties),{topicAlias:_}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",p,_)):(_=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(p,_),E.properties=Object.assign(Object.assign({},E.properties),{topicAlias:_}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",p,_))):this.options.autoUseTopicAlias&&(_=this.topicAliasSend.getAliasByTopic(p),_&&(E.topic="",E.properties=Object.assign(Object.assign({},E.properties),{topicAlias:_}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",p,_))));else if(_)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",p,_),new Error("Sending Topic Alias out of range")}}_noop(E){this.log("noop ::",E)}_writePacket(E,_){this.log("_writePacket :: packet: %O",E),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",E),this.log("_writePacket :: writing to stream");let p=e.default.writeToStream(E,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",p),!p&&_&&_!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",_)):_&&(this.log("_writePacket :: invoking cb"),_())}_sendPacket(E,_,p,O){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),p=p||this.noop,_=_||this.noop;let M=this._applyTopicAlias(E);if(M)_(M);else{if(!this.connected)return E.cmd==="auth"?void this._writePacket(E,_):(this.log("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(E,_,p));if(O)this._writePacket(E,_);else{switch(E.cmd){case"publish":break;case"pubrel":return void this._storeAndSend(E,_,p);default:return void this._writePacket(E,_)}switch(E.qos){case 2:case 1:this._storeAndSend(E,_,p);break;default:this._writePacket(E,_)}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}}}_storePacket(E,_,p){this.log("_storePacket :: packet: %o",E),this.log("_storePacket :: cb? %s",!!_),p=p||this.noop;let O=E;if(O.cmd==="publish"){O=(0,c.default)(E);let K=this._removeTopicAliasAndRecoverTopicName(O);if(K)return _&&_(K)}let M=O.qos||0;M===0&&this.queueQoSZero||O.cmd!=="publish"?this.queue.push({packet:O,cb:_}):M>0?(_=this.outgoing[O.messageId]?this.outgoing[O.messageId].cb:null,this.outgoingStore.put(O,K=>{if(K)return _&&_(K);p()})):_&&_(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new N.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(E=!1){this.keepaliveManager&&this.options.keepalive&&(E||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let E=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&E.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let _=0;_<E.length;_++){let p={};p[E[_]]=this._resubscribeTopics[E[_]],p.resubscribe=!0,this.subscribe(p,{properties:p[E[_]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(E){if(this.disconnected)return void this.emit("connect",E);this.connackPacket=E,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let _=()=>{let p=this.outgoingStore.createStream(),O=()=>{p.destroy(),p=null,this._flushStoreProcessingQueue(),M()},M=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",O),p.on("error",J=>{M(),this._flushStoreProcessingQueue(),this.removeListener("close",O),this.emit("error",J)});let K=()=>{if(!p)return;let J,G=p.read(1);G?(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[G.messageId]?K():this.disconnecting||this.reconnectTimer?p.destroy&&p.destroy():(J=this.outgoing[G.messageId]?this.outgoing[G.messageId].cb:null,this.outgoing[G.messageId]={volatile:!1,cb($,et){J&&J($,et),K()}},this._packetIdsDuringStoreProcessing[G.messageId]=!0,this.messageIdProvider.register(G.messageId)?this._sendPacket(G,void 0,void 0,!0):this.log("messageId: %d has already used.",G.messageId))):p.once("readable",K)};p.on("end",()=>{let J=!0;for(let G in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[G]){J=!1;break}this.removeListener("close",O),J?(M(),this._invokeAllStoreProcessingQueue(),this.emit("connect",E)):_()}),K()};_()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let E=this._storeProcessingQueue[0];if(E&&E.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let E of this._storeProcessingQueue)E.cbStorePut&&E.cbStorePut(new Error("Connection closed")),E.callback&&E.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(E,_){delete this.outgoing[E],this.outgoingStore.del({messageId:E},(p,O)=>{_(p,O),this.messageIdProvider.deallocate(E),this._invokeStoreProcessingQueue()})}};z.VERSION=y.MQTTJS_VERSION,l.default=z}),Pa=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"__esModule",{value:!0});var h=ho();l.default=class{constructor(){this.numberAllocator=new h.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(n){return this.numberAllocator.use(n)}deallocate(n){this.numberAllocator.free(n)}clear(){this.numberAllocator.clear()}}});function Fe(l){throw new RangeError(yo[l])}function fo(l,h){let n=l.split("@"),o="";return n.length>1&&(o=n[0]+"@",l=n[1]),o+function(s,t){let r=[],e=s.length;for(;e--;)r[e]=t(s[e]);return r}((l=l.replace(mo,".")).split("."),h).join(".")}function po(l){let h=[],n=0,o=l.length;for(;n<o;){let s=l.charCodeAt(n++);if(s>=55296&&s<=56319&&n<o){let t=l.charCodeAt(n++);(64512&t)==56320?h.push(((1023&s)<<10)+(1023&t)+65536):(h.push(s),n--)}else h.push(s)}return h}var go,bo,mo,yo,ue,vr,Di,Fi,wo,Wi,We,Ba=re(()=>{ot(),at(),st(),go=/^xn--/,bo=/[^\0-\x7E]/,mo=/[\x2E\u3002\uFF0E\uFF61]/g,yo={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ue=Math.floor,vr=String.fromCharCode,Di=function(l,h){return l+22+75*(l<26)-((h!=0)<<5)},Fi=function(l,h,n){let o=0;for(l=n?ue(l/700):l>>1,l+=ue(l/h);l>455;o+=36)l=ue(l/35);return ue(o+36*l/(l+38))},Wi=function(l){let h=[],n=(l=po(l)).length,o=128,s=0,t=72;for(let i of l)i<128&&h.push(vr(i));let r=h.length,e=r;for(r&&h.push("-");e<n;){let i=2147483647;for(let c of l)c>=o&&c<i&&(i=c);let a=e+1;i-o>ue((2147483647-s)/a)&&Fe("overflow"),s+=(i-o)*a,o=i;for(let c of l)if(c<o&&++s>2147483647&&Fe("overflow"),c==o){let g=s;for(let d=36;;d+=36){let b=d<=t?1:d>=t+26?26:d-t;if(g<b)break;let w=g-b,y=36-b;h.push(vr(Di(b+w%y,0))),g=ue(w/y)}h.push(vr(Di(g,0))),t=Fi(s,a,e==r),s=0,++e}++s,++o}return h.join("")},We={version:"2.1.0",ucs2:{decode:po,encode:l=>String.fromCodePoint(...l)},decode:wo=function(l){let h=[],n=l.length,o=0,s=128,t=72,r=l.lastIndexOf("-");r<0&&(r=0);for(let i=0;i<r;++i)l.charCodeAt(i)>=128&&Fe("not-basic"),h.push(l.charCodeAt(i));for(let i=r>0?r+1:0;i<n;){let a=o;for(let g=1,d=36;;d+=36){i>=n&&Fe("invalid-input");let b=(e=l.charCodeAt(i++))-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36;(b>=36||b>ue((2147483647-o)/g))&&Fe("overflow"),o+=b*g;let w=d<=t?1:d>=t+26?26:d-t;if(b<w)break;let y=36-w;g>ue(2147483647/y)&&Fe("overflow"),g*=y}let c=h.length+1;t=Fi(o-a,c,a==0),ue(o/c)>2147483647-s&&Fe("overflow"),s+=ue(o/c),o%=c,h.splice(o++,0,s)}var e;return String.fromCodePoint(...h)},encode:Wi,toASCII:function(l){return fo(l,function(h){return bo.test(h)?"xn--"+Wi(h):h})},toUnicode:function(l){return fo(l,function(h){return go.test(h)?wo(h.slice(4).toLowerCase()):h})}},We.encode,We.toASCII,We.toUnicode,We.ucs2,We.version});function xa(l,h){return Object.prototype.hasOwnProperty.call(l,h)}var _o,Xe,vo,ve,Ma=re(()=>{ot(),at(),st(),_o=function(l,h,n,o){h=h||"&",n=n||"=";var s={};if(typeof l!="string"||l.length===0)return s;var t=/\+/g;l=l.split(h);var r=1e3;o&&typeof o.maxKeys=="number"&&(r=o.maxKeys);var e=l.length;r>0&&e>r&&(e=r);for(var i=0;i<e;++i){var a,c,g,d,b=l[i].replace(t,"%20"),w=b.indexOf(n);w>=0?(a=b.substr(0,w),c=b.substr(w+1)):(a=b,c=""),g=decodeURIComponent(a),d=decodeURIComponent(c),xa(s,g)?Array.isArray(s[g])?s[g].push(d):s[g]=[s[g],d]:s[g]=d}return s},Xe=function(l){switch(typeof l){case"string":return l;case"boolean":return l?"true":"false";case"number":return isFinite(l)?l:"";default:return""}},vo=function(l,h,n,o){return h=h||"&",n=n||"=",l===null&&(l=void 0),typeof l=="object"?Object.keys(l).map(function(s){var t=encodeURIComponent(Xe(s))+n;return Array.isArray(l[s])?l[s].map(function(r){return t+encodeURIComponent(Xe(r))}).join(h):t+encodeURIComponent(Xe(l[s]))}).join(h):o?encodeURIComponent(Xe(o))+n+encodeURIComponent(Xe(l)):""},(ve={}).decode=ve.parse=_o,ve.encode=ve.stringify=vo,ve.decode,ve.encode,ve.parse,ve.stringify});function $i(){throw new Error("setTimeout has not been defined")}function qi(){throw new Error("clearTimeout has not been defined")}function Eo(l){if(Se===setTimeout)return setTimeout(l,0);if((Se===$i||!Se)&&setTimeout)return Se=setTimeout,setTimeout(l,0);try{return Se(l,0)}catch{try{return Se.call(null,l,0)}catch{return Se.call(this||$e,l,0)}}}function ja(){He&&qe&&(He=!1,qe.length?pe=qe.concat(pe):nr=-1,pe.length&&So())}function So(){if(!He){var l=Eo(ja);He=!0;for(var h=pe.length;h;){for(qe=pe,pe=[];++nr<h;)qe&&qe[nr].run();nr=-1,h=pe.length}qe=null,He=!1,function(n){if(Ae===clearTimeout)return clearTimeout(n);if((Ae===qi||!Ae)&&clearTimeout)return Ae=clearTimeout,clearTimeout(n);try{Ae(n)}catch{try{return Ae.call(null,n)}catch{return Ae.call(this||$e,n)}}}(l)}}function Ao(l,h){(this||$e).fun=l,(this||$e).array=h}function Ee(){}var Io,Se,Ae,$e,Kt,qe,pe,He,nr,Gt,Na=re(()=>{ot(),at(),st(),$e=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Kt=Io={},function(){try{Se=typeof setTimeout=="function"?setTimeout:$i}catch{Se=$i}try{Ae=typeof clearTimeout=="function"?clearTimeout:qi}catch{Ae=qi}}(),pe=[],He=!1,nr=-1,Kt.nextTick=function(l){var h=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)h[n-1]=arguments[n];pe.push(new Ao(l,h)),pe.length!==1||He||Eo(So)},Ao.prototype.run=function(){(this||$e).fun.apply(null,(this||$e).array)},Kt.title="browser",Kt.browser=!0,Kt.env={},Kt.argv=[],Kt.version="",Kt.versions={},Kt.on=Ee,Kt.addListener=Ee,Kt.once=Ee,Kt.off=Ee,Kt.removeListener=Ee,Kt.removeAllListeners=Ee,Kt.emit=Ee,Kt.prependListener=Ee,Kt.prependOnceListener=Ee,Kt.listeners=function(l){return[]},Kt.binding=function(l){throw new Error("process.binding is not supported")},Kt.cwd=function(){return"/"},Kt.chdir=function(l){throw new Error("process.chdir is not supported")},Kt.umask=function(){return 0},Gt=Io,Gt.argv,Gt.binding,Gt.browser,Gt.chdir,Gt.cwd,Gt.emit,Gt.env,Gt.listeners,Gt.nextTick,Gt.off,Gt.on,Gt.once,Gt.prependListener,Gt.prependOnceListener,Gt.removeAllListeners,Gt.removeListener,Gt.title,Gt.umask,Gt.version,Gt.versions});function Ua(){if(Hi)return Er;Hi=!0;var l,h,n=Er={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function t(w){if(l===setTimeout)return setTimeout(w,0);if((l===o||!l)&&setTimeout)return l=setTimeout,setTimeout(w,0);try{return l(w,0)}catch{try{return l.call(null,w,0)}catch{return l.call(this||Ve,w,0)}}}(function(){try{l=typeof setTimeout=="function"?setTimeout:o}catch{l=o}try{h=typeof clearTimeout=="function"?clearTimeout:s}catch{h=s}})();var r,e=[],i=!1,a=-1;function c(){!i||!r||(i=!1,r.length?e=r.concat(e):a=-1,e.length&&g())}function g(){if(!i){var w=t(c);i=!0;for(var y=e.length;y;){for(r=e,e=[];++a<y;)r&&r[a].run();a=-1,y=e.length}r=null,i=!1,function(v){if(h===clearTimeout)return clearTimeout(v);if((h===s||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(v);try{return h(v)}catch{try{return h.call(null,v)}catch{return h.call(this||Ve,v)}}}(w)}}function d(w,y){(this||Ve).fun=w,(this||Ve).array=y}function b(){}return n.nextTick=function(w){var y=new Array(arguments.length-1);if(arguments.length>1)for(var v=1;v<arguments.length;v++)y[v-1]=arguments[v];e.push(new d(w,y)),e.length===1&&!i&&t(g)},d.prototype.run=function(){(this||Ve).fun.apply(null,(this||Ve).array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=b,n.addListener=b,n.once=b,n.off=b,n.removeListener=b,n.removeAllListeners=b,n.emit=b,n.prependListener=b,n.prependOnceListener=b,n.listeners=function(w){return[]},n.binding=function(w){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(w){throw new Error("process.chdir is not supported")},n.umask=function(){return 0},Er}var Er,Hi,Ve,zt,ko=re(()=>{ot(),at(),st(),Er={},Hi=!1,Ve=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,(zt=Ua()).platform="browser",zt.addListener,zt.argv,zt.binding,zt.browser,zt.chdir,zt.cwd,zt.emit,zt.env,zt.listeners,zt.nextTick,zt.off,zt.on,zt.once,zt.prependListener,zt.prependOnceListener,zt.removeAllListeners,zt.removeListener,zt.title,zt.umask,zt.version,zt.versions}),Vi,zi,Ki,La=re(()=>{ot(),at(),st(),ko(),Vi={},zi=!1,Ki=function(){if(zi)return Vi;zi=!0;var l=zt;function h(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function n(s,t){for(var r,e="",i=0,a=-1,c=0,g=0;g<=s.length;++g){if(g<s.length)r=s.charCodeAt(g);else{if(r===47)break;r=47}if(r===47){if(a!==g-1&&c!==1)if(a!==g-1&&c===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){var d=e.lastIndexOf("/");if(d!==e.length-1){d===-1?(e="",i=0):i=(e=e.slice(0,d)).length-1-e.lastIndexOf("/"),a=g,c=0;continue}}else if(e.length===2||e.length===1){e="",i=0,a=g,c=0;continue}}t&&(e.length>0?e+="/..":e="..",i=2)}else e.length>0?e+="/"+s.slice(a+1,g):e=s.slice(a+1,g),i=g-a-1;a=g,c=0}else r===46&&c!==-1?++c:c=-1}return e}var o={resolve:function(){for(var s,t="",r=!1,e=arguments.length-1;e>=-1&&!r;e--){var i;e>=0?i=arguments[e]:(s===void 0&&(s=l.cwd()),i=s),h(i),i.length!==0&&(t=i+"/"+t,r=i.charCodeAt(0)===47)}return t=n(t,!r),r?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(s){if(h(s),s.length===0)return".";var t=s.charCodeAt(0)===47,r=s.charCodeAt(s.length-1)===47;return(s=n(s,!t)).length===0&&!t&&(s="."),s.length>0&&r&&(s+="/"),t?"/"+s:s},isAbsolute:function(s){return h(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,t=0;t<arguments.length;++t){var r=arguments[t];h(r),r.length>0&&(s===void 0?s=r:s+="/"+r)}return s===void 0?".":o.normalize(s)},relative:function(s,t){if(h(s),h(t),s===t||(s=o.resolve(s))===(t=o.resolve(t)))return"";for(var r=1;r<s.length&&s.charCodeAt(r)===47;++r);for(var e=s.length,i=e-r,a=1;a<t.length&&t.charCodeAt(a)===47;++a);for(var c=t.length-a,g=i<c?i:c,d=-1,b=0;b<=g;++b){if(b===g){if(c>g){if(t.charCodeAt(a+b)===47)return t.slice(a+b+1);if(b===0)return t.slice(a+b)}else i>g&&(s.charCodeAt(r+b)===47?d=b:b===0&&(d=0));break}var w=s.charCodeAt(r+b);if(w!==t.charCodeAt(a+b))break;w===47&&(d=b)}var y="";for(b=r+d+1;b<=e;++b)(b===e||s.charCodeAt(b)===47)&&(y.length===0?y+="..":y+="/..");return y.length>0?y+t.slice(a+d):(a+=d,t.charCodeAt(a)===47&&++a,t.slice(a))},_makeLong:function(s){return s},dirname:function(s){if(h(s),s.length===0)return".";for(var t=s.charCodeAt(0),r=t===47,e=-1,i=!0,a=s.length-1;a>=1;--a)if((t=s.charCodeAt(a))===47){if(!i){e=a;break}}else i=!1;return e===-1?r?"/":".":r&&e===1?"//":s.slice(0,e)},basename:function(s,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');h(s);var r,e=0,i=-1,a=!0;if(t!==void 0&&t.length>0&&t.length<=s.length){if(t.length===s.length&&t===s)return"";var c=t.length-1,g=-1;for(r=s.length-1;r>=0;--r){var d=s.charCodeAt(r);if(d===47){if(!a){e=r+1;break}}else g===-1&&(a=!1,g=r+1),c>=0&&(d===t.charCodeAt(c)?--c==-1&&(i=r):(c=-1,i=g))}return e===i?i=g:i===-1&&(i=s.length),s.slice(e,i)}for(r=s.length-1;r>=0;--r)if(s.charCodeAt(r)===47){if(!a){e=r+1;break}}else i===-1&&(a=!1,i=r+1);return i===-1?"":s.slice(e,i)},extname:function(s){h(s);for(var t=-1,r=0,e=-1,i=!0,a=0,c=s.length-1;c>=0;--c){var g=s.charCodeAt(c);if(g!==47)e===-1&&(i=!1,e=c+1),g===46?t===-1?t=c:a!==1&&(a=1):t!==-1&&(a=-1);else if(!i){r=c+1;break}}return t===-1||e===-1||a===0||a===1&&t===e-1&&t===r+1?"":s.slice(t,e)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return function(t,r){var e=r.dir||r.root,i=r.base||(r.name||"")+(r.ext||"");return e?e===r.root?e+i:e+t+i:i}("/",s)},parse:function(s){h(s);var t={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return t;var r,e=s.charCodeAt(0),i=e===47;i?(t.root="/",r=1):r=0;for(var a=-1,c=0,g=-1,d=!0,b=s.length-1,w=0;b>=r;--b)if((e=s.charCodeAt(b))!==47)g===-1&&(d=!1,g=b+1),e===46?a===-1?a=b:w!==1&&(w=1):a!==-1&&(w=-1);else if(!d){c=b+1;break}return a===-1||g===-1||w===0||w===1&&a===g-1&&a===c+1?g!==-1&&(t.base=t.name=c===0&&i?s.slice(1,g):s.slice(c,g)):(c===0&&i?(t.name=s.slice(1,a),t.base=s.slice(1,g)):(t.name=s.slice(c,a),t.base=s.slice(c,g)),t.ext=s.slice(a,g)),c>0?t.dir=s.slice(0,c-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};return o.posix=o,Vi=o}()}),To={};function ae(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function or(l,h,n){if(l&&he.isObject(l)&&l instanceof ae)return l;var o=new ae;return o.parse(l,h,n),o}function Da(l){if(typeof l=="string")l=new URL(l);else if(!(l instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(l.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return kr?function(h){let n=h.hostname,o=h.pathname;for(let s=0;s<o.length;s++)if(o[s]==="%"){let t=o.codePointAt(s+2)||32;if(o[s+1]==="2"&&t===102||o[s+1]==="5"&&t===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace($o,"\\"),o=decodeURIComponent(o),n!=="")return`\\\\${n}${o}`;{let s=32|o.codePointAt(1),t=o[2];if(s<Fo||s>Wo||t!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}(l):function(h){if(h.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let n=h.pathname;for(let o=0;o<n.length;o++)if(n[o]==="%"){let s=n.codePointAt(o+2)||32;if(n[o+1]==="2"&&s===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(n)}(l)}function Fa(l){let h=Zi.resolve(l),n=l.charCodeAt(l.length-1);(n===Do||kr&&n===Lo)&&h[h.length-1]!==Zi.sep&&(h+="/");let o=new URL("file://");return h.includes("%")&&(h=h.replace(qo,"%25")),!kr&&h.includes("\\")&&(h=h.replace(Ho,"%5C")),h.includes(`
`)&&(h=h.replace(Vo,"%0A")),h.includes("\r")&&(h=h.replace(zo,"%0D")),h.includes("	")&&(h=h.replace(Ko,"%09")),o.pathname=h,o}function Oo(l){if(typeof l=="string")l=new URL(l);else if(!(l instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(l.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Tr?function(h){let n=h.hostname,o=h.pathname;for(let s=0;s<o.length;s++)if(o[s]==="%"){let t=o.codePointAt(s+2)||32;if(o[s+1]==="2"&&t===102||o[s+1]==="5"&&t===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(os,"\\"),o=decodeURIComponent(o),n!=="")return`\\\\${n}${o}`;{let s=32|o.codePointAt(1),t=o[2];if(s<is||s>ns||t!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}(l):function(h){if(h.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let n=h.pathname;for(let o=0;o<n.length;o++)if(n[o]==="%"){let s=n.codePointAt(o+2)||32;if(n[o+1]==="2"&&s===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(n)}(l)}function Co(l){let h=Ki.resolve(l),n=l.charCodeAt(l.length-1);(n===rs||Tr&&n===es)&&h[h.length-1]!==Ki.sep&&(h+="/");let o=new URL("file://");return h.includes("%")&&(h=h.replace(ss,"%25")),!Tr&&h.includes("\\")&&(h=h.replace(as,"%5C")),h.includes(`
`)&&(h=h.replace(ls,"%0A")),h.includes("\r")&&(h=h.replace(us,"%0D")),h.includes("	")&&(h=h.replace(hs,"%09")),o.pathname=h,o}Ge(To,{URL:()=>ts,Url:()=>Qo,default:()=>Wt,fileURLToPath:()=>Oo,format:()=>Yo,parse:()=>Zo,pathToFileURL:()=>Co,resolve:()=>Jo,resolveObject:()=>Xo});var Wt,Ro,he,Po,Bo,xo,Mo,Sr,Gi,Qi,Yi,jo,No,Ar,ze,Ir,Ji,Xi,Zi,Uo,Lo,Do,Fo,Wo,kr,$o,qo,Ho,Vo,zo,Ko,Go,Qo,Yo,Jo,Xo,Zo,ts,es,rs,is,ns,Tr,os,ss,as,ls,us,hs,Wa=re(()=>{ot(),at(),st(),Ba(),Ma(),Na(),La(),ko(),Ro=We,he={isString:function(l){return typeof l=="string"},isObject:function(l){return typeof l=="object"&&l!==null},isNull:function(l){return l===null},isNullOrUndefined:function(l){return l==null}},(Wt={}).parse=or,Wt.resolve=function(l,h){return or(l,!1,!0).resolve(h)},Wt.resolveObject=function(l,h){return l?or(l,!1,!0).resolveObject(h):h},Wt.format=function(l){return he.isString(l)&&(l=or(l)),l instanceof ae?l.format():ae.prototype.format.call(l)},Wt.Url=ae,Po=/^([a-z0-9.+-]+:)/i,Bo=/:[0-9]*$/,xo=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Mo=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),Sr=["'"].concat(Mo),Gi=["%","/","?",";","#"].concat(Sr),Qi=["/","?","#"],Yi=/^[+a-z0-9A-Z_-]{0,63}$/,jo=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,No={javascript:!0,"javascript:":!0},Ar={javascript:!0,"javascript:":!0},ze={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ir=ve,ae.prototype.parse=function(l,h,n){if(!he.isString(l))throw new TypeError("Parameter 'url' must be a string, not "+typeof l);var o=l.indexOf("?"),s=o!==-1&&o<l.indexOf("#")?"?":"#",t=l.split(s);t[0]=t[0].replace(/\\/g,"/");var r=l=t.join(s);if(r=r.trim(),!n&&l.split("#").length===1){var e=xo.exec(r);if(e)return this.path=r,this.href=r,this.pathname=e[1],e[2]?(this.search=e[2],this.query=h?Ir.parse(this.search.substr(1)):this.search.substr(1)):h&&(this.search="",this.query={}),this}var i=Po.exec(r);if(i){var a=(i=i[0]).toLowerCase();this.protocol=a,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var c=r.substr(0,2)==="//";!c||i&&Ar[i]||(r=r.substr(2),this.slashes=!0)}if(!Ar[i]&&(c||i&&!ze[i])){for(var g,d,b=-1,w=0;w<Qi.length;w++)(y=r.indexOf(Qi[w]))!==-1&&(b===-1||y<b)&&(b=y);for((d=b===-1?r.lastIndexOf("@"):r.lastIndexOf("@",b))!==-1&&(g=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(g)),b=-1,w=0;w<Gi.length;w++){var y;(y=r.indexOf(Gi[w]))!==-1&&(b===-1||y<b)&&(b=y)}b===-1&&(b=r.length),this.host=r.slice(0,b),r=r.slice(b),this.parseHost(),this.hostname=this.hostname||"";var v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v)for(var N=this.hostname.split(/\./),A=(w=0,N.length);w<A;w++){var V=N[w];if(V&&!V.match(Yi)){for(var rt="",z=0,lt=V.length;z<lt;z++)V.charCodeAt(z)>127?rt+="x":rt+=V[z];if(!rt.match(Yi)){var E=N.slice(0,w),_=N.slice(w+1),p=V.match(jo);p&&(E.push(p[1]),_.unshift(p[2])),_.length&&(r="/"+_.join(".")+r),this.hostname=E.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=Ro.toASCII(this.hostname));var O=this.port?":"+this.port:"",M=this.hostname||"";this.host=M+O,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),r[0]!=="/"&&(r="/"+r))}if(!No[a])for(w=0,A=Sr.length;w<A;w++){var K=Sr[w];if(r.indexOf(K)!==-1){var J=encodeURIComponent(K);J===K&&(J=escape(K)),r=r.split(K).join(J)}}var G=r.indexOf("#");G!==-1&&(this.hash=r.substr(G),r=r.slice(0,G));var $=r.indexOf("?");if($!==-1?(this.search=r.substr($),this.query=r.substr($+1),h&&(this.query=Ir.parse(this.query)),r=r.slice(0,$)):h&&(this.search="",this.query={}),r&&(this.pathname=r),ze[a]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){O=this.pathname||"";var et=this.search||"";this.path=O+et}return this.href=this.format(),this},ae.prototype.format=function(){var l=this.auth||"";l&&(l=(l=encodeURIComponent(l)).replace(/%3A/i,":"),l+="@");var h=this.protocol||"",n=this.pathname||"",o=this.hash||"",s=!1,t="";this.host?s=l+this.host:this.hostname&&(s=l+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&he.isObject(this.query)&&Object.keys(this.query).length&&(t=Ir.stringify(this.query));var r=this.search||t&&"?"+t||"";return h&&h.substr(-1)!==":"&&(h+=":"),this.slashes||(!h||ze[h])&&s!==!1?(s="//"+(s||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):s||(s=""),o&&o.charAt(0)!=="#"&&(o="#"+o),r&&r.charAt(0)!=="?"&&(r="?"+r),h+s+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(r=r.replace("#","%23"))+o},ae.prototype.resolve=function(l){return this.resolveObject(or(l,!1,!0)).format()},ae.prototype.resolveObject=function(l){if(he.isString(l)){var h=new ae;h.parse(l,!1,!0),l=h}for(var n=new ae,o=Object.keys(this),s=0;s<o.length;s++){var t=o[s];n[t]=this[t]}if(n.hash=l.hash,l.href==="")return n.href=n.format(),n;if(l.slashes&&!l.protocol){for(var r=Object.keys(l),e=0;e<r.length;e++){var i=r[e];i!=="protocol"&&(n[i]=l[i])}return ze[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(l.protocol&&l.protocol!==n.protocol){if(!ze[l.protocol]){for(var a=Object.keys(l),c=0;c<a.length;c++){var g=a[c];n[g]=l[g]}return n.href=n.format(),n}if(n.protocol=l.protocol,l.host||Ar[l.protocol])n.pathname=l.pathname;else{for(var d=(l.pathname||"").split("/");d.length&&!(l.host=d.shift()););l.host||(l.host=""),l.hostname||(l.hostname=""),d[0]!==""&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=l.search,n.query=l.query,n.host=l.host||"",n.auth=l.auth,n.hostname=l.hostname||l.host,n.port=l.port,n.pathname||n.search){var b=n.pathname||"",w=n.search||"";n.path=b+w}return n.slashes=n.slashes||l.slashes,n.href=n.format(),n}var y=n.pathname&&n.pathname.charAt(0)==="/",v=l.host||l.pathname&&l.pathname.charAt(0)==="/",N=v||y||n.host&&l.pathname,A=N,V=n.pathname&&n.pathname.split("/")||[],rt=(d=l.pathname&&l.pathname.split("/")||[],n.protocol&&!ze[n.protocol]);if(rt&&(n.hostname="",n.port=null,n.host&&(V[0]===""?V[0]=n.host:V.unshift(n.host)),n.host="",l.protocol&&(l.hostname=null,l.port=null,l.host&&(d[0]===""?d[0]=l.host:d.unshift(l.host)),l.host=null),N=N&&(d[0]===""||V[0]==="")),v)n.host=l.host||l.host===""?l.host:n.host,n.hostname=l.hostname||l.hostname===""?l.hostname:n.hostname,n.search=l.search,n.query=l.query,V=d;else if(d.length)V||(V=[]),V.pop(),V=V.concat(d),n.search=l.search,n.query=l.query;else if(!he.isNullOrUndefined(l.search))return rt&&(n.hostname=n.host=V.shift(),(p=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=p.shift(),n.host=n.hostname=p.shift())),n.search=l.search,n.query=l.query,he.isNull(n.pathname)&&he.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!V.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var z=V.slice(-1)[0],lt=(n.host||l.host||V.length>1)&&(z==="."||z==="..")||z==="",E=0,_=V.length;_>=0;_--)(z=V[_])==="."?V.splice(_,1):z===".."?(V.splice(_,1),E++):E&&(V.splice(_,1),E--);if(!N&&!A)for(;E--;E)V.unshift("..");!N||V[0]===""||V[0]&&V[0].charAt(0)==="/"||V.unshift(""),lt&&V.join("/").substr(-1)!=="/"&&V.push("");var p,O=V[0]===""||V[0]&&V[0].charAt(0)==="/";return rt&&(n.hostname=n.host=O?"":V.length?V.shift():"",(p=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=p.shift(),n.host=n.hostname=p.shift())),(N=N||n.host&&V.length)&&!O&&V.unshift(""),V.length?n.pathname=V.join("/"):(n.pathname=null,n.path=null),he.isNull(n.pathname)&&he.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=l.auth||n.auth,n.slashes=n.slashes||l.slashes,n.href=n.format(),n},ae.prototype.parseHost=function(){var l=this.host,h=Bo.exec(l);h&&((h=h[0])!==":"&&(this.port=h.substr(1)),l=l.substr(0,l.length-h.length)),l&&(this.hostname=l)},Wt.Url,Wt.format,Wt.resolve,Wt.resolveObject,Ji={},Xi=!1,Zi=function(){if(Xi)return Ji;Xi=!0;var l=Gt;function h(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function n(s,t){for(var r,e="",i=0,a=-1,c=0,g=0;g<=s.length;++g){if(g<s.length)r=s.charCodeAt(g);else{if(r===47)break;r=47}if(r===47){if(a!==g-1&&c!==1)if(a!==g-1&&c===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){var d=e.lastIndexOf("/");if(d!==e.length-1){d===-1?(e="",i=0):i=(e=e.slice(0,d)).length-1-e.lastIndexOf("/"),a=g,c=0;continue}}else if(e.length===2||e.length===1){e="",i=0,a=g,c=0;continue}}t&&(e.length>0?e+="/..":e="..",i=2)}else e.length>0?e+="/"+s.slice(a+1,g):e=s.slice(a+1,g),i=g-a-1;a=g,c=0}else r===46&&c!==-1?++c:c=-1}return e}var o={resolve:function(){for(var s,t="",r=!1,e=arguments.length-1;e>=-1&&!r;e--){var i;e>=0?i=arguments[e]:(s===void 0&&(s=l.cwd()),i=s),h(i),i.length!==0&&(t=i+"/"+t,r=i.charCodeAt(0)===47)}return t=n(t,!r),r?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(s){if(h(s),s.length===0)return".";var t=s.charCodeAt(0)===47,r=s.charCodeAt(s.length-1)===47;return(s=n(s,!t)).length===0&&!t&&(s="."),s.length>0&&r&&(s+="/"),t?"/"+s:s},isAbsolute:function(s){return h(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,t=0;t<arguments.length;++t){var r=arguments[t];h(r),r.length>0&&(s===void 0?s=r:s+="/"+r)}return s===void 0?".":o.normalize(s)},relative:function(s,t){if(h(s),h(t),s===t||(s=o.resolve(s))===(t=o.resolve(t)))return"";for(var r=1;r<s.length&&s.charCodeAt(r)===47;++r);for(var e=s.length,i=e-r,a=1;a<t.length&&t.charCodeAt(a)===47;++a);for(var c=t.length-a,g=i<c?i:c,d=-1,b=0;b<=g;++b){if(b===g){if(c>g){if(t.charCodeAt(a+b)===47)return t.slice(a+b+1);if(b===0)return t.slice(a+b)}else i>g&&(s.charCodeAt(r+b)===47?d=b:b===0&&(d=0));break}var w=s.charCodeAt(r+b);if(w!==t.charCodeAt(a+b))break;w===47&&(d=b)}var y="";for(b=r+d+1;b<=e;++b)(b===e||s.charCodeAt(b)===47)&&(y.length===0?y+="..":y+="/..");return y.length>0?y+t.slice(a+d):(a+=d,t.charCodeAt(a)===47&&++a,t.slice(a))},_makeLong:function(s){return s},dirname:function(s){if(h(s),s.length===0)return".";for(var t=s.charCodeAt(0),r=t===47,e=-1,i=!0,a=s.length-1;a>=1;--a)if((t=s.charCodeAt(a))===47){if(!i){e=a;break}}else i=!1;return e===-1?r?"/":".":r&&e===1?"//":s.slice(0,e)},basename:function(s,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');h(s);var r,e=0,i=-1,a=!0;if(t!==void 0&&t.length>0&&t.length<=s.length){if(t.length===s.length&&t===s)return"";var c=t.length-1,g=-1;for(r=s.length-1;r>=0;--r){var d=s.charCodeAt(r);if(d===47){if(!a){e=r+1;break}}else g===-1&&(a=!1,g=r+1),c>=0&&(d===t.charCodeAt(c)?--c==-1&&(i=r):(c=-1,i=g))}return e===i?i=g:i===-1&&(i=s.length),s.slice(e,i)}for(r=s.length-1;r>=0;--r)if(s.charCodeAt(r)===47){if(!a){e=r+1;break}}else i===-1&&(a=!1,i=r+1);return i===-1?"":s.slice(e,i)},extname:function(s){h(s);for(var t=-1,r=0,e=-1,i=!0,a=0,c=s.length-1;c>=0;--c){var g=s.charCodeAt(c);if(g!==47)e===-1&&(i=!1,e=c+1),g===46?t===-1?t=c:a!==1&&(a=1):t!==-1&&(a=-1);else if(!i){r=c+1;break}}return t===-1||e===-1||a===0||a===1&&t===e-1&&t===r+1?"":s.slice(t,e)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return function(t,r){var e=r.dir||r.root,i=r.base||(r.name||"")+(r.ext||"");return e?e===r.root?e+i:e+t+i:i}("/",s)},parse:function(s){h(s);var t={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return t;var r,e=s.charCodeAt(0),i=e===47;i?(t.root="/",r=1):r=0;for(var a=-1,c=0,g=-1,d=!0,b=s.length-1,w=0;b>=r;--b)if((e=s.charCodeAt(b))!==47)g===-1&&(d=!1,g=b+1),e===46?a===-1?a=b:w!==1&&(w=1):a!==-1&&(w=-1);else if(!d){c=b+1;break}return a===-1||g===-1||w===0||w===1&&a===g-1&&a===c+1?g!==-1&&(t.base=t.name=c===0&&i?s.slice(1,g):s.slice(c,g)):(c===0&&i?(t.name=s.slice(1,a),t.base=s.slice(1,g)):(t.name=s.slice(c,a),t.base=s.slice(c,g)),t.ext=s.slice(a,g)),c>0?t.dir=s.slice(0,c-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};return o.posix=o,Ji=o}(),Uo=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Wt.URL=typeof URL<"u"?URL:null,Wt.pathToFileURL=Fa,Wt.fileURLToPath=Da,Wt.Url,Wt.format,Wt.resolve,Wt.resolveObject,Wt.URL,Lo=92,Do=47,Fo=97,Wo=122,kr=Uo==="win32",$o=/\//g,qo=/%/g,Ho=/\\/g,Vo=/\n/g,zo=/\r/g,Ko=/\t/g,Go=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Wt.URL=typeof URL<"u"?URL:null,Wt.pathToFileURL=Co,Wt.fileURLToPath=Oo,Qo=Wt.Url,Yo=Wt.format,Jo=Wt.resolve,Xo=Wt.resolveObject,Zo=Wt.parse,ts=Wt.URL,es=92,rs=47,is=97,ns=122,Tr=Go==="win32",os=/\//g,ss=/%/g,as=/\\/g,ls=/\n/g,us=/\r/g,hs=/\t/g}),$a=ft((l,h)=>{ot(),at(),st(),h.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),tn=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"__esModule",{value:!0}),l.BufferedDuplex=void 0,l.writev=o;var h=De(),n=(Zt(),Lt(Xt));function o(t,r){let e=new Array(t.length);for(let i=0;i<t.length;i++)typeof t[i].chunk=="string"?e[i]=n.Buffer.from(t[i].chunk,"utf8"):e[i]=t[i].chunk;this._write(n.Buffer.concat(e),"binary",r)}var s=class extends h.Duplex{constructor(t,r,e){super({objectMode:!0}),this.proxy=r,this.socket=e,this.writeQueue=[],t.objectMode||(this._writev=o.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",i=>{!this.destroyed&&this.readable&&this.push(i)})}_read(t){this.proxy.read(t)}_write(t,r,e){this.isSocketOpen?this.writeToProxy(t,r,e):this.writeQueue.push({chunk:t,encoding:r,cb:e})}_final(t){this.writeQueue=[],this.proxy.end(t)}_destroy(t,r){this.writeQueue=[],this.proxy.destroy(),r(t)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(t,r,e){this.proxy.write(t,r)===!1?this.proxy.once("drain",e):e()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:t,encoding:r,cb:e}=this.writeQueue.shift();this.writeToProxy(t,r,e)}}};l.BufferedDuplex=s}),Or=ft(l=>{ot(),at(),st();var h=l&&l.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0}),l.streamBuilder=l.browserStreamBuilder=void 0;var n=(Zt(),Lt(Xt)),o=h($a()),s=h(ye()),t=De(),r=h(_r()),e=tn(),i=(0,s.default)("mqttjs:ws"),a=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function c(d,b){let w=`${d.protocol}://${d.hostname}:${d.port}${d.path}`;return typeof d.transformWsUrl=="function"&&(w=d.transformWsUrl(w,d,b)),w}function g(d){let b=d;return d.port||(d.protocol==="wss"?b.port=443:b.port=80),d.path||(b.path="/"),d.wsOptions||(b.wsOptions={}),!r.default&&!d.forceNativeWebSocket&&d.protocol==="wss"&&a.forEach(w=>{Object.prototype.hasOwnProperty.call(d,w)&&!Object.prototype.hasOwnProperty.call(d.wsOptions,w)&&(b.wsOptions[w]=d[w])}),b}l.streamBuilder=(d,b)=>{i("streamBuilder");let w=g(b);w.hostname=w.hostname||w.host||"localhost";let y=c(w,d),v=function(A,V,rt){i("createWebSocket"),i(`protocol: ${rt.protocolId} ${rt.protocolVersion}`);let z,lt=rt.protocolId==="MQIsdp"&&rt.protocolVersion===3?"mqttv3.1":"mqtt";return i(`creating new Websocket for url: ${V} and protocol: ${lt}`),z=rt.createWebsocket?rt.createWebsocket(V,[lt],rt):new o.default(V,[lt],rt.wsOptions),z}(0,y,w),N=o.default.createWebSocketStream(v,w.wsOptions);return N.url=y,v.on("close",()=>{N.destroy()}),N},l.browserStreamBuilder=(d,b)=>{i("browserStreamBuilder");let w,y=function(p){let O=g(p);if(O.hostname||(O.hostname=O.host),!O.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let M=new URL(document.URL);O.hostname=M.hostname,O.port||(O.port=Number(M.port))}return O.objectMode===void 0&&(O.objectMode=!(O.binary===!0||O.binary===void 0)),O}(b).browserBufferSize||524288,v=b.browserBufferTimeout||1e3,N=!b.objectMode,A=function(p,O){let M,K=O.protocolId==="MQIsdp"&&O.protocolVersion===3?"mqttv3.1":"mqtt",J=c(O,p);return M=O.createWebsocket?O.createWebsocket(J,[K],O):new WebSocket(J,[K]),M.binaryType="arraybuffer",M}(d,b),V=function(p,O,M){let K=new t.Transform({objectMode:p.objectMode});return K._write=O,K._flush=M,K}(b,function p(O,M,K){if(A.bufferedAmount>y)return void setTimeout(p,v,O,M,K);N&&typeof O=="string"&&(O=n.Buffer.from(O,"utf8"));try{A.send(O)}catch(J){return K(J)}K()},function(p){A.close(),p()});b.objectMode||(V._writev=e.writev.bind(V)),V.on("close",()=>{A.close()});let rt=typeof A.addEventListener<"u";function z(){i("WebSocket onOpen"),w instanceof e.BufferedDuplex&&w.socketReady()}function lt(p){i("WebSocket onClose",p),w.end(),w.destroy()}function E(p){i("WebSocket onError",p);let O=new Error("WebSocket error");O.event=p,w.destroy(O)}async function _(p){if(!V||V.destroyed||!V.readable)return;let{data:O}=p;O=O instanceof ArrayBuffer?n.Buffer.from(O):O instanceof Blob?n.Buffer.from(await new Response(O).arrayBuffer()):n.Buffer.from(O,"utf8"),V.push(O)}return A.readyState===A.OPEN?(w=V,w.socket=A):(w=new e.BufferedDuplex(b,V,A),rt?A.addEventListener("open",z):A.onopen=z),rt?(A.addEventListener("close",lt),A.addEventListener("error",E),A.addEventListener("message",_)):(A.onclose=lt,A.onerror=E,A.onmessage=_),w}}),en={};function Ht(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}Ge(en,{Server:()=>Ht,Socket:()=>Ht,Stream:()=>Ht,_createServerHandle:()=>Ht,_normalizeArgs:()=>Ht,_setSimultaneousAccepts:()=>Ht,connect:()=>Ht,createConnection:()=>Ht,createServer:()=>Ht,default:()=>cs,isIP:()=>Ht,isIPv4:()=>Ht,isIPv6:()=>Ht});var cs,fs=re(()=>{ot(),at(),st(),cs={_createServerHandle:Ht,_normalizeArgs:Ht,_setSimultaneousAccepts:Ht,connect:Ht,createConnection:Ht,createServer:Ht,isIP:Ht,isIPv4:Ht,isIPv6:Ht,Server:Ht,Socket:Ht,Stream:Ht}}),ds=ft(l=>{ot(),at(),st();var h=l&&l.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});var n=h((fs(),Lt(en))),o=(0,h(ye()).default)("mqttjs:tcp");l.default=(s,t)=>{t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost";let{port:r,path:e}=t,i=t.hostname;return o("port %d and host %s",r,i),n.default.createConnection({port:r,host:i,path:e})}}),ps={};Ge(ps,{default:()=>gs});var gs,qa=re(()=>{ot(),at(),st(),gs={}}),bs=ft(l=>{ot(),at(),st();var h=l&&l.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});var n=h((qa(),Lt(ps))),o=h((fs(),Lt(en))),s=(0,h(ye()).default)("mqttjs:tls");l.default=(t,r)=>{r.port=r.port||8883,r.host=r.hostname||r.host||"localhost",o.default.isIP(r.host)===0&&(r.servername=r.host),r.rejectUnauthorized=r.rejectUnauthorized!==!1,delete r.path,s("port %d host %s rejectUnauthorized %b",r.port,r.host,r.rejectUnauthorized);let e=n.default.connect(r);function i(a){r.rejectUnauthorized&&t.emit("error",a),e.end()}return e.on("secureConnect",()=>{r.rejectUnauthorized&&!e.authorized?e.emit("error",new Error("TLS not authorized")):e.removeListener("error",i)}),e.on("error",i),e}}),ms=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"__esModule",{value:!0});var h,n,o,s=(Zt(),Lt(Xt)),t=De(),r=tn();l.default=(e,i)=>{if(i.hostname=i.hostname||i.host,!i.hostname)throw new Error("Could not determine host. Specify host manually.");let a=i.protocolId==="MQIsdp"&&i.protocolVersion===3?"mqttv3.1":"mqtt";(function(d){d.hostname||(d.hostname="localhost"),d.path||(d.path="/"),d.wsOptions||(d.wsOptions={})})(i);let c=function(d,b){let w=d.protocol==="wxs"?"wss":"ws",y=`${w}://${d.hostname}${d.path}`;return d.port&&d.port!==80&&d.port!==443&&(y=`${w}://${d.hostname}:${d.port}${d.path}`),typeof d.transformWsUrl=="function"&&(y=d.transformWsUrl(y,d,b)),y}(i,e);h=wx.connectSocket({url:c,protocols:[a]}),n=function(){let d=new t.Transform;return d._write=(b,w,y)=>{h.send({data:b.buffer,success(){y()},fail(v){y(new Error(v))}})},d._flush=b=>{h.close({success(){b()}})},d}(),(o=new r.BufferedDuplex(i,n,h))._destroy=(d,b)=>{h.close({success(){b&&b(d)}})};let g=o.destroy;return o.destroy=(d,b)=>(o.destroy=g,setTimeout(()=>{h.close({fail(){o._destroy(d,b)}})},0),o),h.onOpen(()=>{o.socketReady()}),h.onMessage(d=>{let{data:b}=d;b=b instanceof ArrayBuffer?s.Buffer.from(b):s.Buffer.from(b,"utf8"),n.push(b)}),h.onClose(()=>{o.emit("close"),o.end(),o.destroy()}),h.onError(d=>{let b=new Error(d.errMsg);o.destroy(b)}),o}}),ys=ft(l=>{ot(),at(),st(),Object.defineProperty(l,"__esModule",{value:!0});var h,n,o,s=(Zt(),Lt(Xt)),t=De(),r=tn(),e=!1;l.default=(i,a)=>{if(a.hostname=a.hostname||a.host,!a.hostname)throw new Error("Could not determine host. Specify host manually.");let c=a.protocolId==="MQIsdp"&&a.protocolVersion===3?"mqttv3.1":"mqtt";(function(d){d.hostname||(d.hostname="localhost"),d.path||(d.path="/"),d.wsOptions||(d.wsOptions={})})(a);let g=function(d,b){let w=d.protocol==="alis"?"wss":"ws",y=`${w}://${d.hostname}${d.path}`;return d.port&&d.port!==80&&d.port!==443&&(y=`${w}://${d.hostname}:${d.port}${d.path}`),typeof d.transformWsUrl=="function"&&(y=d.transformWsUrl(y,d,b)),y}(a,i);return(h=a.my).connectSocket({url:g,protocols:c}),n=function(){let d=new t.Transform;return d._write=(b,w,y)=>{h.sendSocketMessage({data:b.buffer,success(){y()},fail(){y(new Error)}})},d._flush=b=>{h.closeSocket({success(){b()}})},d}(),o=new r.BufferedDuplex(a,n,h),e||(e=!0,h.onSocketOpen(()=>{o.socketReady()}),h.onSocketMessage(d=>{if(typeof d.data=="string"){let b=s.Buffer.from(d.data,"base64");n.push(b)}else{let b=new FileReader;b.addEventListener("load",()=>{let w=b.result;w=w instanceof ArrayBuffer?s.Buffer.from(w):s.Buffer.from(w,"utf8"),n.push(w)}),b.readAsArrayBuffer(d.data)}}),h.onSocketClose(()=>{o.end(),o.destroy()}),h.onSocketError(d=>{o.destroy(d)})),o}}),Ha=ft(l=>{ot(),at(),st();var h=l&&l.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0}),l.connectAsync=function(a,c,g=!0){return new Promise((d,b)=>{let w=i(a,c),y={connect:N=>{v(),d(w)},end:()=>{v(),d(w)},error:N=>{v(),w.end(),b(N)}};function v(){Object.keys(y).forEach(N=>{w.off(N,y[N])})}g===!1&&(y.close=()=>{y.error(new Error("Couldn't connect to server"))}),Object.keys(y).forEach(N=>{w.on(N,y[N])})})};var n=h(ye()),o=h((Wa(),Lt(To))),s=h(Li()),t=h(_r());typeof(Ft==null?void 0:Ft.nextTick)!="function"&&(Ft.nextTick=setImmediate);var r=(0,n.default)("mqttjs"),e=null;function i(a,c){var g,d,b;if(r("connecting to an MQTT broker..."),typeof a=="object"&&!c&&(c=a,a=""),c=c||{},a&&typeof a=="string"){let y=o.default.parse(a,!0),v={};if(y.port!=null&&(v.port=Number(y.port)),v.host=y.hostname,v.query=y.query,v.auth=y.auth,v.protocol=y.protocol,v.path=y.path,!(c=Object.assign(Object.assign({},v),c)).protocol)throw new Error("Missing protocol");c.protocol=c.protocol.replace(/:$/,"")}if(c.unixSocket=c.unixSocket||((g=c.protocol)===null||g===void 0?void 0:g.includes("+unix")),c.unixSocket?c.protocol=c.protocol.replace("+unix",""):(d=c.protocol)!==null&&d!==void 0&&d.startsWith("ws")||(b=c.protocol)!==null&&b!==void 0&&b.startsWith("wx")||delete c.path,function(y){let v;y.auth&&(v=y.auth.match(/^(.+):(.+)$/),v?(y.username=v[1],y.password=v[2]):y.username=y.auth)}(c),c.query&&typeof c.query.clientId=="string"&&(c.clientId=c.query.clientId),c.cert&&c.key){if(!c.protocol)throw new Error("Missing secure protocol key");if(["mqtts","wss","wxs","alis"].indexOf(c.protocol)===-1)switch(c.protocol){case"mqtt":c.protocol="mqtts";break;case"ws":c.protocol="wss";break;case"wx":c.protocol="wxs";break;case"ali":c.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${c.protocol}"!`)}}if(e||(e={},t.default||c.forceNativeWebSocket?(e.ws=Or().browserStreamBuilder,e.wss=Or().browserStreamBuilder,e.wx=ms().default,e.wxs=ms().default,e.ali=ys().default,e.alis=ys().default):(e.ws=Or().streamBuilder,e.wss=Or().streamBuilder,e.mqtt=ds().default,e.tcp=ds().default,e.ssl=bs().default,e.tls=e.ssl,e.mqtts=bs().default)),!e[c.protocol]){let y=["mqtts","wss"].indexOf(c.protocol)!==-1;c.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((v,N)=>(!y||N%2!=0)&&typeof e[v]=="function")[0]}if(c.clean===!1&&!c.clientId)throw new Error("Missing clientId for unclean clients");c.protocol&&(c.defaultProtocol=c.protocol);let w=new s.default(function(y){return c.servers&&((!y._reconnectCount||y._reconnectCount===c.servers.length)&&(y._reconnectCount=0),c.host=c.servers[y._reconnectCount].host,c.port=c.servers[y._reconnectCount].port,c.protocol=c.servers[y._reconnectCount].protocol?c.servers[y._reconnectCount].protocol:c.defaultProtocol,c.hostname=c.host,y._reconnectCount++),r("calling streambuilder for",c.protocol),e[c.protocol](y,c)},c);return w.on("error",()=>{}),w}l.default=i}),ws=ft(l=>{ot(),at(),st();var h,n=l&&l.__createBinding||(Object.create?function(w,y,v,N){N===void 0&&(N=v);var A=Object.getOwnPropertyDescriptor(y,v);(!A||("get"in A?!y.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return y[v]}}),Object.defineProperty(w,N,A)}:function(w,y,v,N){N===void 0&&(N=v),w[N]=y[v]}),o=l&&l.__setModuleDefault||(Object.create?function(w,y){Object.defineProperty(w,"default",{enumerable:!0,value:y})}:function(w,y){w.default=y}),s=l&&l.__importStar||(h=function(w){return(h=Object.getOwnPropertyNames||function(y){var v=[];for(var N in y)Object.prototype.hasOwnProperty.call(y,N)&&(v[v.length]=N);return v})(w)},function(w){if(w&&w.__esModule)return w;var y={};if(w!=null)for(var v=h(w),N=0;N<v.length;N++)v[N]!=="default"&&n(y,w,v[N]);return o(y,w),y}),t=l&&l.__exportStar||function(w,y){for(var v in w)v!=="default"&&!Object.prototype.hasOwnProperty.call(y,v)&&n(y,w,v)},r=l&&l.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(l,"__esModule",{value:!0}),l.ReasonCodes=l.KeepaliveManager=l.UniqueMessageIdProvider=l.DefaultMessageIdProvider=l.Store=l.MqttClient=l.connectAsync=l.connect=l.Client=void 0;var e=r(Li());l.MqttClient=e.default;var i=r(io());l.DefaultMessageIdProvider=i.default;var a=r(Pa());l.UniqueMessageIdProvider=a.default;var c=r(no());l.Store=c.default;var g=s(Ha());l.connect=g.default,Object.defineProperty(l,"connectAsync",{enumerable:!0,get:function(){return g.connectAsync}});var d=r(co());l.KeepaliveManager=d.default,l.Client=e.default,t(Li(),l),t(Je(),l);var b=wr();Object.defineProperty(l,"ReasonCodes",{enumerable:!0,get:function(){return b.ReasonCodes}})});const Va=ft(l=>{ot(),at(),st();var h,n=l&&l.__createBinding||(Object.create?function(e,i,a,c){c===void 0&&(c=a);var g=Object.getOwnPropertyDescriptor(i,a);(!g||("get"in g?!i.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(e,c,g)}:function(e,i,a,c){c===void 0&&(c=a),e[c]=i[a]}),o=l&&l.__setModuleDefault||(Object.create?function(e,i){Object.defineProperty(e,"default",{enumerable:!0,value:i})}:function(e,i){e.default=i}),s=l&&l.__importStar||(h=function(e){return(h=Object.getOwnPropertyNames||function(i){var a=[];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(a[a.length]=c);return a})(e)},function(e){if(e&&e.__esModule)return e;var i={};if(e!=null)for(var a=h(e),c=0;c<a.length;c++)a[c]!=="default"&&n(i,e,a[c]);return o(i,e),i}),t=l&&l.__exportStar||function(e,i){for(var a in e)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&n(i,e,a)};Object.defineProperty(l,"__esModule",{value:!0});var r=s(ws());l.default=r,t(ws(),l)})();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/const Ze=new class{constructor(){Nt(this,"client",null);Nt(this,"subscriptions",new Map);Nt(this,"connectPromise",null);Nt(this,"isConnected",!1);Nt(this,"heartbeatTimer",null)}async connect(l){return this.connectPromise||(this.connectPromise=new Promise((h,n)=>{if(this.isConnected)return void h();const o={clientId:new Date().getTime().toString(),clean:!1,...l},s="ws://"+new URL(window.location.href).hostname+":1883/mqtt";this.client=Va.connect(s,{...o,reconnectPeriod:5e3}),this.client.on("connect",()=>{this.isConnected=!0,this.heartbeat(),this.resubscribeAll().then(()=>h()).catch(n)}),this.client.on("error",t=>{clearInterval(this.heartbeatTimer),this.heartbeatTimer=null,this.connectPromise=null,n(t)}),this.client.on("close",()=>{clearInterval(this.heartbeatTimer),this.heartbeatTimer=null,this.isConnected=!1,this.connectPromise=null}),this.client.on("message",(t,r)=>{for(const[e,i]of this.subscriptions.entries())this.matchTopic(e,t)&&i.forEach(a=>a(r.toString()))})})),this.connectPromise}async resubscribeAll(){if(!this.client||this.subscriptions.size===0)return;const l=Array.from(this.subscriptions.keys());return new Promise((h,n)=>{this.client.subscribe(l,o=>{o?n(o):h()})})}heartbeat(){this.heartbeatTimer=setInterval(()=>{const l={sender:"w",method:"heartbeat",sendType:"user",param:{timestamp:Math.floor(Date.now()/1e3)}};this.publish("/w/s/user//heartbeat",l)},3e4)}async subscribe(l,h){return await this.ensureConnected(),new Promise((n,o)=>{this.client?this.client.subscribe(l,s=>{if(s)return void o(s);const t=this.subscriptions.get(l)||[];t.push(h),this.subscriptions.set(l,t),n()}):o(new Error("MQTT client not initialized"))})}async publish(l,h){return await this.ensureConnected(),new Promise((n,o)=>{this.client?this.client.publish(l,JSON.stringify(h),s=>{s?o(s):n()}):o(new Error("MQTT client not initialized"))})}async unsubscribe(l,h){return await this.ensureConnected(),new Promise((n,o)=>{if(this.client)if(h){const s=this.subscriptions.get(l);if(s){const t=s.indexOf(h);t!==-1&&(s.splice(t,1),s.length===0?this.doUnsubscribe(l).then(n).catch(o):(this.subscriptions.set(l,s),n()))}}else this.doUnsubscribe(l).then(n).catch(o);else o(new Error("MQTT client not initialized"))})}async doUnsubscribe(l){return new Promise((h,n)=>{this.client.unsubscribe(l,o=>{o?n(o):(this.subscriptions.delete(l),h())})})}async ensureConnected(){this.isConnected||await this.connect()}disconnect(){this.client&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null,this.client.end(),this.subscriptions.clear(),this.isConnected=!1)}matchTopic(l,h){const n=l.split("/"),o=h.split("/");for(let s=0;s<n.length;s++){const t=n[s],r=o[s];if(t==="#")return!0;if(t!=="+"&&t!==r)return!1}return n.length===o.length}};function za(){return{connect:l=>{Ze.connect(l)},subscribe:(l,h)=>{Ze.subscribe(l,h)},publish:(l,h)=>{Ze.publish(l,h)},autoUnsubscribe:(l,h)=>{Ps(()=>{Ze.unsubscribe(l,h)})},onUnmountedSubscribe:(l,h)=>{Ze.unsubscribe(l,h)}}}export{Ze as m,za as u};

import{d as q,q as D,p as F,r as d,a4 as I,b as N,w as O,c as S,o as f,F as k,j as a,s as r,aO as A,f as x,a9 as G,aq as H,a as l,ac as B,H as J,x as E,a6 as K,D as L,i as Q,C as X,G as Y}from"./index-DwcZmOlQ.js";import{S as i}from"./index-DDua9REu.js";const Z=q({name:"Convention",__name:"convention",props:{config:{type:Object,default:()=>{}}},setup(P,{expose:R}){const c=P,{t:b}=D(),m=F(),t=d({sysTrayEnabled:!1,sysTrayWhenStarted:!1,sysTrayMinimizeToTray:!1}),C=I({buffering_mb:[{validator:(u,e,o)=>{Number.isInteger(e)?o():o(new Error("\u8BF7\u8F93\u6570\u5B57"))},trigger:"change"}],reconnect_delay_sec:[{validator:(u,e,o)=>{Number.isInteger(e)?o():o(new Error("\u8BF7\u8F93\u6570\u5B57"))},trigger:"change"}]}),p=d();R({getData:async()=>{if(p)return await p.value.validate()?{...c.config,inputSetting:t.value}:void 0}});const U=d(),n=d({rootPath:""}),g=d([]),h=async()=>{n.value.rootPath=await i.getRootPath()},z=async()=>{try{await m.confirm("\u4FDD\u5B58\u4FEE\u6539\u540E\u539F\u6709\u6587\u4EF6\u5C06\u65E0\u6CD5\u8BBF\u95EE\uFF0C\u786E\u8BA4\u4FEE\u6539\u5417\uFF1F"),await i.setRootPath(n.value),m.success(b("common.updateSuccess")),h()}catch{}},T=async()=>{t.value=await i.getSysTraySetting()},M=async()=>{try{await i.setSysTraySetting(t.value),T(),m.success(b("common.updateSuccess"))}catch{}};return N(()=>{(async()=>g.value=await i.getAllRootPath())(),h(),T()}),O(()=>{c.config&&(t.value=c.config)}),(u,e)=>{const o=H,y=G,_=B,w=J,v=A,V=K,W=Y,j=L;return f(),S(k,null,[a(V,{style:{width:"100%"},ref_key:"formRef",ref:p,model:l(t),rules:l(C),"label-width":"140px"},{default:r(()=>[a(v,{style:{width:"100%","margin-top":"15px"}},{default:r(()=>[e[5]||(e[5]=x("h4",null,"\u7CFB\u7EDF\u6258\u76D8",-1)),a(y,{label:"\u5F00\u542F",prop:"seekable"},{default:r(()=>[a(o,{modelValue:l(t).sysTrayEnabled,"onUpdate:modelValue":e[0]||(e[0]=s=>l(t).sysTrayEnabled=s)},null,8,["modelValue"])]),_:1}),a(y,{prop:"seekable"},{default:r(()=>[a(_,{modelValue:l(t).sysTrayWhenStarted,"onUpdate:modelValue":e[1]||(e[1]=s=>l(t).sysTrayWhenStarted=s),disabled:!l(t).sysTrayEnabled,label:"\u5F00\u59CB\u65F6\u6700\u5C0F\u5316\u5230\u7CFB\u7EDF\u6258\u76D8"},null,8,["modelValue","disabled"])]),_:1}),a(y,{prop:"seekable"},{default:r(()=>[a(_,{modelValue:l(t).sysTrayMinimizeToTray,"onUpdate:modelValue":e[2]||(e[2]=s=>l(t).sysTrayMinimizeToTray=s),disabled:!l(t).sysTrayEnabled,label:"\u603B\u662F\u6700\u5C0F\u5316\u5230\u7CFB\u7EDF\u6258\u76D8\uFF0C\u800C\u4E0D\u662F\u4EFB\u52A1\u680F"},null,8,["modelValue","disabled"])]),_:1}),a(w,{style:{"margin-left":"95%"},type:"primary",onClick:M},{default:r(()=>e[4]||(e[4]=[E("\u4FDD\u5B58")])),_:1})]),_:1})]),_:1},8,["model","rules"]),a(V,{style:{width:"100%"},ref_key:"fileFormRef",ref:U,model:l(n),"label-width":"140px"},{default:r(()=>[a(v,{style:{width:"100%","margin-top":"15px"}},{default:r(()=>[e[7]||(e[7]=x("h4",null,"\u6587\u4EF6\u6839\u76EE\u5F55\u8BBE\u7F6E",-1)),a(y,{label:"\u6839\u76EE\u5F55",prop:"seekable"},{default:r(()=>[a(j,{modelValue:l(n).rootPath,"onUpdate:modelValue":e[3]||(e[3]=s=>l(n).rootPath=s),placeholder:"\u8BF7\u9009\u62E9\u6839\u76EE\u5F55",class:"!w-240px"},{default:r(()=>[(f(!0),S(k,null,Q(l(g),s=>(f(),X(W,{key:s,label:s,value:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(w,{style:{"margin-left":"95%"},type:"primary",onClick:z},{default:r(()=>e[6]||(e[6]=[E("\u4FDD\u5B58")])),_:1})]),_:1})]),_:1},8,["model"])],64)}}});export{Z as _};

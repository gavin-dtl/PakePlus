import{d as y,q,p as x,r as i,b as I,e as k,c as n,o,j as p,s as m,x as _,H as b,f as L,F as R,i as j,t as C,z as F}from"./index-DwcZmOlQ.js";import{S as M}from"./index-DDua9REu.js";import{e as g}from"./mitt-CI7Qv1RY.js";const S={style:{width:"100%",height:"100%",overflow:"hidden"}},z={style:{"padding-right":"10px"}},E=y({name:"Convention",__name:"Log",setup(H){const{t:A}=q(),c=x(),v=i(""),t=i([]),r=i([]),l=e=>{r.value.push(e)},f=async()=>{await c.confirm("\u786E\u8BA4\u6E05\u7A7A\u65E5\u5FD7\u5417\uFF1F"),r.value=[]},u=async()=>{await M.requestShowLog()};return I(()=>{g.on("LogMessage",l),u(),((e,s)=>{const a={timerId:null,interval:e,requestFn:s,isRequesting:!1};a.timerId=window.setInterval(async()=>{if(!a.isRequesting){a.isRequesting=!0;try{await s()}catch{}finally{a.isRequesting=!1}}},e),t.value.push(a)})(1e4,u)}),k(()=>{t.value.forEach(e=>{e.timerId&&clearInterval(e.timerId)}),t.value=[],v.value="\u6240\u6709\u8F6E\u8BE2\u5DF2\u505C\u6B62",g.off("LogMessage",l)}),(e,s)=>{const a=b,d=F;return o(),n("div",S,[p(a,{type:"primary",onClick:f},{default:m(()=>s[0]||(s[0]=[_("\u6E05\u7A7A\u6240\u6709")])),_:1}),p(d,null,{default:m(()=>[L("div",z,[(o(!0),n(R,null,j(r.value,(w,h)=>(o(),n("p",{key:h,style:{"white-space":"normal","word-break":"break-word","overflow-wrap":"break-word","margin-top":"5px",padding:"5px 0"}},C(w.message),1))),128))])]),_:1})])}}});export{E as _};

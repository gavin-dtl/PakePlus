import{d as R,X,l as E,k as G,r as s,a3 as H,z as c,o,w as t,a4 as Q,a5 as Y,a as l,m as n,p as S,a8 as J,aL as O,aM as P,q as N,a9 as T,A as W,c as Z,F as $,y as ee,B as ae,b6 as le,C as ue,ao as te}from"./index-h2IMwmcw.js";import{_ as se}from"./Dialog.vue_vue_type_style_index_0_lang-Gezqvh3u.js";import{i as r}from"./index-G4-Bc5RT.js";const ne=R({name:"ManageSpaceForm",__name:"inputSoureForm",emits:["success"],setup(me,{expose:C,emit:F}){X();const{t:V}=E(),b=G(),y=s(""),p=s(!1),v=s(!1),a=s({inputName:void 0,selectInputName:void 0,type:"1"}),h=H({inputName:[{required:!0,message:"\u4F4D\u7F6E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],selectInputName:[{required:!0,message:"\u4F4D\u7F6E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),f=s(),d=s(""),_=s("");C({open:async(m,e,i)=>{y.value=m,d.value=e,_.value=i,p.value=!0,x(),z(),q(i)}});const q=async m=>{a.value.inputName=await r.getCreateInputName({inputKind:m})},w=F,U=async()=>{await f.value.validate(),v.value=!0;try{a.value.type=="1"?(await r.createInput({sceneName:d.value,inputName:a.value.inputName,inputKind:_.value}),b.success(V("common.createSuccess")),w("success",a.value.inputName)):(await r.createSceneItem({sceneName:d.value,inputName:a.value.selectInputName}),b.success(V("common.updateSuccess")),w("success",a.value.selectInputName)),p.value=!1}finally{v.value=!1}},g=s([]),x=async()=>{y.value=="\u573A\u666F"?g.value=await r.getAddSceneList({sceneName:d.value}):g.value=await r.getAddInputList({sceneName:d.value,inputKind:_.value})},z=()=>{var m;a.value={inputName:void 0,selectInputName:void 0,type:"1"},(m=f.value)==null||m.resetFields()};return(m,e)=>{const i=P,A=O,I=J,K=T,L=ae,M=W,j=Y,k=ue,B=se,D=le;return o(),c(B,{title:"\u65B0\u589E"+l(y),modelValue:l(p),"onUpdate:modelValue":e[4]||(e[4]=u=>te(p)?p.value=u:null)},{footer:t(()=>[n(k,{onClick:U,type:"primary",disabled:l(v)},{default:t(()=>e[7]||(e[7]=[N("\u786E \u5B9A")])),_:1},8,["disabled"]),n(k,{onClick:e[3]||(e[3]=u=>p.value=!1)},{default:t(()=>e[8]||(e[8]=[N("\u53D6 \u6D88")])),_:1})]),default:t(()=>[Q((o(),c(j,{ref_key:"formRef",ref:f,model:l(a),rules:l(h),"label-width":"100px"},{default:t(()=>[n(I,{label:"\u7C7B\u578B",prop:"type"},{default:t(()=>[n(A,{modelValue:l(a).type,"onUpdate:modelValue":e[0]||(e[0]=u=>l(a).type=u)},{default:t(()=>[n(i,{value:"1",size:"large"},{default:t(()=>e[5]||(e[5]=[N("\u65B0\u5EFA")])),_:1}),n(i,{value:"2",size:"large"},{default:t(()=>e[6]||(e[6]=[N("\u9009\u62E9\u73B0\u6709")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(a).type=="1"?(o(),c(I,{key:0,label:"\u540D\u79F0",prop:"inputName"},{default:t(()=>[n(K,{modelValue:l(a).inputName,"onUpdate:modelValue":e[1]||(e[1]=u=>l(a).inputName=u),placeholder:"\u8BF7\u8F93\u5165\u8F93\u5165\u6E90\u540D\u79F0"},null,8,["modelValue"])]),_:1})):S("",!0),l(a).type=="2"?(o(),c(I,{key:1,label:"\u540D\u79F0",prop:"selectInputName"},{default:t(()=>[n(M,{modelValue:l(a).selectInputName,"onUpdate:modelValue":e[2]||(e[2]=u=>l(a).selectInputName=u),placeholder:"\u8BF7\u9009\u62E9\u8F93\u5165\u6E90"},{default:t(()=>[(o(!0),Z($,null,ee(l(g),u=>(o(),c(L,{key:u.name,label:u.showName,value:u.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):S("",!0)]),_:1},8,["model","rules"])),[[D,l(v)]])]),_:1},8,["title","modelValue"])}}});export{ne as _};

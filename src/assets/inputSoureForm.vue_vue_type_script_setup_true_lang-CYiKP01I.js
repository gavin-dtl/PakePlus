import{d as D,Z as H,q as R,p as Z,r as s,a4 as B,C as r,o as p,s as u,a5 as E,a6 as $,a,j as n,v as S,a9 as J,aL as O,aM as P,x as N,aa as Q,D as T,c as W,F as X,i as Y,G as ee,b6 as ae,H as le,ap as te}from"./index-DzCoMBOl.js";import{_ as ue}from"./Dialog.vue_vue_type_style_index_0_lang-v5RKlSVj.js";import{i as c}from"./index-3hmPX4Qn.js";const se=D({name:"ManageSpaceForm",__name:"inputSoureForm",emits:["success"],setup(ne,{expose:C,emit:U}){H();const{t:I}=R(),w=Z(),f=s(""),m=s(!1),v=s(!1),l=s({inputName:void 0,selectInputName:void 0,type:"1"}),h=B({inputName:[{required:!0,message:"\u4F4D\u7F6E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],selectInputName:[{required:!0,message:"\u4F4D\u7F6E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),y=s(),o=s(""),_=s("");C({open:async(d,e,i)=>{f.value=d,o.value=e,_.value=i,m.value=!0,F(),K(),(async V=>{l.value.inputName=await c.getCreateInputName({inputKind:V})})(i)}});const q=U,x=async()=>{await y.value.validate(),v.value=!0;try{l.value.type=="1"?(await c.createInput({sceneName:o.value,inputName:l.value.inputName,inputKind:_.value}),w.success(I("common.createSuccess"))):(await c.createSceneItem({sceneName:o.value,inputName:l.value.selectInputName}),w.success(I("common.updateSuccess"))),m.value=!1,q("success")}finally{v.value=!1}},g=s([]),F=async()=>{f.value=="\u573A\u666F"?g.value=await c.getAddSceneList({sceneName:o.value}):g.value=await c.getAddInputList({sceneName:o.value,inputKind:_.value})},K=()=>{var d;l.value={inputName:void 0,selectInputName:void 0,type:"1"},(d=y.value)==null||d.resetFields()};return(d,e)=>{const i=P,V=O,b=J,L=Q,j=ee,z=T,A=$,k=le,G=ue,M=ae;return p(),r(G,{title:"\u65B0\u589E"+a(f),modelValue:a(m),"onUpdate:modelValue":e[4]||(e[4]=t=>te(m)?m.value=t:null)},{footer:u(()=>[n(k,{onClick:x,type:"primary",disabled:a(v)},{default:u(()=>e[7]||(e[7]=[N("\u786E \u5B9A")])),_:1},8,["disabled"]),n(k,{onClick:e[3]||(e[3]=t=>m.value=!1)},{default:u(()=>e[8]||(e[8]=[N("\u53D6 \u6D88")])),_:1})]),default:u(()=>[E((p(),r(A,{ref_key:"formRef",ref:y,model:a(l),rules:a(h),"label-width":"100px"},{default:u(()=>[n(b,{label:"\u7C7B\u578B",prop:"type"},{default:u(()=>[n(V,{modelValue:a(l).type,"onUpdate:modelValue":e[0]||(e[0]=t=>a(l).type=t)},{default:u(()=>[n(i,{value:"1",size:"large"},{default:u(()=>e[5]||(e[5]=[N("\u65B0\u5EFA")])),_:1}),n(i,{value:"2",size:"large"},{default:u(()=>e[6]||(e[6]=[N("\u9009\u62E9\u73B0\u6709")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(l).type=="1"?(p(),r(b,{key:0,label:"\u540D\u79F0",prop:"inputName"},{default:u(()=>[n(L,{modelValue:a(l).inputName,"onUpdate:modelValue":e[1]||(e[1]=t=>a(l).inputName=t),placeholder:"\u8BF7\u8F93\u5165\u8F93\u5165\u6E90\u540D\u79F0"},null,8,["modelValue"])]),_:1})):S("",!0),a(l).type=="2"?(p(),r(b,{key:1,label:"\u540D\u79F0",prop:"selectInputName"},{default:u(()=>[n(z,{modelValue:a(l).selectInputName,"onUpdate:modelValue":e[2]||(e[2]=t=>a(l).selectInputName=t),placeholder:"\u8BF7\u9009\u62E9\u8F93\u5165\u6E90"},{default:u(()=>[(p(!0),W(X,null,Y(a(g),t=>(p(),r(j,{key:t.name,label:t.showName,value:t.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):S("",!0)]),_:1},8,["model","rules"])),[[M,a(v)]])]),_:1},8,["title","modelValue"])}}});export{se as _};

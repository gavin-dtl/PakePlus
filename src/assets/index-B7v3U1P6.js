import{_ as h}from"./ContentWrap.vue_vue_type_script_setup_true_lang-CCSEnNgB.js";import{au as r,d as V,p as k,q as x,r as g,b as U,C as q,o as P,s as o,j as a,H as j,x as w,aR as D,a as E,aS as H,aq as L,Q as v}from"./index-DzCoMBOl.js";const Q=async()=>await r.get({url:"/core/sceneCollection/geSceneCollectionList"}),R=async n=>await r.get({url:"/core/sceneCollection/createSceneCollection",params:n}),z=async n=>await r.get({url:"/core/sceneCollection/saveSceneCollectionDefault",params:n}),A=async n=>await r.get({url:"/core/sceneCollection/setSceneCollection",params:n}),B=async n=>await r.get({url:"/core/sceneCollection/setSceneCollectionPower",params:n}),F=V({name:"SceneSetting",__name:"index",setup(n){const c=k(),{t:y}=x(),m=g([]),s=async()=>{m.value=await Q()};g();const _=async()=>{const C=await c.validatePrompt("\u573A\u666F\u96C6\u5408\u540D\u79F0",y("\u521B\u5EFA\u573A\u666F\u96C6\u5408"),{inputValue:"",validator:l=>!!l||"\u573A\u666F\u96C6\u5408\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"});await R({name:C.value,isCopy:!1}),s(),c.success(y("common.createSuccess"))};return U(async()=>{s()}),(C,l)=>{const u=j,d=H,f=L,S=D,b=h;return P(),q(b,null,{default:o(()=>[a(u,{type:"primary",onClick:_},{default:o(()=>l[0]||(l[0]=[w("\u65B0\u589E")])),_:1}),a(S,{data:E(m),style:{width:"100%"}},{default:o(()=>[a(d,{prop:"name",label:"\u540D\u79F0",align:"center"}),a(d,{prop:"active",label:"\u5F53\u524D\u573A\u666F",align:"center"},{default:o(e=>[a(f,{modelValue:e.row.active,"onUpdate:modelValue":t=>e.row.active=t,disabled:e.row.active,onChange:t=>(async i=>{try{await c.confirm("\u786E\u8BA4\u5207\u6362\u4E3A\u5F53\u524D\u573A\u666F\u5417\uFF1F"),m.value.forEach(p=>{p.name!=i.name&&(p.active=!1)}),await A({name:i.name})}catch{}})(e.row)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:1}),a(d,{prop:"power",label:"\u5F00\u673A\u542F\u52A8",align:"center"},{default:o(e=>[a(f,{modelValue:e.row.power,"onUpdate:modelValue":t=>e.row.power=t,disabled:e.row.power,onChange:t=>(async i=>{try{await c.confirm("\u786E\u8BA4\u8BBE\u7F6E\u4E3A\u5F00\u673A\u542F\u52A8\u5417\uFF1F"),await B({name:i.name})}finally{s()}})(e.row)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:1}),a(d,{fixed:"right",label:"\u64CD\u4F5C",width:"150",align:"center"},{default:o(e=>[a(u,{link:"",type:"primary",onClick:v(t=>(e.row,void c.warning("\u6682\u65E0\u6B64\u529F\u80FD")),["prevent"])},{default:o(()=>l[1]||(l[1]=[w(" \u590D\u5236 ")])),_:2},1032,["onClick"]),a(u,{link:"",type:"primary",onClick:v(t=>(async i=>{try{await c.confirm("\u786E\u8BA4\u6267\u884C\u6B64\u64CD\u4F5C\u5417\uFF1F"),await z({name:i.name})}finally{s()}})(e.row),["prevent"])},{default:o(()=>l[2]||(l[2]=[w(" \u4FDD\u5B58\u5230\u9ED8\u8BA4 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})}}});export{F as default};

import{d as H,Z as R,q as Z,p as B,r as s,a4 as E,C as c,o as i,s as t,a5 as J,a6 as $,a as l,j as n,v as S,a9 as O,aL as P,aM as Q,x as N,aa as T,D as W,c as X,F as Y,i as ee,G as ae,b6 as le,H as ue,ap as te}from"./index-DzCoMBOl.js";import{_ as se}from"./Dialog.vue_vue_type_style_index_0_lang-v5RKlSVj.js";import{i as r}from"./index-3hmPX4Qn.js";const ne=H({name:"ManageSpaceForm",__name:"inputSoureForm",emits:["success"],setup(me,{expose:C,emit:U}){R();const{t:V}=Z(),b=B(),f=s(""),p=s(!1),v=s(!1),a=s({inputName:void 0,selectInputName:void 0,type:"1"}),h=E({inputName:[{required:!0,message:"\u4F4D\u7F6E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],selectInputName:[{required:!0,message:"\u4F4D\u7F6E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),y=s(),o=s(""),_=s("");C({open:async(m,e,d)=>{f.value=m,o.value=e,_.value=d,p.value=!0,F(),K(),q(d)}});const q=async m=>{a.value.inputName=await r.getCreateInputName({inputKind:m})},w=U,x=async()=>{await y.value.validate(),v.value=!0;try{a.value.type=="1"?(await r.createInput({sceneName:o.value,inputName:a.value.inputName,inputKind:_.value}),b.success(V("common.createSuccess")),w("success",a.value.inputName)):(await r.createSceneItem({sceneName:o.value,inputName:a.value.selectInputName}),b.success(V("common.updateSuccess")),w("success",a.value.selectInputName)),p.value=!1}finally{v.value=!1}},g=s([]),F=async()=>{f.value=="\u573A\u666F"?g.value=await r.getAddSceneList({sceneName:o.value}):g.value=await r.getAddInputList({sceneName:o.value,inputKind:_.value})},K=()=>{var m;a.value={inputName:void 0,selectInputName:void 0,type:"1"},(m=y.value)==null||m.resetFields()};return(m,e)=>{const d=Q,L=P,I=O,j=T,z=ae,A=W,G=$,k=ue,M=se,D=le;return i(),c(M,{title:"\u65B0\u589E"+l(f),modelValue:l(p),"onUpdate:modelValue":e[4]||(e[4]=u=>te(p)?p.value=u:null)},{footer:t(()=>[n(k,{onClick:x,type:"primary",disabled:l(v)},{default:t(()=>e[7]||(e[7]=[N("\u786E \u5B9A")])),_:1},8,["disabled"]),n(k,{onClick:e[3]||(e[3]=u=>p.value=!1)},{default:t(()=>e[8]||(e[8]=[N("\u53D6 \u6D88")])),_:1})]),default:t(()=>[J((i(),c(G,{ref_key:"formRef",ref:y,model:l(a),rules:l(h),"label-width":"100px"},{default:t(()=>[n(I,{label:"\u7C7B\u578B",prop:"type"},{default:t(()=>[n(L,{modelValue:l(a).type,"onUpdate:modelValue":e[0]||(e[0]=u=>l(a).type=u)},{default:t(()=>[n(d,{value:"1",size:"large"},{default:t(()=>e[5]||(e[5]=[N("\u65B0\u5EFA")])),_:1}),n(d,{value:"2",size:"large"},{default:t(()=>e[6]||(e[6]=[N("\u9009\u62E9\u73B0\u6709")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(a).type=="1"?(i(),c(I,{key:0,label:"\u540D\u79F0",prop:"inputName"},{default:t(()=>[n(j,{modelValue:l(a).inputName,"onUpdate:modelValue":e[1]||(e[1]=u=>l(a).inputName=u),placeholder:"\u8BF7\u8F93\u5165\u8F93\u5165\u6E90\u540D\u79F0"},null,8,["modelValue"])]),_:1})):S("",!0),l(a).type=="2"?(i(),c(I,{key:1,label:"\u540D\u79F0",prop:"selectInputName"},{default:t(()=>[n(A,{modelValue:l(a).selectInputName,"onUpdate:modelValue":e[2]||(e[2]=u=>l(a).selectInputName=u),placeholder:"\u8BF7\u9009\u62E9\u8F93\u5165\u6E90"},{default:t(()=>[(i(!0),X(Y,null,ee(l(g),u=>(i(),c(z,{key:u.name,label:u.showName,value:u.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):S("",!0)]),_:1},8,["model","rules"])),[[D,l(v)]])]),_:1},8,["title","modelValue"])}}});export{ne as _};

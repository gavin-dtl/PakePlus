import{d as F,l as I,k as N,r as d,a3 as j,b as O,az as q,c as k,o as f,F as S,m as e,w as r,aO as B,f as x,a8 as D,ap as G,a as l,ab as H,C as J,q as E,a5 as K,A as L,y as Q,z as X,B as Y}from"./index-h2IMwmcw.js";import{S as u}from"./index-C0a6J9F4.js";const Z=F({name:"Convention",__name:"convention",props:{config:{type:Object,default:()=>{}}},setup(P,{expose:z}){const m=P,{t:b}=I(),c=N(),t=d({sysTrayEnabled:!1,sysTrayWhenStarted:!1,sysTrayMinimizeToTray:!1}),R=j({buffering_mb:[{validator:(i,a,o)=>{Number.isInteger(a)?o():o(new Error("\u8BF7\u8F93\u6570\u5B57"))},trigger:"change"}],reconnect_delay_sec:[{validator:(i,a,o)=>{Number.isInteger(a)?o():o(new Error("\u8BF7\u8F93\u6570\u5B57"))},trigger:"change"}]}),p=d();z({getData:async()=>{if(p)return await p.value.validate()?{...m.config,inputSetting:t.value}:void 0}});const C=d(),n=d({rootPath:""}),g=d([]),h=async()=>{n.value.rootPath=await u.getRootPath()},U=async()=>{try{await c.confirm("\u4FDD\u5B58\u4FEE\u6539\u540E\u539F\u6709\u6587\u4EF6\u5C06\u65E0\u6CD5\u8BBF\u95EE\uFF0C\u786E\u8BA4\u4FEE\u6539\u5417\uFF1F"),await u.setRootPath(n.value),c.success(b("common.updateSuccess")),h()}catch{}},T=async()=>{t.value=await u.getSysTraySetting()},M=async()=>{try{await u.setSysTraySetting(t.value),T(),c.success(b("common.updateSuccess"))}catch{}};return O(()=>{(async()=>g.value=await u.getAllRootPath())(),h(),T()}),q(()=>{m.config&&(t.value=m.config)}),(i,a)=>{const o=G,y=D,_=H,w=J,v=B,V=K,W=Y,A=L;return f(),k(S,null,[e(V,{style:{width:"100%"},ref_key:"formRef",ref:p,model:l(t),rules:l(R),"label-width":"140px"},{default:r(()=>[e(v,{style:{width:"100%","margin-top":"15px"}},{default:r(()=>[a[5]||(a[5]=x("h4",null,"\u7CFB\u7EDF\u6258\u76D8",-1)),e(y,{label:"\u5F00\u542F",prop:"seekable"},{default:r(()=>[e(o,{modelValue:l(t).sysTrayEnabled,"onUpdate:modelValue":a[0]||(a[0]=s=>l(t).sysTrayEnabled=s)},null,8,["modelValue"])]),_:1}),e(y,{prop:"seekable"},{default:r(()=>[e(_,{modelValue:l(t).sysTrayWhenStarted,"onUpdate:modelValue":a[1]||(a[1]=s=>l(t).sysTrayWhenStarted=s),disabled:!l(t).sysTrayEnabled,label:"\u5F00\u59CB\u65F6\u6700\u5C0F\u5316\u5230\u7CFB\u7EDF\u6258\u76D8"},null,8,["modelValue","disabled"])]),_:1}),e(y,{prop:"seekable"},{default:r(()=>[e(_,{modelValue:l(t).sysTrayMinimizeToTray,"onUpdate:modelValue":a[2]||(a[2]=s=>l(t).sysTrayMinimizeToTray=s),disabled:!l(t).sysTrayEnabled,label:"\u603B\u662F\u6700\u5C0F\u5316\u5230\u7CFB\u7EDF\u6258\u76D8\uFF0C\u800C\u4E0D\u662F\u4EFB\u52A1\u680F"},null,8,["modelValue","disabled"])]),_:1}),e(w,{style:{"margin-left":"95%"},type:"primary",onClick:M},{default:r(()=>a[4]||(a[4]=[E("\u4FDD\u5B58")])),_:1})]),_:1})]),_:1},8,["model","rules"]),e(V,{style:{width:"100%"},ref_key:"fileFormRef",ref:C,model:l(n),"label-width":"140px"},{default:r(()=>[e(v,{style:{width:"100%","margin-top":"15px"}},{default:r(()=>[a[7]||(a[7]=x("h4",null,"\u6587\u4EF6\u6839\u76EE\u5F55\u8BBE\u7F6E",-1)),e(y,{label:"\u6839\u76EE\u5F55",prop:"seekable"},{default:r(()=>[e(A,{modelValue:l(n).rootPath,"onUpdate:modelValue":a[3]||(a[3]=s=>l(n).rootPath=s),placeholder:"\u8BF7\u9009\u62E9\u6839\u76EE\u5F55",class:"!w-240px"},{default:r(()=>[(f(!0),k(S,null,Q(l(g),s=>(f(),X(W,{key:s,label:s,value:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(w,{style:{"margin-left":"95%"},type:"primary",onClick:U},{default:r(()=>a[6]||(a[6]=[E("\u4FDD\u5B58")])),_:1})]),_:1})]),_:1},8,["model"])],64)}}});export{Z as _};

import{au as x,d as T,p as W,r as L,b as Y,c as u,o as i,j as l,s,f as n,F as _,i as k,a as N,t as b,aa as q,x as p,H as z,aR as D,aS as J,at as E,aG as G,bd as w,be as g,_ as K}from"./index-DwcZmOlQ.js";import{_ as O}from"./ContentWrap.vue_vue_type_script_setup_true_lang-D9OUn0sG.js";const P=async()=>await x.get({url:"/core/cmdCtrl/getSceneCmdIndexList"}),Q=async I=>await x.post({url:"/core/cmdCtrl/setSceneCmdIndexList",data:I}),X=async()=>await x.get({url:"/core/cmdCtrl/getMonitorCmdIndexList"}),Z=async I=>await x.post({url:"/core/cmdCtrl/setMonitorCmdIndexList",data:I}),ee=async()=>await x.get({url:"/core/cmdCtrl/getSceneGroundCmdIndexList"}),ae=async I=>await x.post({url:"/core/cmdCtrl/setSceneGroundCmdIndexList",data:I}),de=async()=>await x.get({url:"/core/cmdCtrl/getInputCmdIndexList"}),ne=async I=>await x.post({url:"/core/cmdCtrl/setInputCmdIndexList",data:I}),te={class:"Scene-Collection"},le={class:"label"},se={class:"value"},ce={class:"keep-Button"},oe={class:"Scene-Collection"},re={class:"label"},me={class:"value"},ue={class:"keep-Button"},ie={class:"Scene-Collection"},pe={class:"label"},Ie={class:"value"},xe={class:"keep-Button"},we={class:"Input-Collection-item"},ve={class:"label"},ye={class:"value"},Ve={class:"Input-Collection"},fe={class:"label"},Ce={class:"value"},he={class:"keep-Button"},_e=K(T({name:"TcpInstructionConfiguration",__name:"index",setup(I){const c=W(),v=(a,e,o=!1)=>{if(a==="")return e.cmdIndex="",void(e.lastValidValue="");if(/^(0x)?[0-9a-fA-F]+$/.test(a)){const r=a.startsWith("0x")?a.substring(2):a,m=parseInt(r,16);if(!isNaN(m)&&m>0&&m<=255){const h=m.toString(16).toUpperCase();e.cmdIndex=h,e.lastValidValue=h}else E.warning("\u8BF7\u8F93\u51651\u5230FF\u4E4B\u95F4\u768416\u8FDB\u5236\u6570\u503C"),G(()=>{e.cmdIndex=o?"":e.lastValidValue||""})}else E.warning("\u8BF7\u8F93\u5165\u6709\u6548\u768416\u8FDB\u5236\u6570\u5B57 (0-9, A-F)"),G(()=>{e.cmdIndex=o?"":e.lastValidValue||""})},y=L(),U=async()=>{const a=await ee();y.value=a.map(e=>({...e,cmdIndex:w(e.cmdIndex),lastValidValue:w(e.cmdIndex)||""}))},A=async()=>{try{if(g(y.value,"cmdIndex"))return void c.error("\u573A\u666F\u96C6\u5408\u6307\u4EE4\u4E0D\u80FD\u5B58\u5728\u91CD\u590D");if(y.value.some(e=>e.cmdIndex==""||e.cmdIndex==0))return void c.error("\u573A\u666F\u96C6\u5408\u6307\u4EE4\u4E0D\u80FD\u5B58\u5728\u7A7A\u6216\u4E3A0\u6307\u4EE4");const a=y.value.map(e=>({...e,cmdIndex:parseInt(e.cmdIndex,16)}));await ae(a),U(),c.success("\u4FDD\u5B58\u6210\u529F")}catch{}},V=L(),F=async()=>{const a=await P();V.value=a.map(e=>({...e,cmdIndex:w(e.cmdIndex),lastValidValue:w(e.cmdIndex)||""}))},M=async()=>{try{if(g(V.value,"cmdIndex"))return void c.error("\u573A\u666F\u6307\u4EE4\u4E0D\u80FD\u5B58\u5728\u91CD\u590D");if(V.value.some(e=>e.cmdIndex==""||e.cmdIndex==0))return void c.error("\u573A\u666F\u6307\u4EE4\u4E0D\u80FD\u5B58\u5728\u7A7A\u6216\u4E3A0\u6307\u4EE4");const a=V.value.map(e=>({...e,cmdIndex:parseInt(e.cmdIndex,16)}));await Q(a),F(),c.success("\u4FDD\u5B58\u6210\u529F")}catch{}},f=L(),$=async()=>{const a=await X();f.value=a.map(e=>({...e,cmdIndex:w(e.cmdIndex),lastValidValue:w(e.cmdIndex)||""}))},j=async()=>{try{if(g(f.value,"cmdIndex"))return void c.error("\u5C4F\u5E55\u6307\u4EE4\u4E0D\u80FD\u5B58\u5728\u91CD\u590D");if(f.value.some(e=>e.cmdIndex==""||e.cmdIndex==0))return void c.error("\u5C4F\u5E55\u6307\u4EE4\u4E0D\u80FD\u5B58\u5728\u7A7A\u6216\u4E3A0\u6307\u4EE4");const a=f.value.map(e=>({...e,cmdIndex:parseInt(e.cmdIndex,16)}));await Z(a),$(),c.success("\u4FDD\u5B58\u6210\u529F")}catch{}},C=L(),B=async()=>{const a=await de();C.value=a.map(e=>({...e,cmdIndex:w(e.cmdIndex),lastValidValue:w(e.cmdIndex)||""}))},H=async()=>{if(g(C.value,"cmdIndex"))c.error("\u8F93\u5165\u6E90\u6307\u4EE4\u4E0D\u80FD\u5B58\u5728\u91CD\u590D");else try{for(const e of C.value){if(!e.cmdIndex||e.cmdIndex==0)throw c.error(`${e.showName}\u6307\u4EE4\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E3A0`),new Error("\u5B58\u5728\u7A7A\u6307\u4EE4");for(const o of e.subList)if(!o.cmdIndex||o.cmdIndex==0)throw c.error(`${e.showName}\u4E0B${o.showName}\u6EE4\u955C\u6307\u4EE4\u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E3A0`),new Error("\u5B58\u5728\u91CD\u590D\u6307\u4EE4");if(g(e.subList,"cmdIndex"))throw c.error(`${e.showName}\u4E0B\u6EE4\u955C\u6307\u4EE4\u4E0D\u80FD\u5B58\u5728\u91CD\u590D`),new Error("\u5B58\u5728\u91CD\u590D\u6307\u4EE4")}const a=C.value.map(e=>{const o=e.subList.map(r=>({...r,cmdIndex:parseInt(r.cmdIndex,16)}));return{...e,cmdIndex:parseInt(e.cmdIndex,16),subList:o}});await ne(a),B(),c.success("\u4FDD\u5B58\u6210\u529F")}catch{}};return Y(async()=>{U(),F(),$(),B()}),(a,e)=>{const o=q,r=z,m=O,h=J,R=D;return i(),u(_,null,[l(m,null,{default:s(()=>[e[2]||(e[2]=n("h3",null,"\u5C4F\u5E55",-1)),n("div",te,[(i(!0),u(_,null,k(N(f),d=>(i(),u("div",{key:d.name,class:"Scene-Collection-item"},[n("p",le,b(d.showName),1),n("p",se,[l(o,{modelValue:d.cmdIndex,"onUpdate:modelValue":t=>d.cmdIndex=t,style:{width:"150px"},onInput:t=>v(t,d)},{prepend:s(()=>e[0]||(e[0]=[p("0x")])),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])])]))),128))]),n("div",ce,[l(r,{type:"primary",onClick:j},{default:s(()=>e[1]||(e[1]=[p("\u4FDD\u5B58")])),_:1})])]),_:1}),l(m,null,{default:s(()=>[e[5]||(e[5]=n("h3",null,"\u573A\u666F\u96C6\u5408",-1)),n("div",oe,[(i(!0),u(_,null,k(N(y),d=>(i(),u("div",{key:d.name,class:"Scene-Collection-item"},[n("p",re,b(d.showName),1),n("p",me,[l(o,{modelValue:d.cmdIndex,"onUpdate:modelValue":t=>d.cmdIndex=t,style:{width:"150px"},onInput:t=>v(t,d)},{prepend:s(()=>e[3]||(e[3]=[p("0x")])),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])])]))),128))]),n("div",ue,[l(r,{type:"primary",onClick:A},{default:s(()=>e[4]||(e[4]=[p("\u4FDD\u5B58")])),_:1})])]),_:1}),l(m,null,{default:s(()=>[e[8]||(e[8]=n("h3",null,"\u573A\u666F",-1)),n("div",ie,[(i(!0),u(_,null,k(N(V),d=>(i(),u("div",{key:d.name,class:"Scene-Collection-item"},[n("p",pe,b(d.showName),1),n("p",Ie,[l(o,{modelValue:d.cmdIndex,"onUpdate:modelValue":t=>d.cmdIndex=t,style:{width:"150px"},onInput:t=>v(t,d)},{prepend:s(()=>e[6]||(e[6]=[p("0x")])),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])])]))),128))]),n("div",xe,[l(r,{type:"primary",onClick:M},{default:s(()=>e[7]||(e[7]=[p("\u4FDD\u5B58")])),_:1})])]),_:1}),l(m,null,{default:s(()=>[e[12]||(e[12]=n("h3",null,"\u8F93\u5165\u6E90",-1)),l(R,{data:N(C),style:{width:"100%"}},{default:s(()=>[l(h,{prop:"showName",label:"\u8F93\u5165\u6E90",width:"400",align:"center"},{default:s(d=>[n("div",we,[n("p",ve,b(d.row.showName),1),n("p",ye,[l(o,{modelValue:d.row.cmdIndex,"onUpdate:modelValue":t=>d.row.cmdIndex=t,style:{width:"150px"},onInput:t=>v(t,d.row)},{prepend:s(()=>e[9]||(e[9]=[p("0x")])),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])])])]),_:1}),l(h,{label:"\u6EE4\u955C",align:"center"},{default:s(d=>[n("div",Ve,[(i(!0),u(_,null,k(d.row.subList,t=>(i(),u("div",{class:"Input-Collection-item",key:t.name},[n("p",fe,b(t.showName),1),n("p",Ce,[l(o,{modelValue:t.cmdIndex,"onUpdate:modelValue":S=>t.cmdIndex=S,style:{width:"150px"},onInput:S=>v(S,t)},{prepend:s(()=>e[10]||(e[10]=[p("0x")])),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])])]))),128))])]),_:1})]),_:1},8,["data"]),n("div",he,[l(r,{type:"primary",onClick:H},{default:s(()=>e[11]||(e[11]=[p("\u4FDD\u5B58")])),_:1})])]),_:1})],64)}}}),[["__scopeId","data-v-d26d0f72"]]);export{_e as default};
